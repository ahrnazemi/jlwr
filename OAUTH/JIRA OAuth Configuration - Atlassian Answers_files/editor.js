(function(d){var a=/^\s*|\s*$/g,e,c="B".replace(/A(.)|B/,"$1")==="$1";var b={majorVersion:"3",minorVersion:"4.1",releaseDate:"2011-03-24",_init:function(){var s=this,q=document,o=navigator,g=o.userAgent,m,f,l,k,j,r;s.isOpera=d.opera&&opera.buildNumber;s.isWebKit=/WebKit/.test(g);s.isIE=!s.isWebKit&&!s.isOpera&&(/MSIE/gi).test(g)&&(/Explorer/gi).test(o.appName);s.isIE6=s.isIE&&/MSIE [56]/.test(g);s.isGecko=!s.isWebKit&&/Gecko/.test(g);s.isMac=g.indexOf("Mac")!=-1;s.isAir=/adobeair/i.test(g);s.isIDevice=/(iPad|iPhone)/.test(g);if(d.tinyMCEPreInit){s.suffix=tinyMCEPreInit.suffix;s.baseURL=tinyMCEPreInit.base;s.query=tinyMCEPreInit.query;return}s.suffix="";f=q.getElementsByTagName("base");for(m=0;m<f.length;m++){if(r=f[m].href){if(/^https?:\/\/[^\/]+$/.test(r)){r+="/"}k=r?r.match(/.*\//)[0]:""}}function h(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\.js/g.test(i.src)){s.suffix="_src"}if((j=i.src.indexOf("?"))!=-1){s.query=i.src.substring(j+1)}s.baseURL=i.src.substring(0,i.src.lastIndexOf("/"));if(k&&s.baseURL.indexOf("://")==-1&&s.baseURL.indexOf("/")!==0){s.baseURL=k+s.baseURL}return s.baseURL}return null}f=q.getElementsByTagName("script");for(m=0;m<f.length;m++){if(h(f[m])){return}}l=q.getElementsByTagName("head")[0];if(l){f=l.getElementsByTagName("script");for(m=0;m<f.length;m++){if(h(f[m])){return}}}return},is:function(g,f){if(!f){return g!==e}if(f=="array"&&(g.hasOwnProperty&&g instanceof Array)){return true}return typeof(g)==f},makeMap:function(f,j,h){var g;f=f||[];j=j||",";if(typeof(f)=="string"){f=f.split(j)}h=h||{};g=f.length;while(g--){h[f[g]]={}}return h},each:function(i,f,h){var j,g;if(!i){return 0}h=h||i;if(i.length!==e){for(j=0,g=i.length;j<g;j++){if(f.call(h,i[j],j,i)===false){return 0}}}else{for(j in i){if(i.hasOwnProperty(j)){if(f.call(h,i[j],j,i)===false){return 0}}}}return 1},map:function(g,h){var i=[];b.each(g,function(f){i.push(h(f))});return i},grep:function(g,h){var i=[];b.each(g,function(f){if(!h||h(f)){i.push(f)}});return i},inArray:function(g,h){var j,f;if(g){for(j=0,f=g.length;j<f;j++){if(g[j]===h){return j}}}return -1},extend:function(k,j){var h,g,f=arguments;for(h=1,g=f.length;h<g;h++){j=f[h];b.each(j,function(i,l){if(i!==e){k[l]=i}})}return k},trim:function(f){return(f?""+f:"").replace(a,"")},create:function(q,f,j){var o=this,g,i,k,l,h,m=0;q=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(q);k=q[3].match(/(^|\.)(\w+)$/i)[2];i=o.createNS(q[3].replace(/\.\w+$/,""),j);if(i[k]){return}if(q[2]=="static"){i[k]=f;if(this.onCreate){this.onCreate(q[2],q[3],i[k])}return}if(!f[k]){f[k]=function(){};m=1}i[k]=f[k];o.extend(i[k].prototype,f);if(q[5]){g=o.resolve(q[5]).prototype;l=q[5].match(/\.(\w+)$/i)[1];h=i[k];if(m){i[k]=function(){return g[l].apply(this,arguments)}}else{i[k]=function(){this.parent=g[l];return h.apply(this,arguments)}}i[k].prototype[k]=i[k];o.each(g,function(p,r){i[k].prototype[r]=g[r]});o.each(f,function(p,r){if(g[r]){i[k].prototype[r]=function(){this.parent=g[r];return p.apply(this,arguments)}}else{if(r!=k){i[k].prototype[r]=p}}})}o.each(f["static"],function(p,r){i[k][r]=p});if(this.onCreate){this.onCreate(q[2],q[3],i[k].prototype)}},walk:function(i,h,j,g){g=g||this;if(i){if(j){i=i[j]}b.each(i,function(k,f){if(h.call(g,k,f,j)===false){return false}b.walk(k,h,j,g)})}},createNS:function(j,h){var g,f;h=h||d;j=j.split(".");for(g=0;g<j.length;g++){f=j[g];if(!h[f]){h[f]={}}h=h[f]}return h},resolve:function(j,h){var g,f;h=h||d;j=j.split(".");for(g=0,f=j.length;g<f;g++){h=h[j[g]];if(!h){break}}return h},addUnload:function(j,i){var h=this;j={func:j,scope:i||this};if(!h.unloads){function g(){var f=h.unloads,l,m;if(f){for(m in f){l=f[m];if(l&&l.func){l.func.call(l.scope,1)}}if(d.detachEvent){d.detachEvent("onbeforeunload",k);d.detachEvent("onunload",g)}else{if(d.removeEventListener){d.removeEventListener("unload",g,false)}}h.unloads=l=f=w=g=0;if(d.CollectGarbage){CollectGarbage()}}}function k(){var l=document;if(l.readyState=="interactive"){function f(){l.detachEvent("onstop",f);if(g){g()}l=0}if(l){l.attachEvent("onstop",f)}d.setTimeout(function(){if(l){l.detachEvent("onstop",f)}},0)}}if(d.attachEvent){d.attachEvent("onunload",g);d.attachEvent("onbeforeunload",k)}else{if(d.addEventListener){d.addEventListener("unload",g,false)}}h.unloads=[j]}else{h.unloads.push(j)}return j},removeUnload:function(i){var g=this.unloads,h=null;b.each(g,function(j,f){if(j&&j.func==i){g.splice(f,1);h=i;return false}});return h},explode:function(f,g){return f?b.map(f.split(g||","),b.trim):f},_addVer:function(g){var f;if(!this.query){return g}f=(g.indexOf("?")==-1?"?":"&")+this.query;if(g.indexOf("#")==-1){return g+f}return g.replace("#",f+"#")},_replace:function(h,f,g){if(c){return g.replace(h,function(){var l=f,j=arguments,k;for(k=0;k<j.length-2;k++){if(j[k]===e){l=l.replace(new RegExp("\\$"+k,"g"),"")}else{l=l.replace(new RegExp("\\$"+k,"g"),j[k])}}return l})}return g.replace(h,f)}};b._init();d.tinymce=d.tinyMCE=b})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false}});return c},dispatch:function(){var f,d=arguments,e,b=this.listeners,g;for(e=0;e<b.length;e++){g=b[e];f=g.cb.apply(g.scope,d);if(f===false){break}}return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,h,d,c;e=tinymce.trim(e);g=f.settings=g||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^\w*:?\/\//.test(e)){e=(g.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(g.base_uri.path,e)}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=e[j];if(k){k=k.replace(/\(mce_at\)/g,"@@")}f[b]=k});if(c=g.base_uri){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host=="mce_host"){f.port=c.port}if(!f.host||f.host=="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var c=this,d;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:c});if((b.host!="mce_host"&&c.host!=b.host&&b.host)||c.port!=b.port||c.protocol!=b.protocol){return b.getURI()}d=c.toRelPath(c.path,b.path);if(b.query){d+="?"+b.query}if(b.anchor){d+="#"+b.anchor}return d},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f==1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(i){if(i){h.push(i)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length==0||f[c]=="."){continue}if(f[c]==".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(j,h,g,f,i,c)},get:function(i){var h=document.cookie,g,f=i+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!=0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();(function(){function serialize(o,quote){var i,v,t;quote=quote||'"';if(o==null){return"null"}t=typeof o;if(t=="string"){v="\bb\tt\nn\ff\rr\"\"''\\\\";return quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(quote==='"'&&a==="'"){return a}i=v.indexOf(b);if(i+1){return"\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+quote}if(t=="object"){if(o.hasOwnProperty&&o instanceof Array){for(i=0,v="[";i<o.length;i++){v+=(i>0?",":"")+serialize(o[i],quote)}return v+"]"}v="{";for(i in o){v+=typeof o[i]!="function"?(v.length>1?","+quote:quote)+i+quote+":"+serialize(o[i],quote):""}return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f);f.success=function(h,g){h=b.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){if(e){e.call(f.error_scope||f.scope,h,g)}};f.data=b.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(j){var a,g,d,k=/[&\"\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,c=/&(#)?([\w]+);/g,i={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function h(l){var m;m=document.createElement("div");m.innerHTML=l;return m.textContent||m.innerText||l}function e(m,q){var o,p,l,r={};if(m){m=m.split(",");q=q||10;for(o=0;o<m.length;o+=2){p=String.fromCharCode(parseInt(m[o],q));if(!g[p]){l="&"+m[o+1]+";";r[p]=l;r[l]=p}}return r}}a=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);j.html=j.html||{};j.html.Entities={encodeRaw:function(m,l){return m.replace(l?k:b,function(o){return g[o]||o})},encodeAllRaw:function(l){return(""+l).replace(f,function(m){return g[m]||m})},encodeNumeric:function(m,l){return m.replace(l?k:b,function(o){if(o.length>1){return"&#"+(((o.charCodeAt(0)-55296)*1024)+(o.charCodeAt(1)-56320)+65536)+";"}return g[o]||"&#"+o.charCodeAt(0)+";"})},encodeNamed:function(o,l,m){m=m||a;return o.replace(l?k:b,function(p){return g[p]||m[p]||p})},getEncodeFunc:function(l,p){var q=j.html.Entities;p=e(p)||a;function m(s,r){return s.replace(r?k:b,function(u){return g[u]||p[u]||"&#"+u.charCodeAt(0)+";"||u})}function o(s,r){return q.encodeNamed(s,r,p)}l=j.makeMap(l.replace(/\+/g,","));if(l.named&&l.numeric){return m}if(l.named){if(p){return o}return q.encodeNamed}if(l.numeric){return q.encodeNumeric}return q.encodeRaw},decode:function(l){return l.replace(c,function(o,m,p){if(m){p=parseInt(p);if(p>65535){p-=65536;return String.fromCharCode(55296+(p>>10),56320+(p&1023))}else{return i[p]||String.fromCharCode(p)}}return d[o]||a[o]||h(o)})}}})(tinymce);tinymce.html.Styles=function(d,f){var k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,m=/rgb/,e,g,a={},j;d=d||{};j="\\\" \\' \\; \\: ; : _".split(" ");for(g=0;g<j.length;g++){a[j[g]]="_"+g;a["_"+g]=j[g]}function c(o,s,q,i){function p(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r}return"#"+p(s)+p(q)+p(i)}return{toHex:function(i){return i.replace(k,c)},parse:function(s){var A={},q,o,y,r,x=d.url_converter,z=d.url_converter_scope||this;function p(E,H){var G,D,C,F;G=A[E+"-top"+H];if(!G){return}D=A[E+"-right"+H];if(G!=D){return}C=A[E+"-bottom"+H];if(D!=C){return}F=A[E+"-left"+H];if(C!=F){return}A[E+H]=F;delete A[E+"-top"+H];delete A[E+"-right"+H];delete A[E+"-bottom"+H];delete A[E+"-left"+H]}function v(D){var E=A[D],C;if(!E||E.indexOf(" ")<0){return}E=E.split(" ");C=E.length;while(C--){if(E[C]!==E[0]){return false}}A[D]=E[0];return true}function B(E,D,C,F){if(!v(D)){return}if(!v(C)){return}if(!v(F)){return}A[E]=A[D]+" "+A[C]+" "+A[F];delete A[D];delete A[C];delete A[F]}function u(C){r=true;return a[C]}function i(D,C){if(r){D=D.replace(/_[0-9]/g,function(E){return a[E]})}if(!C){D=D.replace(/\\([\'\";:])/g,"$1")}return D}if(s){s=s.replace(/\\[\"\';:_]/g,u).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(C){return C.replace(/[;:]/g,u)});while(q=b.exec(s)){o=q[1].replace(l,"").toLowerCase();y=q[2].replace(l,"");if(o&&y.length>0){if(o==="font-weight"&&y==="700"){y="bold"}else{if(o==="color"||o==="background-color"){y=y.toLowerCase()}}y=y.replace(k,c);y=y.replace(h,function(D,C,G,F,H,E){H=H||E;if(H){H=i(H);return"'"+H.replace(/\'/g,"\\'")+"'"}C=i(C||G||F);if(x){C=x.call(z,C,"style")}return"url('"+C.replace(/\'/g,"\\'")+"')"});A[o]=r?i(y,true):y}b.lastIndex=q.index+q[0].length}p("border","");p("border","-width");p("border","-color");p("border","-style");p("padding","");p("margin","");B("border","border-width","border-style","border-color");if(A.border==="medium none"){delete A.border}}return A},serialize:function(q,s){var p="",o,r;function i(v){var z,x,u,v,y;z=f.styles[v];if(z){for(x=0,u=z.length;x<u;x++){v=z[x];y=q[v];if(y!==e){p+=(p.length>0?" ":"")+v+": "+y+";"}}}}if(s&&f&&f.styles){i("*");i(o)}else{for(o in q){r=q[o];if(r!==e){p+=(p.length>0?" ":"")+o+": "+r+";"}}}return p}}};(function(l){var g={},i,k,f,d,b,e,c=l.makeMap,j=l.each;function h(o,m){return o.split(m||",")}function a(r,q){var o,p={};function m(s){return s.replace(/[A-Z]+/g,function(u){return m(r[u])})}for(o in r){if(r.hasOwnProperty(o)){r[o]=m(r[o])}}m(q).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(x,u,s,v){s=h(s,"|");p[u]={attributes:c(s),attributesOrder:s,children:c(v,"|",{"#comment":{}})}});return p}k="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";k=c(k,",",c(k.toUpperCase()));g=a({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]");i=c("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,preload,autoplay,loop,controls");f=c("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");d=l.extend(c("td,th,iframe,video,object"),f);b=c("pre,script,style");e=c("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");l.html.Schema=function(q){var z=this,m={},o={},x=[],p;q=q||{};if(q.verify_html===false){q.valid_elements="*[*]"}if(q.valid_styles){p={};j(q.valid_styles,function(B,A){p[A]=l.explode(B)})}function y(A){return new RegExp("^"+A.replace(/([?+*])/g,".$1")+"$")}function s(H){var G,C,V,R,W,B,E,Q,T,M,U,Y,K,F,S,A,O,D,X,Z,L,P,J=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,N=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,I=/[*?+]/;if(H){H=h(H);if(m["@"]){O=m["@"].attributes;D=m["@"].attributesOrder}for(G=0,C=H.length;G<C;G++){B=J.exec(H[G]);if(B){S=B[1];M=B[2];A=B[3];T=B[4];K={};F=[];E={attributes:K,attributesOrder:F};if(S==="#"){E.paddEmpty=true}if(S==="-"){E.removeEmpty=true}if(O){for(Z in O){K[Z]=O[Z]}F.push.apply(F,D)}if(T){T=h(T,"|");for(V=0,R=T.length;V<R;V++){B=N.exec(T[V]);if(B){Q={};Y=B[1];U=B[2].replace(/::/g,":");S=B[3];P=B[4];if(Y==="!"){E.attributesRequired=E.attributesRequired||[];E.attributesRequired.push(U);Q.required=true}if(Y==="-"){delete K[U];F.splice(l.inArray(F,U),1);continue}if(S){if(S==="="){E.attributesDefault=E.attributesDefault||[];E.attributesDefault.push({name:U,value:P});Q.defaultValue=P}if(S===":"){E.attributesForced=E.attributesForced||[];E.attributesForced.push({name:U,value:P});Q.forcedValue=P}if(S==="<"){Q.validValues=c(P,"?")}}if(I.test(U)){E.attributePatterns=E.attributePatterns||[];Q.pattern=y(U);E.attributePatterns.push(Q)}else{if(!K[U]){F.push(U)}K[U]=Q}}}}if(!O&&M=="@"){O=K;D=F}if(A){E.outputName=M;m[A]=E}if(I.test(M)){E.pattern=y(M);x.push(E)}else{m[M]=E}}}}}function v(A){m={};x=[];s(A);j(g,function(C,B){o[B]=C.children})}function r(B){var A=/^(~)?(.+)$/;if(B){j(h(B),function(E){var D=A.exec(E),F=D[1]==="~"?"span":"div",C=D[2];o[C]=o[F];j(o,function(G,H){if(G[F]){G[C]=G[F]}})})}}function u(B){var A=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(B){j(h(B),function(F){var E=A.exec(F),C,D;if(E){D=E[1];if(D){C=o[E[2]]}else{C=o[E[2]]={"#comment":{}}}C=o[E[2]];j(h(E[3],"|"),function(G){if(D==="-"){delete C[G]}else{C[G]={}}})}})}}if(!q.valid_elements){j(g,function(B,A){m[A]={attributes:B.attributes,attributesOrder:B.attributesOrder};o[A]=B.children});j(h("strong/b,em/i"),function(A){A=h(A,"/");m[A[1]].outputName=A[0]});m.img.attributesDefault=[{name:"alt",value:""}];j(h("ol,ul,li,sub,sup,blockquote,tr,div,span,font,a,table,tbody"),function(A){m[A].removeEmpty=true});j(h("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(A){m[A].paddEmpty=true})}else{v(q.valid_elements)}r(q.custom_elements);u(q.valid_children);s(q.extended_valid_elements);u("+ol[ul|ol],+ul[ul|ol]");if(q.invalid_elements){l.each(l.explode(q.invalid_elements),function(A){if(m[A]){delete m[A]}})}z.children=o;z.styles=p;z.getBoolAttrs=function(){return i};z.getBlockElements=function(){return k};z.getShortEndedElements=function(){return f};z.getSelfClosingElements=function(){return e};z.getNonEmptyElements=function(){return d};z.getWhiteSpaceElements=function(){return b};z.isValidChild=function(A,C){var B=o[A];return !!(B&&B[C])};z.getElementRule=function(A){var C=m[A],B;if(C){return C}B=x.length;while(B--){C=x[B];if(C.pattern.test(A)){return C}}};z.addValidElements=s;z.setValidElements=v;z.addCustomElements=r;z.addValidChildren=u};l.html.Schema.boolAttrMap=i;l.html.Schema.blockElementsMap=k})(tinymce);(function(a){a.html.SaxParser=function(c,e){var b=this,d=function(){};c=c||{};b.schema=e=e||new a.html.Schema();if(c.fix_self_closing!==false){c.fix_self_closing=true}a.each("comment cdata text start end pi doctype".split(" "),function(f){if(f){b[f]=c[f]||d}});b.parse=function(r){var C=this,f,m=0,I,j,l=[],D,M,v,P,H,k,q,z,K,s,G,p,L,o,J,O,N,B,F,h,g,x,u=0,y=a.html.Entities.decode,A;function E(Q){var S,R;S=l.length;while(S--){if(l[S].name===Q){break}}if(S>=0){for(R=l.length-1;R>=S;R--){Q=l[R];if(Q.valid){C.end(Q.name)}}l.length=S}}F=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)\\s*((?:[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*)>))","g");h=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;g={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};H=e.getShortEndedElements();B=e.getSelfClosingElements();k=e.getBoolAttrs();z=c.validate;A=c.fix_self_closing;while(f=F.exec(r)){if(m<f.index){C.text(y(r.substr(m,f.index-m)))}if(I=f[6]){E(I.toLowerCase())}else{if(I=f[7]){I=I.toLowerCase();q=I in H;if(A&&B[I]&&l.length>0&&l[l.length-1].name===I){E(I)}if(!z||(K=e.getElementRule(I))){s=true;if(z){L=K.attributes;o=K.attributePatterns}if(p=f[8]){D=[];D.map={};p.replace(h,function(R,Q,V,U,T){var W,S;Q=Q.toLowerCase();V=Q in k?Q:y(V||U||T||"");if(z&&Q.indexOf("data-")!==0){W=L[Q];if(!W&&o){S=o.length;while(S--){W=o[S];if(W.pattern.test(Q)){break}}if(S===-1){W=null}}if(!W){return}if(W.validValues&&!(V in W.validValues)){return}}D.map[Q]=V;D.push({name:Q,value:V})})}else{D=[];D.map={}}if(z){J=K.attributesRequired;O=K.attributesDefault;N=K.attributesForced;if(N){M=N.length;while(M--){G=N[M];P=G.name;x=G.value;if(x==="{$uid}"){x="mce_"+u++}D.map[P]=x;D.push({name:P,value:x})}}if(O){M=O.length;while(M--){G=O[M];P=G.name;if(!(P in D.map)){x=G.value;if(x==="{$uid}"){x="mce_"+u++}D.map[P]=x;D.push({name:P,value:x})}}}if(J){M=J.length;while(M--){if(J[M] in D.map){break}}if(M===-1){s=false}}if(D.map["data-mce-bogus"]){s=false}}if(s){C.start(I,D,q)}}else{s=false}if(j=g[I]){j.lastIndex=m=f.index+f[0].length;if(f=j.exec(r)){if(s){v=r.substr(m,f.index-m)}m=f.index+f[0].length}else{v=r.substr(m);m=r.length}if(s&&v.length>0){C.text(v,true)}if(s){C.end(I)}F.lastIndex=m;continue}if(!q){if(!p||p.indexOf("/")!=p.length-1){l.push({name:I,valid:s})}else{if(s){C.end(I)}}}}else{if(I=f[1]){C.comment(I)}else{if(I=f[2]){C.cdata(I)}else{if(I=f[3]){C.doctype(I)}else{if(I=f[4]){C.pi(I,f[5])}}}}}}m=f.index+f[0].length}if(m<r.length){C.text(y(r.substr(m)))}for(M=l.length-1;M>=0;M--){I=l[M];if(I.valid){C.end(I.name)}}}}})(tinymce);(function(d){var c=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function a(k,l,j){var i,h,f=j?"lastChild":"firstChild",g=j?"prev":"next";if(k[f]){return k[f]}if(k!==l){i=k[g];if(i){return i}for(h=k.parent;h&&h!==l;h=h.parent){i=h[g];if(i){return i}}}}function b(f,g){this.name=f;this.type=g;if(g===1){this.attributes=[];this.attributes.map={}}}d.extend(b.prototype,{replace:function(g){var f=this;if(g.parent){g.remove()}f.insert(g,f);f.remove();return f},attr:function(h,l){var f=this,g,j,k;if(typeof h!=="string"){for(j in h){f.attr(j,h[j])}return f}if(g=f.attributes){if(l!==k){if(l===null){if(h in g.map){delete g.map[h];j=g.length;while(j--){if(g[j].name===h){g=g.splice(j,1);return f}}}return f}if(h in g.map){j=g.length;while(j--){if(g[j].name===h){g[j].value=l;break}}}else{g.push({name:h,value:l})}g.map[h]=l;return f}else{return g.map[h]}}},clone:function(){var g=this,o=new b(g.name,g.type),h,f,m,j,k;if(m=g.attributes){k=[];k.map={};for(h=0,f=m.length;h<f;h++){j=m[h];if(j.name!=="id"){k[k.length]={name:j.name,value:j.value};k.map[j.name]=j.value}}o.attributes=k}o.value=g.value;o.shortEnded=g.shortEnded;return o},wrap:function(g){var f=this;f.parent.insert(g,f);g.append(f);return f},unwrap:function(){var f=this,h,g;for(h=f.firstChild;h;){g=h.next;f.insert(h,f,true);h=g}f.remove()},remove:function(){var f=this,h=f.parent,g=f.next,i=f.prev;if(h){if(h.firstChild===f){h.firstChild=g;if(g){g.prev=null}}else{i.next=g}if(h.lastChild===f){h.lastChild=i;if(i){i.next=null}}else{g.prev=i}f.parent=f.next=f.prev=null}return f},append:function(h){var f=this,g;if(h.parent){h.remove()}g=f.lastChild;if(g){g.next=h;h.prev=g;f.lastChild=h}else{f.lastChild=f.firstChild=h}h.parent=f;return h},insert:function(h,f,i){var g;if(h.parent){h.remove()}g=f.parent||this;if(i){if(f===g.firstChild){g.firstChild=h}else{f.prev.next=h}h.prev=f.prev;h.next=f;f.prev=h}else{if(f===g.lastChild){g.lastChild=h}else{f.next.prev=h}h.next=f.next;h.prev=f;f.next=h}h.parent=g;return h},getAll:function(g){var f=this,h,i=[];for(h=f.firstChild;h;h=a(h,f)){if(h.name===g){i.push(h)}}return i},empty:function(){var g=this,f,h,j;if(g.firstChild){f=[];for(j=g.firstChild;j;j=a(j,g)){f.push(j)}h=f.length;while(h--){j=f[h];j.parent=j.firstChild=j.lastChild=j.next=j.prev=null}}g.firstChild=g.lastChild=null;return g},isEmpty:function(j){var f=this,h=f.firstChild,g;if(h){do{if(h.type===1){if(h.attributes.map["data-mce-bogus"]){continue}if(j[h.name]){return false}g=h.attributes.length;while(g--){if(h.attributes[g].name.indexOf("data-")===0){return false}}}if((h.type===3&&!c.test(h.value))){return false}}while(h=a(h,f))}return true}});d.extend(b,{create:function(g,f){var i,h;i=new b(g,e[g]||1);if(f){for(h in f){i.attr(h,f[h])}}return i}});d.html.Node=b})(tinymce);(function(b){var a=b.html.Node;b.html.DomParser=function(g,h){var f=this,e={},d=[],i={},c={};g=g||{};g.root_name=g.root_name||"body";f.schema=h=h||new b.html.Schema();function j(m){var p,q,z,y,B,o,r,l,v,x,k,u,A,s;u=b.makeMap("tr,td,th,tbody,thead,tfoot,table");k=h.getNonEmptyElements();for(p=0;p<m.length;p++){q=m[p];if(!q.parent){continue}y=[q];for(z=q.parent;z&&!h.isValidChild(z.name,q.name)&&!u[z.name];z=z.parent){y.push(z)}if(z&&y.length>1){y.reverse();B=o=f.filterNode(y[0].clone());for(v=0;v<y.length-1;v++){if(h.isValidChild(o.name,y[v].name)){r=f.filterNode(y[v].clone());o.append(r)}else{r=o}for(l=y[v].firstChild;l&&l!=y[v+1];){s=l.next;r.append(l);l=s}o=r}if(!B.isEmpty(k)){z.insert(B,y[0],true);z.insert(q,B)}else{z.insert(q,y[0],true)}z=y[0];if(z.isEmpty(k)||z.firstChild===z.lastChild&&z.firstChild.name==="br"){z.empty().remove()}}else{if(q.parent){if(q.name==="li"){A=q.prev;if(A&&(A.name==="ul"||A.name==="ul")){A.append(q);continue}A=q.next;if(A&&(A.name==="ul"||A.name==="ul")){A.insert(q,A.firstChild,true);continue}q.wrap(f.filterNode(new a("ul",1)));continue}if(h.isValidChild(q.parent.name,"div")&&h.isValidChild("div",q.name)){q.wrap(f.filterNode(new a("div",1)))}else{if(q.name==="style"||q.name==="script"){q.empty().remove()}else{q.unwrap()}}}}}}f.filterNode=function(m){var l,k,o;if(k in e){o=i[k];if(o){o.push(m)}else{i[k]=[m]}}l=d.length;while(l--){k=d[l].name;if(k in m.attributes.map){o=c[k];if(o){o.push(m)}else{c[k]=[m]}}}return m};f.addNodeFilter=function(k,l){b.each(b.explode(k),function(m){var o=e[m];if(!o){e[m]=o=[]}o.push(l)})};f.addAttributeFilter=function(k,l){b.each(b.explode(k),function(m){var o;for(o=0;o<d.length;o++){if(d[o].name===m){d[o].callbacks.push(l);return}}d.push({name:m,callbacks:[l]})})};f.parse=function(x,m){var o,F,A,z,C,B,y,r,E,I,p,D,H=[],u,k,s,q,v;m=m||{};i={};c={};p=b.extend(b.makeMap("script,style,head,title,meta,param"),h.getBlockElements());v=h.getNonEmptyElements();q=h.children;s=h.getWhiteSpaceElements();D=/^[ \t\r\n]+/;u=/[ \t\r\n]+$/;k=/[ \t\r\n]+/g;function G(l,J){var K=new a(l,J),L;if(l in e){L=i[l];if(L){L.push(K)}else{i[l]=[K]}}return K}o=new b.html.SaxParser({validate:g.validate,fix_self_closing:false,cdata:function(l){A.append(G("#cdata",4)).value=l},text:function(K,l){var J;if(!s[A.name]){K=K.replace(k," ");if(A.lastChild&&p[A.lastChild.name]){K=K.replace(D,"")}}if(K.length!==0){J=G("#text",3);J.raw=!!l;A.append(J).value=K}},comment:function(l){A.append(G("#comment",8)).value=l},pi:function(l,J){A.append(G(l,7)).value=J},doctype:function(l){A.append(G("#doctype",10)).value=l},start:function(l,R,K){var P,M,L,J,N,S,Q,O;L=h.getElementRule(l);if(L){P=G(L.outputName||l,1);P.attributes=R;P.shortEnded=K;A.append(P);O=q[A.name];if(O&&q[P.name]&&!O[P.name]){H.push(P)}M=d.length;while(M--){N=d[M].name;if(N in R.map){E=c[N];if(E){E.push(P)}else{c[N]=[P]}}}if(p[l]){for(J=P.prev;J&&J.type===3;){S=J.value.replace(u,"");if(S.length>0){J.value=S;J=J.prev}else{Q=J.prev;J.remove();J=Q}}}if(!K){A=P}}},end:function(l){var N,K,M,J,L;K=h.getElementRule(l);if(K){if(p[l]){if(!s[A.name]){for(N=A.firstChild;N&&N.type===3;){M=N.value.replace(D,"");if(M.length>0){N.value=M;N=N.next}else{J=N.next;N.remove();N=J}}for(N=A.lastChild;N&&N.type===3;){M=N.value.replace(u,"");if(M.length>0){N.value=M;N=N.prev}else{J=N.prev;N.remove();N=J}}}N=A.prev;if(N&&N.type===3){M=N.value.replace(D,"");if(M.length>0){N.value=M}else{N.remove()}}}if(K.removeEmpty||K.paddEmpty){if(A.isEmpty(v)){if(K.paddEmpty){A.empty().append(new a("#text","3")).value="\u00a0"}else{if(!A.attributes.map.name){L=A.parent;A.empty().remove();A=L;return}}}}A=A.parent}}},h);F=A=new a(g.root_name,11);o.parse(x);j(H);for(I in i){E=e[I];z=i[I];y=z.length;while(y--){if(!z[y].parent){z.splice(y,1)}}for(C=0,B=E.length;C<B;C++){E[C](z,I,m)}}for(C=0,B=d.length;C<B;C++){E=d[C];if(E.name in c){z=c[E.name];y=z.length;while(y--){if(!z[y].parent){z.splice(y,1)}}for(y=0,r=E.callbacks.length;y<r;y++){E.callbacks[y](z,E.name,m)}}}return F};if(g.remove_trailing_brs){f.addNodeFilter("br",function(o,m){var s,r=o.length,p,x=h.getBlockElements(),k=h.getNonEmptyElements(),u,q,v;for(s=0;s<r;s++){p=o[s];u=p.parent;if(x[p.parent.name]&&p===u.lastChild){q=p.prev;while(q){v=q.name;if(v!=="span"||q.attr("data-mce-type")!=="bookmark"){if(v!=="br"){break}if(v==="br"){p=null;break}}q=q.prev}if(p){p.remove();if(u.isEmpty(k)){elementRule=h.getElementRule(u.name);if(elementRule.removeEmpty){u.remove()}else{if(elementRule.paddEmpty){u.empty().append(new b.html.Node("#text",3)).value="\u00a0"}}}}}}})}}})(tinymce);tinymce.html.Writer=function(e){var c=[],a,b,d,f,g;e=e||{};a=e.indent;b=tinymce.makeMap(e.indent_before||"");d=tinymce.makeMap(e.indent_after||"");f=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities);g=e.element_format=="html";return{start:function(m,k,q){var o,j,h,p;if(a&&b[m]&&c.length>0){p=c[c.length-1];if(p.length>0&&p!=="\n"){c.push("\n")}}c.push("<",m);if(k){for(o=0,j=k.length;o<j;o++){h=k[o];c.push(" ",h.name,'="',f(h.value,true),'"')}}if(!q||g){c[c.length]=">"}else{c[c.length]=" />"}},end:function(h){var i;c.push("</",h,">");if(a&&d[h]&&c.length>0){i=c[c.length-1];if(i.length>0&&i!=="\n"){c.push("\n")}}},text:function(i,h){if(i.length>0){c[c.length]=h?i:f(i)}},cdata:function(h){c.push("<![CDATA[",h,"]]>")},comment:function(h){c.push("<!--",h,"-->")},pi:function(h,i){if(i){c.push("<?",h," ",i,"?>")}else{c.push("<?",h,"?>")}},doctype:function(h){c.push("<!DOCTYPE",h,">")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}};(function(a){a.html.Serializer=function(c,d){var b=this,e=new a.html.Writer(c);c=c||{};c.validate="validate" in c?c.validate:true;b.schema=d=d||new a.html.Schema();b.writer=e;b.serialize=function(h){var g,i;i=c.validate;g={3:function(k,j){e.text(k.value,k.raw)},8:function(j){e.comment(j.value)},7:function(j){e.pi(j.name,j.value)},10:function(j){e.doctype(j.value)},4:function(j){e.cdata(j.value)},11:function(j){if((j=j.firstChild)){do{f(j)}while(j=j.next)}}};e.reset();function f(k){var v=g[k.type],j,p,u,s,q,x,o,m,r;if(!v){j=k.name;p=k.shortEnded;u=k.attributes;if(i&&u&&u.length>1){x=[];x.map={};r=d.getElementRule(k.name);for(o=0,m=r.attributesOrder.length;o<m;o++){s=r.attributesOrder[o];if(s in u.map){q=u.map[s];x.map[s]=q;x.push({name:s,value:q})}}for(o=0,m=u.length;o<m;o++){s=u[o].name;if(!(s in x.map)){q=u.map[s];x.map[s]=q;x.push({name:s,value:q})}}u=x}e.start(k.name,u,p);if(!p){if((k=k.firstChild)){do{f(k)}while(k=k.next)}e.end(j)}}else{v(k)}}if(h.type==1&&!c.inner){f(h)}else{g[11](h)}return e.getContent()}}})(tinymce);(function(d){var f=d.each,c=d.is,e=d.isWebKit,a=d.isIE,h=d.html.Entities,b=/^([a-z0-9],?)+$/i,g=d.html.Schema.blockElementsMap;d.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(m,k){var j=this,i;j.doc=m;j.win=window;j.files={};j.cssFlicker=false;j.counter=0;j.stdMode=!d.isIE||m.documentMode>=8;j.boxModel=!d.isIE||m.compatMode=="CSS1Compat"||j.stdMode;j.hasOuterHTML="outerHTML" in m.createElement("a");j.settings=k=d.extend({keep_values:false,hex_colors:1},k);j.styles=new d.html.Styles({url_converter:k.url_converter,url_converter_scope:k.url_converter_scope},k.schema);if(d.isIE6){try{m.execCommand("BackgroundImageCache",false,true)}catch(l){j.cssFlicker=true}}if(a){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(o){m.createElement(o)})}d.addUnload(j.destroy,j)},getRoot:function(){var i=this,j=i.settings;return(j&&i.get(j.root_element))||i.doc.body},getViewPort:function(j){var k,i;j=!j?this.win:j;k=j.document;i=this.boxModel?k.documentElement:k.body;return{x:j.pageXOffset||i.scrollLeft,y:j.pageYOffset||i.scrollTop,w:j.innerWidth||i.clientWidth,h:j.innerHeight||i.clientHeight}},getRect:function(l){var k,i=this,j;l=i.get(l);k=i.getPos(l);j=i.getSize(l);return{x:k.x,y:k.y,w:j.w,h:j.h}},getSize:function(l){var j=this,i,k;l=j.get(l);i=j.getStyle(l,"width");k=j.getStyle(l,"height");if(i.indexOf("px")===-1){i=0}if(k.indexOf("px")===-1){k=0}return{w:parseInt(i)||l.offsetWidth||l.clientWidth,h:parseInt(k)||l.offsetHeight||l.clientHeight}},getParent:function(k,j,i){return this.getParents(k,j,i,false)},getParents:function(s,m,k,q){var j=this,i,l=j.settings,p=[];s=j.get(s);q=q===undefined;if(l.strict_root){k=k||j.getRoot()}if(c(m,"string")){i=m;if(m==="*"){m=function(o){return o.nodeType==1}}else{m=function(o){return j.is(o,i)}}}while(s){if(s==k||!s.nodeType||s.nodeType===9){break}if(!m||m(s)){if(q){p.push(s)}else{return s}}s=s.parentNode}return q?p:null},get:function(i){var j;if(i&&this.doc&&typeof(i)=="string"){j=i;i=this.doc.getElementById(i);if(i&&i.id!==j){return this.doc.getElementsByName(j)[1]}}return i},getNext:function(j,i){return this._findSib(j,i,"nextSibling")},getPrev:function(j,i){return this._findSib(j,i,"previousSibling")},select:function(k,j){var i=this;return d.dom.Sizzle(k,i.get(j)||i.get(i.settings.root_element)||i.doc,[])},is:function(l,j){var k;if(l.length===undefined){if(j==="*"){return l.nodeType==1}if(b.test(j)){j=j.toLowerCase().split(/,/);l=l.nodeName.toLowerCase();for(k=j.length-1;k>=0;k--){if(j[k]==l){return true}}return false}}return d.dom.Sizzle.matches(j,l.nodeType?[l]:l).length>0},add:function(l,o,i,k,m){var j=this;return this.run(l,function(s){var r,q;r=c(o,"string")?j.doc.createElement(o):o;j.setAttribs(r,i);if(k){if(k.nodeType){r.appendChild(k)}else{j.setHTML(r,k)}}return !m?s.appendChild(r):r})},create:function(k,i,j){return this.add(this.doc.createElement(k),k,i,j,1)},createHTML:function(q,i,m){var p="",l=this,j;p+="<"+q;for(j in i){if(i.hasOwnProperty(j)){p+=" "+j+'="'+l.encode(i[j])+'"'}}if(typeof(m)!="undefined"){return p+">"+m+"</"+q+">"}return p+" />"},remove:function(i,j){return this.run(i,function(l){var k,m;k=l.parentNode;if(!k){return null}if(j){while(m=l.firstChild){if(!d.isIE||m.nodeType!==3||m.nodeValue){k.insertBefore(m,l)}else{l.removeChild(m)}}}return k.removeChild(l)})},setStyle:function(l,i,j){var k=this;return k.run(l,function(p){var o,m;o=p.style;i=i.replace(/-(\D)/g,function(r,q){return q.toUpperCase()});if(k.pixelStyles.test(i)&&(d.is(j,"number")||/^[\-0-9\.]+$/.test(j))){j+="px"}switch(i){case"opacity":if(a){o.filter=j===""?"":"alpha(opacity="+(j*100)+")";if(!l.currentStyle||!l.currentStyle.hasLayout){o.display="inline-block"}}o[i]=o["-moz-opacity"]=o["-khtml-opacity"]=j||"";break;case"float":a?o.styleFloat=j:o.cssFloat=j;break;default:o[i]=j||""}if(k.settings.update_styles){k.setAttrib(p,"data-mce-style")}})},getStyle:function(l,i,k){l=this.get(l);if(!l){return false}if(this.doc.defaultView&&k){i=i.replace(/[A-Z]/g,function(m){return"-"+m});try{return this.doc.defaultView.getComputedStyle(l,null).getPropertyValue(i)}catch(j){return null}}i=i.replace(/-(\D)/g,function(o,m){return m.toUpperCase()});if(i=="float"){i=a?"styleFloat":"cssFloat"}if(l.currentStyle&&k){return l.currentStyle[i]}return l.style[i]},setStyles:function(l,m){var j=this,k=j.settings,i;i=k.update_styles;k.update_styles=0;f(m,function(o,p){j.setStyle(l,p,o)});k.update_styles=i;if(k.update_styles){j.setAttrib(l,k.cssText)}},removeAllAttribs:function(i){return this.run(i,function(l){var j=l.attributes;for(var k=j.length-1;k>=0;k--){l.removeAttributeNode(j.item(k))}})},setAttrib:function(k,l,i){var j=this;if(!k||!l){return}if(j.settings.strict){l=l.toLowerCase()}return this.run(k,function(o){var m=j.settings;switch(l){case"style":if(!c(i,"string")){f(i,function(p,q){j.setStyle(o,q,p)});return}if(m.keep_values){if(i&&!j._isRes(i)){o.setAttribute("data-mce-style",i,2)}else{o.removeAttribute("data-mce-style",2)}}o.style.cssText=i;break;case"class":o.className=i||"";break;case"src":case"href":if(m.keep_values){if(m.url_converter){i=m.url_converter.call(m.url_converter_scope||j,i,l,o)}j.setAttrib(o,"data-mce-"+l,i,2)}break;case"shape":o.setAttribute("data-mce-style",i);break}if(c(i)&&i!==null&&i.length!==0){o.setAttribute(l,""+i,2)}else{o.removeAttribute(l,2)}})},setAttribs:function(j,k){var i=this;return this.run(j,function(l){f(k,function(m,o){i.setAttrib(l,o,m)})})},getAttrib:function(l,m,k){var i,j=this;l=j.get(l);if(!l||l.nodeType!==1){return false}if(!c(k)){k=""}if(/^(src|href|style|coords|shape)$/.test(m)){i=l.getAttribute("data-mce-"+m);if(i){return i}}if(a&&j.props[m]){i=l[j.props[m]];i=i&&i.nodeValue?i.nodeValue:i}if(!i){i=l.getAttribute(m,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(m)){if(l[j.props[m]]===true&&i===""){return m}return i?m:""}if(l.nodeName==="FORM"&&l.getAttributeNode(m)){return l.getAttributeNode(m).nodeValue}if(m==="style"){i=i||l.style.cssText;if(i){i=j.serializeStyle(j.parseStyle(i),l.nodeName);if(j.settings.keep_values&&!j._isRes(i)){l.setAttribute("data-mce-style",i)}}}if(e&&m==="class"&&i){i=i.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(a){switch(m){case"rowspan":case"colspan":if(i===1){i=""}break;case"size":if(i==="+0"||i===20||i===0){i=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(i===0){i=""}break;case"hspace":if(i===-1){i=""}break;case"maxlength":case"tabindex":if(i===32768||i===2147483647||i==="32768"){i=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(i===65535){return m}return k;case"shape":i=i.toLowerCase();break;default:if(m.indexOf("on")===0&&i){i=d._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+i)}}}return(i!==undefined&&i!==null&&i!=="")?""+i:k},getPos:function(q,l){var j=this,i=0,p=0,m,o=j.doc,k;q=j.get(q);l=l||o.body;if(q){if(a&&!j.stdMode){q=q.getBoundingClientRect();m=j.boxModel?o.documentElement:o.body;i=j.getStyle(j.select("html")[0],"borderWidth");i=(i=="medium"||j.boxModel&&!j.isIE6)&&2||i;return{x:q.left+m.scrollLeft-i,y:q.top+m.scrollTop-i}}k=q;while(k&&k!=l&&k.nodeType){i+=k.offsetLeft||0;p+=k.offsetTop||0;k=k.offsetParent}k=q.parentNode;while(k&&k!=l&&k.nodeType){i-=k.scrollLeft||0;p-=k.scrollTop||0;k=k.parentNode}}return{x:i,y:p}},parseStyle:function(i){return this.styles.parse(i)},serializeStyle:function(j,i){return this.styles.serialize(j,i)},loadCSS:function(i){var k=this,l=k.doc,j;if(!i){i=""}j=k.select("head")[0];f(i.split(","),function(m){var o;if(k.files[m]){return}k.files[m]=true;o=k.create("link",{rel:"stylesheet",href:d._addVer(m)});if(a&&l.documentMode&&l.recalc){o.onload=function(){if(l.recalc){l.recalc()}o.onload=null}}j.appendChild(o)})},addClass:function(i,j){return this.run(i,function(k){var l;if(!j){return 0}if(this.hasClass(k,j)){return k.className}l=this.removeClass(k,j);return k.className=(l!=""?(l+" "):"")+j})},removeClass:function(k,l){var i=this,j;return i.run(k,function(o){var m;if(i.hasClass(o,l)){if(!j){j=new RegExp("(^|\\s+)"+l+"(\\s+|$)","g")}m=o.className.replace(j," ");m=d.trim(m!=" "?m:"");o.className=m;if(!m){o.removeAttribute("class");o.removeAttribute("className")}return m}return o.className})},hasClass:function(j,i){j=this.get(j);if(!j||!i){return false}return(" "+j.className+" ").indexOf(" "+i+" ")!==-1},show:function(i){return this.setStyle(i,"display","block")},hide:function(i){return this.setStyle(i,"display","none")},isHidden:function(i){i=this.get(i);return !i||i.style.display=="none"||this.getStyle(i,"display")=="none"},uniqueId:function(i){return(!i?"mce_":i)+(this.counter++)},setHTML:function(k,j){var i=this;return i.run(k,function(m){if(a){while(m.firstChild){m.removeChild(m.firstChild)}try{m.innerHTML="<br />"+j;m.removeChild(m.firstChild)}catch(l){m=i.create("div");m.innerHTML="<br />"+j;f(m.childNodes,function(p,o){if(o){m.appendChild(p)}})}}else{m.innerHTML=j}return j})},getOuterHTML:function(k){var j,i=this;k=i.get(k);if(!k){return null}if(k.nodeType===1&&i.hasOuterHTML){return k.outerHTML}j=(k.ownerDocument||i.doc).createElement("body");j.appendChild(k.cloneNode(true));return j.innerHTML},setOuterHTML:function(l,j,m){var i=this;function k(p,o,r){var s,q;q=r.createElement("body");q.innerHTML=o;s=q.lastChild;while(s){i.insertAfter(s.cloneNode(true),p);s=s.previousSibling}i.remove(p)}return this.run(l,function(p){p=i.get(p);if(p.nodeType==1){m=m||p.ownerDocument||i.doc;if(a){try{if(a&&p.nodeType==1){p.outerHTML=j}else{k(p,j,m)}}catch(o){k(p,j,m)}}else{k(p,j,m)}}})},decode:h.decode,encode:h.encodeAllRaw,insertAfter:function(i,j){j=this.get(j);return this.run(i,function(l){var k,m;k=j.parentNode;m=j.nextSibling;if(m){k.insertBefore(l,m)}else{k.appendChild(l)}return l})},isBlock:function(j){var i=j.nodeType;if(i){return !!(i===1&&g[j.nodeName])}return !!g[j]},replace:function(m,l,i){var j=this;if(c(l,"array")){m=m.cloneNode(true)}return j.run(l,function(k){if(i){f(d.grep(k.childNodes),function(o){m.appendChild(o)})}return k.parentNode.replaceChild(m,k)})},rename:function(l,i){var k=this,j;if(l.nodeName!=i.toUpperCase()){j=k.create(i);f(k.getAttribs(l),function(m){k.setAttrib(j,m.nodeName,k.getAttrib(l,m.nodeName))});k.replace(j,l,1)}return j||l},findCommonAncestor:function(k,i){var l=k,j;while(l){j=i;while(j&&l!=j){j=j.parentNode}if(l==j){break}l=l.parentNode}if(!l&&k.ownerDocument){return k.ownerDocument.documentElement}return l},toHex:function(i){var k=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(i);function j(l){l=parseInt(l).toString(16);return l.length>1?l:"0"+l}if(k){i="#"+j(k[1])+j(k[2])+j(k[3]);return i}return i},getClasses:function(){var o=this,j=[],m,p={},q=o.settings.class_filter,l;if(o.classes){return o.classes}function r(i){f(i.imports,function(s){r(s)});f(i.cssRules||i.rules,function(s){switch(s.type||1){case 1:if(s.selectorText){f(s.selectorText.split(","),function(u){u=u.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(u)||!/\.[\w\-]+$/.test(u)){return}l=u;u=d._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",u);if(q&&!(u=q(u,l))){return}if(!p[u]){j.push({"class":u});p[u]=1}})}break;case 3:r(s.styleSheet);break}})}try{f(o.doc.styleSheets,r)}catch(k){}if(j.length>0){o.classes=j}return j},run:function(l,k,j){var i=this,m;if(i.doc&&typeof(l)==="string"){l=i.get(l)}if(!l){return false}j=j||this;if(!l.nodeType&&(l.length||l.length===0)){m=[];f(l,function(p,o){if(p){if(typeof(p)=="string"){p=i.doc.getElementById(p)}m.push(k.call(j,p,o))}});return m}return k.call(j,l)},getAttribs:function(j){var i;j=this.get(j);if(!j){return[]}if(a){i=[];if(j.nodeName=="OBJECT"){return j.attributes}if(j.nodeName==="OPTION"&&this.getAttrib(j,"selected")){i.push({specified:1,nodeName:"selected"})}j.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(k){i.push({specified:1,nodeName:k})});return i}return j.attributes},destroy:function(j){var i=this;if(i.events){i.events.destroy()}i.win=i.doc=i.root=i.events=null;if(!j){d.removeUnload(i.destroy)}},createRng:function(){var i=this.doc;return i.createRange?i.createRange():new d.dom.Range(this)},nodeIndex:function(o,p){var i=0,l,m,k,j;if(o){for(l=o.nodeType,o=o.previousSibling,m=o;o;o=o.previousSibling){k=o.nodeType;if(p&&k==3){j=false;try{j=o.nodeValue.length}catch(q){}if(k==l||!j){continue}}i++;l=k}}return i},split:function(m,l,q){var s=this,i=s.createRng(),o,k,p;function j(v){var u,r=v.childNodes;if(v.nodeType==1&&v.getAttribute("data-mce-type")=="bookmark"){return}for(u=r.length-1;u>=0;u--){j(r[u])}if(v.nodeType!=9){if(v.nodeType==3&&v.nodeValue.length>0){if(!s.isBlock(v.parentNode)||d.trim(v.nodeValue).length>0){return}}if(v.nodeType==1){r=v.childNodes;if(r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("data-mce-type")=="bookmark"){v.parentNode.insertBefore(r[0],v)}if(r.length||/^(br|hr|input|img)$/i.test(v.nodeName)){return}}s.remove(v)}return v}if(m&&l){i.setStart(m.parentNode,s.nodeIndex(m));i.setEnd(l.parentNode,s.nodeIndex(l));o=i.extractContents();i=s.createRng();i.setStart(l.parentNode,s.nodeIndex(l)+1);i.setEnd(m.parentNode,s.nodeIndex(m)+1);k=i.extractContents();p=m.parentNode;p.insertBefore(j(o),m);if(q){p.replaceChild(q,l)}else{p.insertBefore(l,m)}p.insertBefore(j(k),m);s.remove(m);return q||l}},bind:function(m,i,l,k){var j=this;if(!j.events){j.events=new d.dom.EventUtils()}return j.events.add(m,i,l,k||this)},unbind:function(l,i,k){var j=this;if(!j.events){j.events=new d.dom.EventUtils()}return j.events.remove(l,i,k)},_findSib:function(l,i,j){var k=this,m=i;if(l){if(c(m,"string")){m=function(o){return k.is(o,i)}}for(l=l[j];l;l=l[j]){if(m(l)){return l}}}return null},_isRes:function(i){return/^(top|left|bottom|right|width|height)/i.test(i)||/;\s*(top|left|bottom|right|width|height)/i.test(i)}});d.DOM=new d.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var O=this,e=c.doc,T=0,F=1,j=2,E=true,S=false,V="startOffset",h="startContainer",Q="endContainer",A="endOffset",k=tinymce.extend,o=c.nodeIndex;k(O,{startContainer:e,startOffset:0,endContainer:e,endOffset:0,collapsed:E,commonAncestorContainer:e,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:u,setStartBefore:g,setStartAfter:J,setEndBefore:K,setEndAfter:v,collapse:B,selectNode:y,selectNodeContents:G,compareBoundaryPoints:x,deleteContents:q,extractContents:I,cloneContents:d,insertNode:D,surroundContents:N,cloneRange:L});function r(X,W){C(E,X,W)}function u(X,W){C(S,X,W)}function g(W){r(W.parentNode,o(W))}function J(W){r(W.parentNode,o(W)+1)}function K(W){u(W.parentNode,o(W))}function v(W){u(W.parentNode,o(W)+1)}function B(W){if(W){O[Q]=O[h];O[A]=O[V]}else{O[h]=O[Q];O[V]=O[A]}O.collapsed=E}function y(W){g(W);v(W)}function G(W){r(W,0);u(W,W.nodeType===1?W.childNodes.length:W.nodeValue.length)}function x(aa,W){var ad=O[h],Y=O[V],ac=O[Q],X=O[A],ab=W.startContainer,af=W.startOffset,Z=W.endContainer,ae=W.endOffset;if(aa===0){return H(ad,Y,ab,af)}if(aa===1){return H(ac,X,ab,af)}if(aa===2){return H(ac,X,Z,ae)}if(aa===3){return H(ad,Y,Z,ae)}}function q(){m(j)}function I(){return m(T)}function d(){return m(F)}function D(aa){var X=this[h],W=this[V],Z,Y;if((X.nodeType===3||X.nodeType===4)&&X.nodeValue){if(!W){X.parentNode.insertBefore(aa,X)}else{if(W>=X.nodeValue.length){c.insertAfter(aa,X)}else{Z=X.splitText(W);X.parentNode.insertBefore(aa,Z)}}}else{if(X.childNodes.length>0){Y=X.childNodes[W]}if(Y){X.insertBefore(aa,Y)}else{X.appendChild(aa)}}}function N(X){var W=O.extractContents();O.insertNode(X);X.appendChild(W);O.selectNode(X)}function L(){return k(new b(c),{startContainer:O[h],startOffset:O[V],endContainer:O[Q],endOffset:O[A],collapsed:O.collapsed,commonAncestorContainer:O.commonAncestorContainer})}function P(W,X){var Y;if(W.nodeType==3){return W}if(X<0){return W}Y=W.firstChild;while(Y&&X>0){--X;Y=Y.nextSibling}if(Y){return Y}return W}function l(){return(O[h]==O[Q]&&O[V]==O[A])}function H(Z,ab,X,aa){var ac,Y,W,ad,af,ae;if(Z==X){if(ab==aa){return 0}if(ab<aa){return -1}return 1}ac=X;while(ac&&ac.parentNode!=Z){ac=ac.parentNode}if(ac){Y=0;W=Z.firstChild;while(W!=ac&&Y<ab){Y++;W=W.nextSibling}if(ab<=Y){return -1}return 1}ac=Z;while(ac&&ac.parentNode!=X){ac=ac.parentNode}if(ac){Y=0;W=X.firstChild;while(W!=ac&&Y<aa){Y++;W=W.nextSibling}if(Y<aa){return -1}return 1}ad=c.findCommonAncestor(Z,X);af=Z;while(af&&af.parentNode!=ad){af=af.parentNode}if(!af){af=ad}ae=X;while(ae&&ae.parentNode!=ad){ae=ae.parentNode}if(!ae){ae=ad}if(af==ae){return 0}W=ad.firstChild;while(W){if(W==af){return -1}if(W==ae){return 1}W=W.nextSibling}}function C(X,aa,Z){var W,Y;if(X){O[h]=aa;O[V]=Z}else{O[Q]=aa;O[A]=Z}W=O[Q];while(W.parentNode){W=W.parentNode}Y=O[h];while(Y.parentNode){Y=Y.parentNode}if(Y==W){if(H(O[h],O[V],O[Q],O[A])>0){O.collapse(X)}}else{O.collapse(X)}O.collapsed=l();O.commonAncestorContainer=c.findCommonAncestor(O[h],O[Q])}function m(ad){var ac,Z=0,af=0,X,ab,Y,aa,W,ae;if(O[h]==O[Q]){return f(ad)}for(ac=O[Q],X=ac.parentNode;X;ac=X,X=X.parentNode){if(X==O[h]){return s(ac,ad)}++Z}for(ac=O[h],X=ac.parentNode;X;ac=X,X=X.parentNode){if(X==O[Q]){return U(ac,ad)}++af}ab=af-Z;Y=O[h];while(ab>0){Y=Y.parentNode;ab--}aa=O[Q];while(ab<0){aa=aa.parentNode;ab++}for(W=Y.parentNode,ae=aa.parentNode;W!=ae;W=W.parentNode,ae=ae.parentNode){Y=W;aa=ae}return p(Y,aa,ad)}function f(ab){var ad,aa,Z,ac,W,Y,X;if(ab!=j){ad=e.createDocumentFragment()}if(O[V]==O[A]){return ad}if(O[h].nodeType==3){aa=O[h].nodeValue;Z=aa.substring(O[V],O[A]);if(ab!=F){O[h].deleteData(O[V],O[A]-O[V]);O.collapse(E)}if(ab==j){return}ad.appendChild(e.createTextNode(Z));return ad}ac=P(O[h],O[V]);W=O[A]-O[V];while(W>0){Y=ac.nextSibling;X=z(ac,ab);if(ad){ad.appendChild(X)}--W;ac=Y}if(ab!=F){O.collapse(E)}return ad}function s(ad,aa){var ac,ab,X,W,Z,Y;if(aa!=j){ac=e.createDocumentFragment()}ab=i(ad,aa);if(ac){ac.appendChild(ab)}X=o(ad);W=X-O[V];if(W<=0){if(aa!=F){O.setEndBefore(ad);O.collapse(S)}return ac}ab=ad.previousSibling;while(W>0){Z=ab.previousSibling;Y=z(ab,aa);if(ac){ac.insertBefore(Y,ac.firstChild)}--W;ab=Z}if(aa!=F){O.setEndBefore(ad);O.collapse(S)}return ac}function U(ab,aa){var ad,X,ac,W,Z,Y;if(aa!=j){ad=e.createDocumentFragment()}ac=R(ab,aa);if(ad){ad.appendChild(ac)}X=o(ab);++X;W=O[A]-X;ac=ab.nextSibling;while(W>0){Z=ac.nextSibling;Y=z(ac,aa);if(ad){ad.appendChild(Y)}--W;ac=Z}if(aa!=F){O.setStartAfter(ab);O.collapse(E)}return ad}function p(ab,W,ae){var Y,ag,aa,ac,ad,X,af,Z;if(ae!=j){ag=e.createDocumentFragment()}Y=R(ab,ae);if(ag){ag.appendChild(Y)}aa=ab.parentNode;ac=o(ab);ad=o(W);++ac;X=ad-ac;af=ab.nextSibling;while(X>0){Z=af.nextSibling;Y=z(af,ae);if(ag){ag.appendChild(Y)}af=Z;--X}Y=i(W,ae);if(ag){ag.appendChild(Y)}if(ae!=F){O.setStartAfter(ab);O.collapse(E)}return ag}function i(ac,ad){var Y=P(O[Q],O[A]-1),ae,ab,aa,W,X,Z=Y!=O[Q];if(Y==ac){return M(Y,Z,S,ad)}ae=Y.parentNode;ab=M(ae,S,S,ad);while(ae){while(Y){aa=Y.previousSibling;W=M(Y,Z,S,ad);if(ad!=j){ab.insertBefore(W,ab.firstChild)}Z=E;Y=aa}if(ae==ac){return ab}Y=ae.previousSibling;ae=ae.parentNode;X=M(ae,S,S,ad);if(ad!=j){X.appendChild(ab)}ab=X}}function R(ac,ad){var Z=P(O[h],O[V]),aa=Z!=O[h],ae,ab,Y,W,X;if(Z==ac){return M(Z,aa,E,ad)}ae=Z.parentNode;ab=M(ae,S,E,ad);while(ae){while(Z){Y=Z.nextSibling;W=M(Z,aa,E,ad);if(ad!=j){ab.appendChild(W)}aa=E;Z=Y}if(ae==ac){return ab}Z=ae.nextSibling;ae=ae.parentNode;X=M(ae,S,E,ad);if(ad!=j){X.appendChild(ab)}ab=X}}function M(W,aa,ad,ae){var Z,Y,ab,X,ac;if(aa){return z(W,ae)}if(W.nodeType==3){Z=W.nodeValue;if(ad){X=O[V];Y=Z.substring(X);ab=Z.substring(0,X)}else{X=O[A];Y=Z.substring(0,X);ab=Z.substring(X)}if(ae!=F){W.nodeValue=ab}if(ae==j){return}ac=W.cloneNode(S);ac.nodeValue=Y;return ac}if(ae==j){return}return W.cloneNode(S)}function z(X,W){if(W!=j){return W==F?X.cloneNode(E):X}X.parentNode.removeChild(X)}}a.Range=b})(tinymce.dom);(function(){function a(g){var i=this,j="\uFEFF",e,h,d=g.dom,c=true,f=false;function b(){var o=g.getRng(),k=d.createRng(),m,p;m=o.item?o.item(0):o.parentElement();if(m.ownerDocument!=d.doc){return k}p=g.isCollapsed();if(o.item||!m.hasChildNodes()){if(p){k.setStart(m,0);k.setEnd(m,0)}else{k.setStart(m.parentNode,d.nodeIndex(m));k.setEnd(k.startContainer,k.startOffset+1)}return k}function l(u){var x,r,v,q,C=0,z,A,B,s,y;s=o.duplicate();s.collapse(u);x=d.create("a");B=s.parentElement();if(!B.hasChildNodes()){k[u?"setStart":"setEnd"](B,0);return}B.appendChild(x);s.moveToElementText(x);y=o.compareEndPoints(u?"StartToStart":"EndToEnd",s);if(y>0){k[u?"setStartAfter":"setEndAfter"](B);d.remove(x);return}q=tinymce.grep(B.childNodes);z=q.length-1;while(C<=z){A=Math.floor((C+z)/2);B.insertBefore(x,q[A]);s.moveToElementText(x);y=o.compareEndPoints(u?"StartToStart":"EndToEnd",s);if(y>0){C=A+1}else{if(y<0){z=A-1}else{found=true;break}}}r=y>0||A==0?x.nextSibling:x.previousSibling;if(r.nodeType==1){d.remove(x);v=d.nodeIndex(r);r=r.parentNode;if(!u||A>0){v++}}else{if(y>0||A==0){s.setEndPoint(u?"StartToStart":"EndToEnd",o);v=s.text.length}else{s.setEndPoint(u?"StartToStart":"EndToEnd",o);v=r.nodeValue.length-s.text.length}d.remove(x)}k[u?"setStart":"setEnd"](r,v)}l(true);if(!p){l()}return k}this.addRange=function(k){var q,o,m,s,x,u,v=g.dom.doc,p=v.body;function l(D){var z,C,y,B,A;y=d.create("a");z=D?m:x;C=D?s:u;B=q.duplicate();if(z==v||z==v.documentElement){z=p;C=0}if(z.nodeType==3){z.parentNode.insertBefore(y,z);B.moveToElementText(y);B.moveStart("character",C);d.remove(y);q.setEndPoint(D?"StartToStart":"EndToEnd",B)}else{A=z.childNodes;if(A.length){if(C>=A.length){d.insertAfter(y,A[A.length-1])}else{z.insertBefore(y,A[C])}B.moveToElementText(y)}else{y=v.createTextNode(j);z.appendChild(y);B.moveToElementText(y.parentNode);B.collapse(c)}q.setEndPoint(D?"StartToStart":"EndToEnd",B);d.remove(y)}}this.destroy();m=k.startContainer;s=k.startOffset;x=k.endContainer;u=k.endOffset;q=p.createTextRange();if(m==x&&m.nodeType==1&&s==u-1){if(s==u-1){try{o=p.createControlRange();o.addElement(m.childNodes[s]);o.select();return}catch(r){}}}l(true);l();q.select()};this.getRangeAt=function(){if(!e||!tinymce.dom.RangeUtils.compareRanges(h,g.getRng())){e=b();h=g.getRng()}try{e.startContainer.nextSibling}catch(k){e=b();h=null}return e};this.destroy=function(){h=e=null}}tinymce.dom.TridentSelection=a})();(function(){var q=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,j=0,d=Object.prototype.toString,p=false,i=true;[0,0].sort(function(){i=false;return 0});var b=function(y,e,B,C){B=B||[];e=e||document;var E=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!y||typeof y!=="string"){return B}var z=[],u,G,J,s,x=true,v=b.isXML(e),D=y,F,I,H,A;do{q.exec("");u=q.exec(D);if(u){D=u[3];z.push(u[1]);if(u[2]){s=u[3];break}}}while(u);if(z.length>1&&k.exec(y)){if(z.length===2&&f.relative[z[0]]){G=h(z[0]+z[1],e)}else{G=f.relative[z[0]]?[e]:b(z.shift(),e);while(z.length){y=z.shift();if(f.relative[y]){y+=z.shift()}G=h(y,G)}}}else{if(!C&&z.length>1&&e.nodeType===9&&!v&&f.match.ID.test(z[0])&&!f.match.ID.test(z[z.length-1])){F=b.find(z.shift(),e,v);e=F.expr?b.filter(F.expr,F.set)[0]:F.set[0]}if(e){F=C?{expr:z.pop(),set:a(C)}:b.find(z.pop(),z.length===1&&(z[0]==="~"||z[0]==="+")&&e.parentNode?e.parentNode:e,v);G=F.expr?b.filter(F.expr,F.set):F.set;if(z.length>0){J=a(G)}else{x=false}while(z.length){I=z.pop();H=I;if(!f.relative[I]){I=""}else{H=z.pop()}if(H==null){H=e}f.relative[I](J,H,v)}}else{J=z=[]}}if(!J){J=G}if(!J){b.error(I||y)}if(d.call(J)==="[object Array]"){if(!x){B.push.apply(B,J)}else{if(e&&e.nodeType===1){for(A=0;J[A]!=null;A++){if(J[A]&&(J[A]===true||J[A].nodeType===1&&b.contains(e,J[A]))){B.push(G[A])}}}else{for(A=0;J[A]!=null;A++){if(J[A]&&J[A].nodeType===1){B.push(G[A])}}}}}else{a(J,B)}if(s){b(s,E,B,C);b.uniqueSort(B)}return B};b.uniqueSort=function(s){if(c){p=i;s.sort(c);if(p){for(var e=1;e<s.length;e++){if(s[e]===s[e-1]){s.splice(e--,1)}}}}return s};b.matches=function(e,s){return b(e,null,null,s)};b.find=function(A,e,B){var z;if(!A){return[]}for(var v=0,u=f.order.length;v<u;v++){var y=f.order[v],x;if((x=f.leftMatch[y].exec(A))){var s=x[1];x.splice(1,1);if(s.substr(s.length-1)!=="\\"){x[1]=(x[1]||"").replace(/\\/g,"");z=f.find[y](x,e,B);if(z!=null){A=A.replace(f.match[y],"");break}}}}if(!z){z=e.getElementsByTagName("*")}return{set:z,expr:A}};b.filter=function(E,D,H,x){var u=E,J=[],B=D,z,e,A=D&&D[0]&&b.isXML(D[0]);while(E&&D.length){for(var C in f.filter){if((z=f.leftMatch[C].exec(E))!=null&&z[2]){var s=f.filter[C],I,G,v=z[1];e=false;z.splice(1,1);if(v.substr(v.length-1)==="\\"){continue}if(B===J){J=[]}if(f.preFilter[C]){z=f.preFilter[C](z,B,H,J,x,A);if(!z){e=I=true}else{if(z===true){continue}}}if(z){for(var y=0;(G=B[y])!=null;y++){if(G){I=s(G,z,y,B);var F=x^!!I;if(H&&I!=null){if(F){e=true}else{B[y]=false}}else{if(F){J.push(G);e=true}}}}}if(I!==undefined){if(!H){B=J}E=E.replace(f.match[C],"");if(!e){return[]}break}}}if(E===u){if(e==null){b.error(E)}else{break}}u=E}return B};b.error=function(e){throw"Syntax error, unrecognized expression: "+e};var f=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(z,s){var v=typeof s==="string",y=v&&!/\W/.test(s),A=v&&!y;if(y){s=s.toLowerCase()}for(var u=0,e=z.length,x;u<e;u++){if((x=z[u])){while((x=x.previousSibling)&&x.nodeType!==1){}z[u]=A||x&&x.nodeName.toLowerCase()===s?x||false:x===s}}if(A){b.filter(s,z,true)}},">":function(z,s){var x=typeof s==="string",y,u=0,e=z.length;if(x&&!/\W/.test(s)){s=s.toLowerCase();for(;u<e;u++){y=z[u];if(y){var v=y.parentNode;z[u]=v.nodeName.toLowerCase()===s?v:false}}}else{for(;u<e;u++){y=z[u];if(y){z[u]=x?y.parentNode:y.parentNode===s}}if(x){b.filter(s,z,true)}}},"":function(v,s,y){var u=j++,e=r,x;if(typeof s==="string"&&!/\W/.test(s)){s=s.toLowerCase();x=s;e=o}e("parentNode",s,u,v,x,y)},"~":function(v,s,y){var u=j++,e=r,x;if(typeof s==="string"&&!/\W/.test(s)){s=s.toLowerCase();x=s;e=o}e("previousSibling",s,u,v,x,y)}},find:{ID:function(s,u,v){if(typeof u.getElementById!=="undefined"&&!v){var e=u.getElementById(s[1]);return e?[e]:[]}},NAME:function(u,y){if(typeof y.getElementsByName!=="undefined"){var s=[],x=y.getElementsByName(u[1]);for(var v=0,e=x.length;v<e;v++){if(x[v].getAttribute("name")===u[1]){s.push(x[v])}}return s.length===0?null:s}},TAG:function(e,s){return s.getElementsByTagName(e[1])}},preFilter:{CLASS:function(v,s,u,e,z,A){v=" "+v[1].replace(/\\/g,"")+" ";if(A){return v}for(var x=0,y;(y=s[x])!=null;x++){if(y){if(z^(y.className&&(" "+y.className+" ").replace(/[\t\n]/g," ").indexOf(v)>=0)){if(!u){e.push(y)}}else{if(u){s[x]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(s,e){return s[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var s=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(s[1]+(s[2]||1))-0;e[3]=s[3]-0}e[0]=j++;return e},ATTR:function(x,s,u,e,y,z){var v=x[1].replace(/\\/g,"");if(!z&&f.attrMap[v]){x[1]=f.attrMap[v]}if(x[2]==="~="){x[4]=" "+x[4]+" "}return x},PSEUDO:function(x,s,u,e,y){if(x[1]==="not"){if((q.exec(x[3])||"").length>1||/^\w/.test(x[3])){x[3]=b(x[3],null,null,s)}else{var v=b.filter(x[3],s,u,true^y);if(!u){e.push.apply(e,v)}return false}}else{if(f.match.POS.test(x[0])||f.match.CHILD.test(x[0])){return true}}return x},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(u,s,e){return !!b(e[3],u).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(s,e){return e===0},last:function(u,s,e,v){return s===v.length-1},even:function(s,e){return e%2===0},odd:function(s,e){return e%2===1},lt:function(u,s,e){return s<e[3]-0},gt:function(u,s,e){return s>e[3]-0},nth:function(u,s,e){return e[3]-0===s},eq:function(u,s,e){return e[3]-0===s}},filter:{PSEUDO:function(u,A,z,B){var e=A[1],s=f.filters[e];if(s){return s(u,z,A,B)}else{if(e==="contains"){return(u.textContent||u.innerText||b.getText([u])||"").indexOf(A[3])>=0}else{if(e==="not"){var v=A[3];for(var y=0,x=v.length;y<x;y++){if(v[y]===u){return false}}return true}else{b.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,v){var z=v[1],s=e;switch(z){case"only":case"first":while((s=s.previousSibling)){if(s.nodeType===1){return false}}if(z==="first"){return true}s=e;case"last":while((s=s.nextSibling)){if(s.nodeType===1){return false}}return true;case"nth":var u=v[2],C=v[3];if(u===1&&C===0){return true}var y=v[0],B=e.parentNode;if(B&&(B.sizcache!==y||!e.nodeIndex)){var x=0;for(s=B.firstChild;s;s=s.nextSibling){if(s.nodeType===1){s.nodeIndex=++x}}B.sizcache=y}var A=e.nodeIndex-C;if(u===0){return A===0}else{return(A%u===0&&A/u>=0)}}},ID:function(s,e){return s.nodeType===1&&s.getAttribute("id")===e},TAG:function(s,e){return(e==="*"&&s.nodeType===1)||s.nodeName.toLowerCase()===e},CLASS:function(s,e){return(" "+(s.className||s.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(y,v){var u=v[1],e=f.attrHandle[u]?f.attrHandle[u](y):y[u]!=null?y[u]:y.getAttribute(u),z=e+"",x=v[2],s=v[4];return e==null?x==="!=":x==="="?z===s:x==="*="?z.indexOf(s)>=0:x==="~="?(" "+z+" ").indexOf(s)>=0:!s?z&&e!==false:x==="!="?z!==s:x==="^="?z.indexOf(s)===0:x==="$="?z.substr(z.length-s.length)===s:x==="|="?z===s||z.substr(0,s.length+1)===s+"-":false},POS:function(x,s,u,y){var e=s[2],v=f.setFilters[e];if(v){return v(x,u,s,y)}}}};var k=f.match.POS,g=function(s,e){return"\\"+(e-0+1)};for(var m in f.match){f.match[m]=new RegExp(f.match[m].source+(/(?![^\[]*\])(?![^\(]*\))/.source));f.leftMatch[m]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[m].source.replace(/\\(\d+)/g,g))}var a=function(s,e){s=Array.prototype.slice.call(s,0);if(e){e.push.apply(e,s);return e}return s};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(l){a=function(x,v){var s=v||[],u=0;if(d.call(x)==="[object Array]"){Array.prototype.push.apply(s,x)}else{if(typeof x.length==="number"){for(var e=x.length;u<e;u++){s.push(x[u])}}else{for(;x[u];u++){s.push(x[u])}}}return s}}var c;if(document.documentElement.compareDocumentPosition){c=function(s,e){if(!s.compareDocumentPosition||!e.compareDocumentPosition){if(s==e){p=true}return s.compareDocumentPosition?-1:1}var u=s.compareDocumentPosition(e)&4?-1:s===e?0:1;if(u===0){p=true}return u}}else{if("sourceIndex" in document.documentElement){c=function(s,e){if(!s.sourceIndex||!e.sourceIndex){if(s==e){p=true}return s.sourceIndex?-1:1}var u=s.sourceIndex-e.sourceIndex;if(u===0){p=true}return u}}else{if(document.createRange){c=function(v,s){if(!v.ownerDocument||!s.ownerDocument){if(v==s){p=true}return v.ownerDocument?-1:1}var u=v.ownerDocument.createRange(),e=s.ownerDocument.createRange();u.setStart(v,0);u.setEnd(v,0);e.setStart(s,0);e.setEnd(s,0);var x=u.compareBoundaryPoints(Range.START_TO_END,e);if(x===0){p=true}return x}}}}b.getText=function(e){var s="",v;for(var u=0;e[u];u++){v=e[u];if(v.nodeType===3||v.nodeType===4){s+=v.nodeValue}else{if(v.nodeType!==8){s+=b.getText(v.childNodes)}}}return s};(function(){var s=document.createElement("div"),u="script"+(new Date()).getTime();s.innerHTML="<a name='"+u+"'/>";var e=document.documentElement;e.insertBefore(s,e.firstChild);if(document.getElementById(u)){f.find.ID=function(x,y,z){if(typeof y.getElementById!=="undefined"&&!z){var v=y.getElementById(x[1]);return v?v.id===x[1]||typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id").nodeValue===x[1]?[v]:undefined:[]}};f.filter.ID=function(y,v){var x=typeof y.getAttributeNode!=="undefined"&&y.getAttributeNode("id");return y.nodeType===1&&x&&x.nodeValue===v}}e.removeChild(s);e=s=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){f.find.TAG=function(s,y){var x=y.getElementsByTagName(s[1]);if(s[1]==="*"){var v=[];for(var u=0;x[u];u++){if(x[u].nodeType===1){v.push(x[u])}}x=v}return x}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){f.attrHandle.href=function(s){return s.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=b,u=document.createElement("div");u.innerHTML="<p class='TEST'></p>";if(u.querySelectorAll&&u.querySelectorAll(".TEST").length===0){return}b=function(z,y,v,x){y=y||document;if(!x&&y.nodeType===9&&!b.isXML(y)){try{return a(y.querySelectorAll(z),v)}catch(A){}}return e(z,y,v,x)};for(var s in e){b[s]=e[s]}u=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}f.order.splice(1,0,"CLASS");f.find.CLASS=function(s,u,v){if(typeof u.getElementsByClassName!=="undefined"&&!v){return u.getElementsByClassName(s[1])}};e=null})();function o(s,z,y,C,A,B){for(var v=0,u=C.length;v<u;v++){var e=C[v];if(e){e=e[s];var x=false;while(e){if(e.sizcache===y){x=C[e.sizset];break}if(e.nodeType===1&&!B){e.sizcache=y;e.sizset=v}if(e.nodeName.toLowerCase()===z){x=e;break}e=e[s]}C[v]=x}}}function r(s,z,y,C,A,B){for(var v=0,u=C.length;v<u;v++){var e=C[v];if(e){e=e[s];var x=false;while(e){if(e.sizcache===y){x=C[e.sizset];break}if(e.nodeType===1){if(!B){e.sizcache=y;e.sizset=v}if(typeof z!=="string"){if(e===z){x=true;break}}else{if(b.filter(z,[e]).length>0){x=e;break}}}e=e[s]}C[v]=x}}}b.contains=document.compareDocumentPosition?function(s,e){return !!(s.compareDocumentPosition(e)&16)}:function(s,e){return s!==e&&(s.contains?s.contains(e):true)};b.isXML=function(e){var s=(e?e.ownerDocument||e:0).documentElement;return s?s.nodeName!=="HTML":false};var h=function(e,A){var v=[],x="",y,u=A.nodeType?[A]:A;while((y=f.match.PSEUDO.exec(e))){x+=y[0];e=e.replace(f.match.PSEUDO,"")}e=f.relative[e]?e+"*":e;for(var z=0,s=u.length;z<s;z++){b(e,u[z],v)}return b.filter(x,v)};window.tinymce.dom.Sizzle=b})();(function(d){var f=d.each,c=d.DOM,b=d.isIE,e=d.isWebKit,a;d.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(m,p,l,j){var g,h=this,i=h.events,k;if(p instanceof Array){k=[];f(p,function(o){k.push(h.add(m,o,l,j))});return k}if(m&&m.hasOwnProperty&&m instanceof Array){k=[];f(m,function(q){q=c.get(q);k.push(h.add(q,p,l,j))});return k}m=c.get(m);if(!m){return}g=function(o){if(h.disabled){return}o=o||window.event;if(o&&b){if(!o.target){o.target=o.srcElement}d.extend(o,h._stoppers)}if(!j){return l(o)}return l.call(j,o)};if(p=="unload"){d.unloads.unshift({func:g});return g}if(p=="init"){if(h.domLoaded){g()}else{h.inits.push(g)}return g}i.push({obj:m,name:p,func:l,cfunc:g,scope:j});h._add(m,p,g);return l},remove:function(l,m,k){var h=this,g=h.events,i=false,j;if(l&&l.hasOwnProperty&&l instanceof Array){j=[];f(l,function(p){p=c.get(p);j.push(h.remove(p,m,k))});return j}l=c.get(l);f(g,function(p,o){if(p.obj==l&&p.name==m&&(!k||(p.func==k||p.cfunc==k))){g.splice(o,1);h._remove(l,m,p.cfunc);i=true;return false}});return i},clear:function(l){var j=this,g=j.events,h,k;if(l){l=c.get(l);for(h=g.length-1;h>=0;h--){k=g[h];if(k.obj===l){j._remove(k.obj,k.name,k.cfunc);k.obj=k.cfunc=null;g.splice(h,1)}}}},cancel:function(g){if(!g){return false}this.stop(g);return this.prevent(g)},stop:function(g){if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}return false},prevent:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false},destroy:function(){var g=this;f(g.events,function(j,h){g._remove(j.obj,j.name,j.cfunc);j.obj=j.cfunc=null});g.events=[];g=null},_add:function(h,i,g){if(h.attachEvent){h.attachEvent("on"+i,g)}else{if(h.addEventListener){h.addEventListener(i,g,false)}else{h["on"+i]=g}}},_remove:function(i,j,h){if(i){try{if(i.detachEvent){i.detachEvent("on"+j,h)}else{if(i.removeEventListener){i.removeEventListener(j,h,false)}else{i["on"+j]=null}}}catch(g){}}},_pageInit:function(h){var g=this;if(g.domLoaded){return}g.domLoaded=true;f(g.inits,function(i){i()});g.inits=[]},_wait:function(i){var g=this,h=i.document;if(i.tinyMCE_GZ&&tinyMCE_GZ.loaded){g.domLoaded=1;return}if(h.attachEvent){h.attachEvent("onreadystatechange",function(){if(h.readyState==="complete"){h.detachEvent("onreadystatechange",arguments.callee);g._pageInit(i)}});if(h.documentElement.doScroll&&i==i.top){(function(){if(g.domLoaded){return}try{h.documentElement.doScroll("left")}catch(j){setTimeout(arguments.callee,0);return}g._pageInit(i)})()}}else{if(h.addEventListener){g._add(i,"DOMContentLoaded",function(){g._pageInit(i)})}}g._add(i,"load",function(){g._pageInit(i)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});a=d.dom.Event=new d.dom.EventUtils();a._wait(window);d.addUnload(function(){a.destroy()})})(tinymce);(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(c){function e(f){return f.replace(/[\n\r]+/g,"")}var b=c.is,a=c.isIE,d=c.each;c.create("tinymce.dom.Selection",{Selection:function(i,h,g){var f=this;f.dom=i;f.win=h;f.serializer=g;d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(j){f[j]=new c.util.Dispatcher(f)});if(!f.win.getSelection){f.tridentSel=new c.dom.TridentSelection(f)}if(c.isIE&&i.boxModel){this._fixIESelection()}c.addUnload(f.destroy,f)},getContent:function(g){var f=this,h=f.getRng(),l=f.dom.create("body"),j=f.getSel(),i,k,m;g=g||{};i=k="";g.get=true;g.format=g.format||"html";f.onBeforeGetContent.dispatch(f,g);if(g.format=="text"){return f.isCollapsed()?"":(h.text||(j.toString?j.toString():""))}if(h.cloneContents){m=h.cloneContents();if(m){l.appendChild(m)}}else{if(b(h.item)||b(h.htmlText)){l.innerHTML=h.item?h.item(0).outerHTML:h.htmlText}else{l.innerHTML=h.toString()}}if(/^\s/.test(l.innerHTML)){i=" "}if(/\s+$/.test(l.innerHTML)){k=" "}g.getInner=true;g.content=f.isCollapsed()?"":i+f.serializer.serialize(l,g)+k;f.onGetContent.dispatch(f,g);return g.content},setContent:function(k,j){var h=this,f=h.getRng(),i,l=h.win.document,m,g;j=j||{format:"html"};j.set=true;k=j.content=k;if(!j.no_events){h.onBeforeSetContent.dispatch(h,j)}k=j.content;if(f.insertNode){k+='<span id="__caret">_</span>';if(f.startContainer==l&&f.endContainer==l){l.body.innerHTML=k}else{f.deleteContents();if(l.body.childNodes.length==0){l.body.innerHTML=k}else{if(f.createContextualFragment){f.insertNode(f.createContextualFragment(k))}else{m=l.createDocumentFragment();g=l.createElement("div");m.appendChild(g);g.outerHTML=k;f.insertNode(m)}}}i=h.dom.get("__caret");f=l.createRange();f.setStartBefore(i);f.setEndBefore(i);h.setRng(f);h.dom.remove("__caret");h.setRng(f)}else{if(f.item){l.execCommand("Delete",false,null);f=h.getRng()}f.pasteHTML(k)}if(!j.no_events){h.onSetContent.dispatch(h,j)}},getStart:function(){var g=this.getRng(),h,f,j,i;if(g.duplicate||g.item){if(g.item){return g.item(0)}j=g.duplicate();j.collapse(1);h=j.parentElement();f=i=g.parentElement();while(i=i.parentNode){if(i==h){h=f;break}}return h}else{h=g.startContainer;if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[Math.min(h.childNodes.length-1,g.startOffset)]}if(h&&h.nodeType==3){return h.parentNode}return h}},getEnd:function(){var g=this,h=g.getRng(),i,f;if(h.duplicate||h.item){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(0);i=h.parentElement();if(i&&i.nodeName=="BODY"){return i.lastChild||i}return i}else{i=h.endContainer;f=h.endOffset;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[f>0?f-1:f]}if(i&&i.nodeType==3){return i.parentNode}return i}},getBookmark:function(s,u){var x=this,m=x.dom,g,j,i,o,h,p,q,l="\uFEFF",v;function f(z,A){var y=0;d(m.select(z),function(C,B){if(C==A){y=B}});return y}if(s==2){function k(){var z=x.getRng(true),y=m.getRoot(),A={};function B(E,J){var D=E[J?"startContainer":"endContainer"],I=E[J?"startOffset":"endOffset"],C=[],F,H,G=0;if(D.nodeType==3){if(u){for(F=D.previousSibling;F&&F.nodeType==3;F=F.previousSibling){I+=F.nodeValue.length}}C.push(I)}else{H=D.childNodes;if(I>=H.length&&H.length){G=1;I=Math.max(0,H.length-1)}C.push(x.dom.nodeIndex(H[I],u)+G)}for(;D&&D!=y;D=D.parentNode){C.push(x.dom.nodeIndex(D,u))}return C}A.start=B(z,true);if(!x.isCollapsed()){A.end=B(z)}return A}return k()}if(s){return{rng:x.getRng()}}g=x.getRng();i=m.uniqueId();o=tinyMCE.activeEditor.selection.isCollapsed();v="overflow:hidden;line-height:0px";if(g.duplicate||g.item){if(!g.item){j=g.duplicate();try{g.collapse();g.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_start" style="'+v+'">'+l+"</span>");if(!o){j.collapse(false);g.moveToElementText(j.parentElement());if(g.compareEndPoints("StartToEnd",j)==0){j.move("character",-1)}j.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_end" style="'+v+'">'+l+"</span>")}}catch(r){return null}}else{p=g.item(0);h=p.nodeName;return{name:h,index:f(h,p)}}}else{p=x.getNode();h=p.nodeName;if(h=="IMG"){return{name:h,index:f(h,p)}}j=g.cloneRange();if(!o){j.collapse(false);j.insertNode(m.create("span",{"data-mce-type":"bookmark",id:i+"_end",style:v},l))}g.collapse(true);g.insertNode(m.create("span",{"data-mce-type":"bookmark",id:i+"_start",style:v},l))}x.moveToBookmark({id:i,keep:1});return{id:i}},moveToBookmark:function(o){var s=this,l=s.dom,i,h,f,r,j,u,p,q;if(s.tridentSel){s.tridentSel.destroy()}if(o){if(o.start){f=l.createRng();r=l.getRoot();function g(B){var v=o[B?"start":"end"],y,z,A,x;if(v){A=v[0];for(z=r,y=v.length-1;y>=1;y--){x=z.childNodes;if(v[y]>x.length-1){return}z=x[v[y]]}if(z.nodeType===3){A=Math.min(v[0],z.nodeValue.length)}if(z.nodeType===1){A=Math.min(v[0],z.childNodes.length)}if(B){f.setStart(z,A)}else{f.setEnd(z,A)}}return true}if(g(true)&&g()){s.setRng(f)}}else{if(o.id){function k(C){var x=l.get(o.id+"_"+C),B,v,z,A,y=o.keep;if(x){B=x.parentNode;if(C=="start"){if(!y){v=l.nodeIndex(x)}else{B=x.firstChild;v=1}j=u=B;p=q=v}else{if(!y){v=l.nodeIndex(x)}else{B=x.firstChild;v=1}u=B;q=v}if(!y){A=x.previousSibling;z=x.nextSibling;d(c.grep(x.childNodes),function(D){if(D.nodeType==3){D.nodeValue=D.nodeValue.replace(/\uFEFF/g,"")}});while(x=l.get(o.id+"_"+C)){l.remove(x,1)}if(A&&z&&A.nodeType==z.nodeType&&A.nodeType==3&&!c.isOpera){v=A.nodeValue.length;A.appendData(z.nodeValue);l.remove(z);if(C=="start"){j=u=A;p=q=v}else{u=A;q=v}}}}}function m(v){if(l.isBlock(v)&&!v.innerHTML){v.innerHTML=!a?'<br data-mce-bogus="1" />':" "}return v}k("start");k("end");if(j){f=l.createRng();f.setStart(m(j),p);f.setEnd(m(u),q);s.setRng(f)}}else{if(o.name){s.select(l.select(o.name)[o.index])}else{if(o.rng){s.setRng(o.rng)}}}}}},select:function(k,j){var i=this,l=i.dom,g=l.createRng(),f;if(k){f=l.nodeIndex(k);g.setStart(k.parentNode,f);g.setEnd(k.parentNode,f+1);if(j){function h(m,p){var o=new c.dom.TreeWalker(m,m);do{if(m.nodeType==3&&c.trim(m.nodeValue).length!=0){if(p){g.setStart(m,0)}else{g.setEnd(m,m.nodeValue.length)}return}if(m.nodeName=="BR"){if(p){g.setStartBefore(m)}else{g.setEndBefore(m)}return}}while(m=(p?o.next():o.prev()))}h(k,1);h(k)}i.setRng(g)}return k},isCollapsed:function(){var f=this,h=f.getRng(),g=f.getSel();if(!h||h.item){return false}if(h.compareEndPoints){return h.compareEndPoints("StartToEnd",h)===0}return !g||h.collapsed},collapse:function(f){var h=this,g=h.getRng(),i;if(g.item){i=g.item(0);g=h.win.document.body.createTextRange();g.moveToElementText(i)}g.collapse(!!f);h.setRng(g)},getSel:function(){var g=this,f=this.win;return f.getSelection?f.getSelection():f.document.selection},getRng:function(l){var g=this,h,i,k,j=g.win.document;if(l&&g.tridentSel){return g.tridentSel.getRangeAt(0)}try{if(h=g.getSel()){i=h.rangeCount>0?h.getRangeAt(0):(h.createRange?h.createRange():j.createRange())}}catch(f){}if(c.isIE&&i&&i.setStart&&j.selection.createRange().item){k=j.selection.createRange().item(0);i=j.createRange();i.setStartBefore(k);i.setEndAfter(k)}if(!i){i=j.createRange?j.createRange():j.body.createTextRange()}if(g.selectedRange&&g.explicitRange){if(i.compareBoundaryPoints(i.START_TO_START,g.selectedRange)===0&&i.compareBoundaryPoints(i.END_TO_END,g.selectedRange)===0){i=g.explicitRange}else{g.selectedRange=null;g.explicitRange=null}}return i},setRng:function(i){var h,g=this;if(!g.tridentSel){h=g.getSel();if(h){g.explicitRange=i;h.removeAllRanges();h.addRange(i);g.selectedRange=h.getRangeAt(0)}}else{if(i.cloneRange){g.tridentSel.addRange(i);return}try{i.select()}catch(f){}}},setNode:function(g){var f=this;f.setContent(f.dom.getOuterHTML(g));return g},getNode:function(){var h=this,g=h.getRng(),i=h.getSel(),l,k=g.startContainer,f=g.endContainer;if(!g){return h.dom.getRoot()}if(g.setStart){l=g.commonAncestorContainer;if(!g.collapsed){if(g.startContainer==g.endContainer){if(g.endOffset-g.startOffset<2){if(g.startContainer.hasChildNodes()){l=g.startContainer.childNodes[g.startOffset]}}}if(k.nodeType===3&&f.nodeType===3){function j(p,m){var o=p;while(p&&p.nodeType===3&&p.length===0){p=m?p.nextSibling:p.previousSibling}return p||o}if(k.length===g.startOffset){k=j(k.nextSibling,true)}else{k=k.parentNode}if(g.endOffset===0){f=j(f.previousSibling,false)}else{f=f.parentNode}if(k&&k===f){return k}}}if(l&&l.nodeType==3){return l.parentNode}return l}return g.item?g.item(0):g.parentElement()},getSelectedBlocks:function(g,f){var i=this,j=i.dom,m,h,l,k=[];m=j.getParent(g||i.getStart(),j.isBlock);h=j.getParent(f||i.getEnd(),j.isBlock);if(m){k.push(m)}if(m&&h&&m!=h){l=m;while((l=l.nextSibling)&&l!=h){if(j.isBlock(l)){k.push(l)}}}if(h&&m!=h){k.push(h)}return k},destroy:function(g){var f=this;f.win=null;if(f.tridentSel){f.tridentSel.destroy()}if(!g){c.removeUnload(f.destroy)}},_fixIESelection:function(){var g=this.dom,m=g.doc,h=m.body,j,o,f;m.documentElement.unselectable=true;function i(p,s){var q=h.createTextRange();try{q.moveToPoint(p,s)}catch(r){q=null}return q}function l(q){var p;if(q.button){p=i(q.x,q.y);if(p){if(p.compareEndPoints("StartToStart",o)>0){p.setEndPoint("StartToStart",o)}else{p.setEndPoint("EndToEnd",o)}p.select()}}else{k()}}function k(){var p=m.selection.createRange();if(o&&!p.item&&p.compareEndPoints("StartToEnd",p)===0){o.select()}g.unbind(m,"mouseup",k);g.unbind(m,"mousemove",l);o=j=0}g.bind(m,["mousedown","contextmenu"],function(p){if(p.target.nodeName==="HTML"){if(j){k()}f=m.documentElement;if(f.scrollHeight>f.clientHeight){return}j=1;o=i(p.x,p.y);if(o){g.bind(m,"mouseup",k);g.bind(m,"mousemove",l);g.win.focus();o.select()}}})}})})(tinymce);(function(a){a.dom.Serializer=function(e,i,f){var h,b,d=a.isIE,g=a.each,c;if(!e.apply_source_formatting){e.indent=false}e.remove_trailing_brs=true;i=i||a.DOM;f=f||new a.html.Schema(e);e.entity_encoding=e.entity_encoding||"named";h=new a.util.Dispatcher(self);b=new a.util.Dispatcher(self);c=new a.html.DomParser(e,f);c.addAttributeFilter("src,href,style",function(k,j){var p=k.length,l,r,o="data-mce-"+j,q=e.url_converter,s=e.url_converter_scope,m;while(p--){l=k[p];r=l.attributes.map[o];if(r!==m){l.attr(j,r.length>0?r:null);l.attr(o,null)}else{r=l.attributes.map[j];if(j==="style"){r=i.serializeStyle(i.parseStyle(r),l.name)}else{if(q){r=q.call(s,r,j,l.name)}}l.attr(j,r.length>0?r:null)}}});c.addAttributeFilter("class",function(j,k){var l=j.length,m,o;while(l--){m=j[l];o=m.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");m.attr("class",o.length>0?o:null)}});c.addAttributeFilter("data-mce-type",function(j,l,k){var m=j.length,o;while(m--){o=j[m];if(o.attributes.map["data-mce-type"]==="bookmark"&&!k.cleanup){o.remove()}}});c.addNodeFilter("script,style",function(k,l){var m=k.length,o,p;function j(q){return q.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}while(m--){o=k[m];p=o.firstChild?o.firstChild.value:"";if(l==="script"){o.attr("type",(o.attr("type")||"text/javascript").replace(/^mce\-/,""));if(p.length>0){o.firstChild.value="// <![CDATA[\n"+j(p)+"\n// ]]>"}}else{if(p.length>0){o.firstChild.value="<!--\n"+j(p)+"\n-->"}}}});c.addNodeFilter("#comment",function(j,k){var l=j.length,m;while(l--){m=j[l];if(m.value.indexOf("[CDATA[")===0){m.name="#cdata";m.type=4;m.value=m.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(m.value.indexOf("mce:protected ")===0){m.name="#text";m.type=3;m.raw=true;m.value=unescape(m.value).substr(14)}}}});c.addNodeFilter("xml:namespace,input",function(j,k){var l=j.length,m;while(l--){m=j[l];if(m.type===7){m.remove()}else{if(m.type===1){if(k==="input"&&!("type" in m.attributes.map)){m.attr("type","text")}}}}});if(e.fix_list_elements){c.addNodeFilter("ul,ol",function(k,l){var m=k.length,o,j;while(m--){o=k[m];j=o.parent;if(j.name==="ul"||j.name==="ol"){if(o.prev&&o.prev.name==="li"){o.prev.append(o)}}}})}c.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(j,k){var l=j.length;while(l--){j[l].attr(k,null)}});return{schema:f,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,onPreProcess:h,onPostProcess:b,serialize:function(p,m){var l,q,k,j,o;if(d&&i.select("script,style,select").length>0){o=p.innerHTML;p=p.cloneNode(false);i.setHTML(p,o)}else{p=p.cloneNode(true)}l=p.ownerDocument.implementation;if(l.createHTMLDocument){q=l.createHTMLDocument("");g(p.nodeName=="BODY"?p.childNodes:[p],function(r){q.body.appendChild(q.importNode(r,true))});if(p.nodeName!="BODY"){p=q.body.firstChild}else{p=q.body}k=i.doc;i.doc=q}m=m||{};m.format=m.format||"html";if(!m.no_events){m.node=p;h.dispatch(self,m)}j=new a.html.Serializer(e,f);m.content=j.serialize(c.parse(m.getInner?p.innerHTML:a.trim(i.getOuterHTML(p),m),m));if(!m.no_events){b.dispatch(self,m)}if(k){i.doc=k}m.node=null;return m.content},addRules:function(j){f.addValidElements(j)},setRules:function(j){f.setValidElements(j)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(h){var c=0,k=1,i=2,l={},j=[],f={},d=[],g=0,e;function b(m,x){var y=this,r=a.DOM,u,p,s,o;function q(){r.remove(o);if(u){u.onreadystatechange=u.onload=u=null}x()}function v(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+m)}}o=r.uniqueId();if(a.isIE6){p=new a.util.URI(m);s=location;if(p.host==s.hostname&&p.port==s.port&&(p.protocol+":")==s.protocol&&p.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(p.getURI()),success:function(A){var z=r.create("script",{type:"text/javascript"});z.text=A;document.getElementsByTagName("head")[0].appendChild(z);r.remove(z);q()},error:v});return}}u=r.create("script",{id:o,type:"text/javascript",src:a._addVer(m)});if(!a.isIE){u.onload=q}u.onerror=v;if(!a.isOpera){u.onreadystatechange=function(){var z=u.readyState;if(z=="complete"||z=="loaded"){q()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(u)}this.isDone=function(m){return l[m]==i};this.markDone=function(m){l[m]=i};this.add=this.load=function(m,r,o){var p,q=l[m];if(q==e){j.push(m);l[m]=c}if(r){if(!f[m]){f[m]=[]}f[m].push({func:r,scope:o||this})}};this.loadQueue=function(o,m){this.loadScripts(j,o,m)};this.loadScripts=function(m,r,q){var p;function o(s){a.each(f[s],function(u){u.func.call(u.scope)});f[s]=e}d.push({func:r,scope:q||this});p=function(){var s=a.grep(m);m.length=0;a.each(s,function(u){if(l[u]==i){o(u);return}if(l[u]!=k){l[u]=k;g++;b(u,function(){l[u]=i;g--;o(u);p()})}});if(!g){a.each(d,function(u){u.func.call(u.scope)});d.length=0}};p()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);tinymce.dom.TreeWalker=function(a,c){var b=a;function d(i,f,e,j){var h,g;if(i){if(!j&&i[f]){return i[f]}if(i!=c){h=i[e];if(h){return h}for(g=i.parentNode;g&&g!=c;g=g.parentNode){h=g[e];if(h){return h}}}}}this.current=function(){return b};this.next=function(e){return(b=d(b,"firstChild","nextSibling",e))};this.prev=function(e){return(b=d(b,"lastChild","previousSibling",e))}};(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(d,s){var h=d.startContainer,k=d.startOffset,u=d.endContainer,l=d.endOffset,i,f,o,g,r,q,e;e=c.select("td.mceSelected,th.mceSelected");if(e.length>0){a.each(e,function(v){s([v])});return}function p(y,x,v){var z=[];for(;y&&y!=v;y=y[x]){z.push(y)}return z}function m(x,v){do{if(x.parentNode==v){return x}x=x.parentNode}while(x)}function j(y,x,z){var v=z?"nextSibling":"previousSibling";for(g=y,r=g.parentNode;g&&g!=x;g=r){r=g.parentNode;q=p(g==y?g:g[v],v);if(q.length){if(!z){q.reverse()}s(q)}}}if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[k]}if(u.nodeType==1&&u.hasChildNodes()){u=u.childNodes[Math.min(l-1,u.childNodes.length-1)]}i=c.findCommonAncestor(h,u);if(h==u){return s([h])}for(g=h;g;g=g.parentNode){if(g==u){return j(h,i,true)}if(g==i){break}}for(g=u;g;g=g.parentNode){if(g==h){return j(u,i)}if(g==i){break}}f=m(h,i)||h;o=m(u,i)||u;j(h,f,true);q=p(f==h?f:f.nextSibling,"nextSibling",o==u?o.nextSibling:o);if(q.length){s(q)}j(u,o)}};a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(c.item||c.duplicate){if(c.item&&b.item&&c.item(0)===b.item(0)){return true}if(c.isEqual&&b.isEqual&&b.isEqual(c)){return true}}else{return c.startContainer==b.startContainer&&c.startOffset==b.startOffset}}return false}})(tinymce);(function(b){var a=b.dom.Event,c=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(e,f){var q=this,m=e.root,l=e.items,o=e.enableUpDown,i=e.enableLeftRight||!e.enableUpDown,k=e.excludeFromTabOrder,j,h,p,d,g;f=f||b.DOM;j=function(r){g=r.target.id};h=function(r){f.setAttrib(r.target.id,"tabindex","-1")};d=function(r){var s=f.get(g);f.setAttrib(s,"tabindex","0");s.focus()};q.focus=function(){f.get(g).focus()};q.destroy=function(){c(l,function(r){f.unbind(f.get(r.id),"focus",j);f.unbind(f.get(r.id),"blur",h)});f.unbind(f.get(m),"focus",d);f.unbind(f.get(m),"keydown",p);l=f=m=q.focus=j=h=p=d=null;q.destroy=function(){}};q.moveFocus=function(x,s){var r=-1,v=q.controls,u;if(!g){return}c(l,function(z,y){if(z.id===g){r=y;return false}});r+=x;if(r<0){r=l.length-1}else{if(r>=l.length){r=0}}u=l[r];f.setAttrib(g,"tabindex","-1");f.setAttrib(u.id,"tabindex","0");f.get(u.id).focus();if(e.actOnFocus){e.onAction(u.id)}if(s){a.cancel(s)}};p=function(A){var x=37,v=39,z=38,B=40,r=27,u=14,s=13,y=32;switch(A.keyCode){case x:if(i){q.moveFocus(-1)}break;case v:if(i){q.moveFocus(1)}break;case z:if(o){q.moveFocus(-1)}break;case B:if(o){q.moveFocus(1)}break;case r:if(e.onCancel){e.onCancel();a.cancel(A)}break;case u:case s:case y:if(e.onAction){e.onAction(g);a.cancel(A)}break}};c(l,function(u,r){var s;if(!u.id){u.id=f.uniqueId("_mce_item_")}if(k){f.bind(u.id,"blur",h);s="-1"}else{s=(r===0?"0":"-1")}f.setAttrib(u.id,"tabindex",s);f.bind(f.get(u.id),"focus",j)});if(l[0]){g=l[0].id}f.setAttrib(m,"tabindex","-1");f.bind(f.get(m),"focus",d);f.bind(f.get(m),"keydown",p)}})})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(f,e,d){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0;this.editor=d},setAriaProperty:function(f,e){var d=b.get(this.id+"_aria")||b.get(this.id);if(d){b.setAttrib(d,"aria-"+f,!!e)}},focus:function(){b.get(this.id).focus()},setDisabled:function(d){if(d!=this.disabled){this.setAriaProperty("disabled",d);this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d;this.setAriaProperty("pressed",d)}},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f;if(d){b.addClass(e,f)}else{b.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(a(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(a(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,b,a){this.parent(c,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.setAriaProperty("checked",!!f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(c(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new d.ui.MenuItem(f.id||b.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||c.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(d(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(j){var h=this,i=h.settings,g;j.container=j.container||i.container;j.parent=h;j.constrain=j.constrain||i.constrain;j["class"]=j["class"]||i["class"];j.vp_offset_x=j.vp_offset_x||i.vp_offset_x;j.vp_offset_y=j.vp_offset_y||i.vp_offset_y;j.keyboard_focus=i.keyboard_focus;g=new e.ui.DropMenu(j.id||c.uniqueId(),j);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},focus:function(){var g=this;if(g.keyboardNav){g.keyboardNav.focus()}},update:function(){var i=this,j=i.settings,g=c.get("menu_"+i.id+"_tbl"),l=c.get("menu_"+i.id+"_co"),h,k;h=j.max_width?Math.min(g.clientWidth,j.max_width):g.clientWidth;k=j.max_height?Math.min(g.clientHeight,j.max_height):g.clientHeight;if(!c.boxModel){i.element.setStyles({width:h+2,height:k+2})}else{i.element.setStyles({width:h,height:k})}if(j.max_width){c.setStyle(l,"width",h)}if(j.max_height){c.setStyle(l,"height",k);if(g.clientHeight<j.max_height){c.setStyle(l,"overflow","hidden")}}},showMenu:function(q,o,u){var A=this,B=A.settings,p,g=c.getViewPort(),v,l,z,r,i=2,k,j,m=A.classPrefix;A.collapse(1);if(A.isMenuVisible){return}if(!A.rendered){p=c.add(A.settings.container,A.renderNode());f(A.items,function(h){h.postRender()});A.element=new b("menu_"+A.id,{blocker:1,container:B.container})}else{p=c.get("menu_"+A.id)}if(!e.isOpera){c.setStyles(p,{left:-65535,top:-65535})}c.show(p);A.update();q+=B.offset_x||0;o+=B.offset_y||0;g.w-=4;g.h-=4;if(B.constrain){v=p.clientWidth-i;l=p.clientHeight-i;z=g.x+g.w;r=g.y+g.h;if((q+B.vp_offset_x+v)>z){q=u?u-v:Math.max(0,(z-B.vp_offset_x)-v)}if((o+B.vp_offset_y+l)>r){o=Math.max(0,(r-B.vp_offset_y)-l)}}c.setStyles(p,{left:q,top:o});A.element.update();A.isMenuVisible=1;A.mouseClickFunc=a.add(p,"click",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,m+"ItemSub")){h=A.items[s.id];if(h.isDisabled()){return}k=A;while(k){if(k.hideMenu){k.hideMenu()}k=k.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return a.cancel(s)}});if(A.hasMenus()){A.mouseOverFunc=a.add(p,"mouseover",function(y){var h,x,s;y=y.target;if(y&&(y=c.getParent(y,"tr"))){h=A.items[y.id];if(A.lastMenu){A.lastMenu.collapse(1)}if(h.isDisabled()){return}if(y&&c.hasClass(y,m+"ItemSub")){x=c.getRect(y);h.showMenu((x.x+x.w-i),x.y-i,x.x);A.lastMenu=h;c.addClass(c.get(h.id).firstChild,m+"ItemActive")}}})}a.add(p,"keydown",A._keyHandler,A);A.onShowMenu.dispatch(A);if(B.keyboard_focus){A._setupKeyboardNav()}},hideMenu:function(j){var g=this,i=c.get("menu_"+g.id),h;if(!g.isMenuVisible){return}if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(i,"mouseover",g.mouseOverFunc);a.remove(i,"click",g.mouseClickFunc);a.remove(i,"keydown",g._keyHandler);c.hide(i);g.isMenuVisible=0;if(!j){g.collapse(1)}if(g.element){g.element.hide()}if(h=c.get(g.id)){c.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(i){var g=this,h;i=g.parent(i);if(g.isRendered&&(h=c.get("menu_"+g.id))){g._add(c.select("tbody",h)[0],i)}return i},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=c.get("menu_"+g.id);if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(h,"mouseover",g.mouseOverFunc);a.remove(c.select("a",h),"focus",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);a.remove(h,"keydown",g._keyHandler);if(g.element){g.element.remove()}c.remove(h)},renderNode:function(){var i=this,j=i.settings,l,h,k,g;g=c.create("div",{role:"listbox",id:"menu_"+i.id,"class":j["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(i.settings.parent){c.setAttrib(g,"aria-parent","menu_"+i.settings.parent.id)}k=c.add(g,"div",{role:"presentation",id:"menu_"+i.id+"_co","class":i.classPrefix+(j["class"]?" "+j["class"]:"")});i.element=new b("menu_"+i.id,{blocker:1,container:j.container});if(j.menu_line){c.add(k,"span",{"class":i.classPrefix+"Line"})}l=c.add(k,"table",{role:"presentation",id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=c.add(l,"tbody");f(i.items,function(m){i._add(h,m)});i.rendered=true;return g},_setupKeyboardNav:function(){var i,h,g=this;i=c.select("#menu_"+g.id)[0];h=c.select("a[role=option]","menu_"+g.id);h.splice(0,0,i);g.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+g.id,items:h,onCancel:function(){g.hideMenu()},enableUpDown:true});i.focus()},_keyHandler:function(g){var h=this,i;switch(g.keyCode){case 37:if(h.settings.parent){h.hideMenu();h.settings.parent.focus();a.cancel(g)}break;case 39:if(h.mouseOverFunc){h.mouseOverFunc(g)}break}},_add:function(j,h){var i,q=h.settings,p,l,k,m=this.classPrefix,g;if(q.separator){l=c.add(j,"tr",{id:h.id,"class":m+"ItemSeparator"});c.add(l,"td",{"class":m+"ItemSeparator"});if(i=l.previousSibling){c.addClass(i,"mceLast")}return}i=l=c.add(j,"tr",{id:h.id,"class":m+"Item "+m+"ItemEnabled"});i=k=c.add(i,q.titleItem?"th":"td");i=p=c.add(i,"a",{id:h.id+"_aria",role:q.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(q.parent){c.setAttrib(p,"aria-haspopup","true");c.setAttrib(p,"aria-owns","menu_"+h.id)}c.addClass(k,q["class"]);g=c.add(i,"span",{"class":"mceIcon"+(q.icon?" mce_"+q.icon:"")});if(q.icon_src){c.add(g,"img",{src:q.icon_src})}i=c.add(i,q.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){c.setAttrib(i,"style",h.settings.style)}if(j.childNodes.length==1){c.addClass(l,"mceFirst")}if((i=l.previousSibling)&&c.hasClass(i,m+"ItemSeparator")){c.addClass(l,"mceFirst")}if(h.collapse){c.addClass(l,m+"ItemSub")}if(i=l.previousSibling){c.removeClass(i,"mceLast")}c.addClass(l,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,d,c){this.parent(e,d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=a.encode(e.label||"");d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+a.encode(e.title)+'">';if(e.image){d+='<img class="mceIcon" src="'+e.image+'" alt="'+a.encode(e.title)+'" />'+c}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")}d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+e.title+"</span>";d+="</a>";return d},postRender:function(){var c=this,d=c.settings;b.dom.Event.add(c.id,"click",function(f){if(!c.isDisabled()){return d.onclick.call(d.scope,f)}})}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(i,h,f){var g=this;g.parent(i,h,f);g.items=[];g.onChange=new a(g);g.onPostRender=new a(g);g.onAdd=new a(g);g.onRenderMenu=new d.util.Dispatcher(this);g.classPrefix="mceListBox"},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){var g=this,h,i;if(f!=g.selectedIndex){h=c.get(g.id+"_text");i=g.items[f];if(i){g.selectedValue=i.value;g.selectedIndex=f;c.setHTML(h,c.encode(i.title));c.removeClass(h,"mceTitle");c.setAttrib(g.id,"aria-valuenow",i.title)}else{c.setHTML(h,c.encode(g.settings.title));c.addClass(h,"mceTitle");g.selectedValue=g.selectedIndex=null;c.setAttrib(g.id,"aria-valuenow",g.settings.title)}h=0}},add:function(i,f,h){var g=this;h=h||{};h=d.extend(h,{title:i,value:f});g.items.push(h);g.onAdd.dispatch(g,h)},getLength:function(){return this.items.length},renderHTML:function(){var i="",f=this,g=f.settings,j=f.classPrefix;i='<span role="button" aria-haspopup="true" aria-labelledby="'+f.id+'_text" aria-describedby="'+f.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+f.id+'" cellpadding="0" cellspacing="0" class="'+j+" "+j+"Enabled"+(g["class"]?(" "+g["class"]):"")+'"><tbody><tr>';i+="<td>"+c.createHTML("span",{id:f.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},f.settings.title);i+=c.createHTML("a",{id:f.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(f.settings.title))+"</td>";i+="<td>"+c.createHTML("a",{id:f.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";i+="</tr></tbody></table></span>";return i},showMenu:function(){var g=this,j,i,h=c.get(this.id),f;if(g.isDisabled()||g.items.length==0){return}if(g.menu&&g.menu.isMenuVisible){return g.hideMenu()}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}j=c.getPos(this.settings.menu_container);i=c.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.keyboard_focus=!d.isOpera;if(g.oldID){f.items[g.oldID].setSelected(0)}e(g.items,function(k){if(k.value===g.selectedValue){f.items[k.id].setSelected(1);g.oldID=k.id}});f.showMenu(0,h.clientHeight);b.add(c.doc,"mousedown",g.hideMenu,g);c.addClass(g.id,g.classPrefix+"Selected")},hideMenu:function(g){var f=this;if(f.menu&&f.menu.isMenuVisible){c.removeClass(f.id,f.classPrefix+"Selected");if(g&&g.type=="mousedown"&&(g.target.id==f.id+"_text"||g.target.id==f.id+"_open")){return}if(!g||!c.getParent(g.target,".mceMenu")){c.removeClass(f.id,f.classPrefix+"Selected");b.remove(c.doc,"mousedown",f.hideMenu,f);f.menu.hideMenu()}}},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":g.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(function(){g.hideMenu();g.focus()});f.add({title:g.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}});e(g.items,function(h){if(h.value===undefined){f.add({title:h.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}})}else{h.id=c.uniqueId();h.onclick=function(){if(g.settings.onselect(h.value)!==false){g.select(h.value)}};f.add(h)}});g.onRenderMenu.dispatch(g,f);g.menu=f},postRender:function(){var f=this,g=f.classPrefix;b.add(f.id,"click",f.showMenu,f);b.add(f.id,"keydown",function(h){if(h.keyCode==32){f.showMenu(h);b.cancel(h)}});b.add(f.id,"focus",function(){if(!f._focused){f.keyDownHandler=b.add(f.id,"keydown",function(h){if(h.keyCode==40){f.showMenu();b.cancel(h)}});f.keyPressHandler=b.add(f.id,"keypress",function(i){var h;if(i.keyCode==13){h=f.selectedValue;f.selectedValue=null;b.cancel(i);f.settings.onselect(h)}})}f._focused=1});b.add(f.id,"blur",function(){b.remove(f.id,"keydown",f.keyDownHandler);b.remove(f.id,"keypress",f.keyPressHandler);f._focused=0});if(d.isIE6||!c.boxModel){b.add(f.id,"mouseover",function(){if(!c.hasClass(f.id,g+"Disabled")){c.addClass(f.id,g+"Hover")}});b.add(f.id,"mouseout",function(){if(!c.hasClass(f.id,g+"Disabled")){c.removeClass(f.id,g+"Hover")}})}f.onPostRender.dispatch(f,c.get(f.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(g,f){this.parent(g,f);this.classPrefix="mceNativeListBox"},setDisabled:function(f){c.get(this.id).disabled=f;this.setAriaProperty("disabled",f)},isDisabled:function(){return c.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){c.get(this.id).selectedIndex=f+1;this.selectedValue=this.items[f]?this.items[f].value:null},add:function(j,g,f){var i,h=this;f=f||{};f.value=g;if(h.isRendered()){c.add(c.get(this.id),"option",f,j)}i={title:j,value:g,attribs:f};h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var g,f=this;g=c.createHTML("option",{value:""},"-- "+f.settings.title+" --");e(f.items,function(h){g+=c.createHTML("option",{value:h.value},h.title)});g=c.createHTML("select",{id:f.id,"class":"mceNativeListBox","aria-labelledby":f.id+"_aria"},g);g+=c.createHTML("span",{id:f.id+"_aria",style:"display: none"},f.settings.title);return g},postRender:function(){var g=this,h,i=true;g.rendered=true;function f(k){var j=g.items[k.target.selectedIndex-1];if(j&&(j=j.value)){g.onChange.dispatch(g,j);if(g.settings.onselect){g.settings.onselect(j)}}}b.add(g.id,"change",f);b.add(g.id,"keydown",function(k){var j;b.remove(g.id,"change",h);i=false;j=b.add(g.id,"blur",function(){if(i){return}i=true;b.add(g.id,"change",f);b.remove(g.id,"blur",j)});if(k.keyCode==13||k.keyCode==32){f(k);return b.cancel(k)}});g.onPostRender.dispatch(g,c.get(g.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new c.util.Dispatcher(this);f.menu_container=f.menu_container||b.doc.body},showMenu:function(){var g=this,j,i,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=b.getPos(g.settings.menu_container);i=b.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(function(){f.hideMenu();f.focus()});f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f,e){this.parent(g,f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var i,f=this,g=f.settings,e;i="<tbody><tr>";if(g.image){e=b.createHTML("img ",{src:g.image,role:"presentation","class":"mceAction "+g["class"]})}else{e=b.createHTML("span",{"class":"mceAction "+g["class"]},"")}e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:f.id+"_voice",style:"display:none;"},g.title);i+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=b.createHTML("span",{"class":"mceOpen "+g["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');i+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";i+="</tr></tbody>";i=b.createHTML("table",{id:f.id,role:"presentation",tabindex:"0","class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",title:g.title},i);return b.createHTML("span",{role:"button","aria-labelledby":f.id+"_voice","aria-haspopup":"true"},i)},postRender:function(){var e=this,g=e.settings,f;if(g.onclick){f=function(h){if(!e.isDisabled()){g.onclick(e.value);a.cancel(h)}};a.add(e.id+"_action","click",f);a.add(e.id,["click","keydown"],function(h){var k=32,m=14,i=13,j=38,l=40;if((h.keyCode===32||h.keyCode===13||h.keyCode===14)&&!h.altKey&&!h.ctrlKey&&!h.metaKey){f();a.cancel(h)}else{if(h.type==="click"||h.keyCode===l){e.showMenu();a.cancel(h)}}})}a.add(e.id+"_open","click",function(h){e.showMenu();a.cancel(h)});a.add([e.id,e.id+"_open"],"focus",function(){e._focused=1});a.add([e.id,e.id+"_open"],"blur",function(){e._focused=0});if(c.isIE6||!b.boxModel){a.add(e.id,"mouseover",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.addClass(e.id,"mceSplitButtonHover")}});a.add(e.id,"mouseout",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.removeClass(e.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open");a.clear(this.id)}})})(tinymce);(function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(i,h,f){var g=this;g.parent(i,h,f);g.settings=h=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings);g.onShowMenu=new d.util.Dispatcher(g);g.onHideMenu=new d.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var f=this,g,j,i,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}i=c.get(f.id);c.show(f.id+"_menu");c.addClass(i,"mceSplitButtonSelected");h=c.getPos(i);c.setStyles(f.id+"_menu",{left:h.x,top:h.y+i.clientHeight,zIndex:200000});i=0;a.add(c.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(k){if(k.keyCode==27){f.hideMenu()}});c.select("a",f.id+"_menu")[0].focus()}f.isMenuVisible=1},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceSplitButtonMenu")){c.removeClass(f.id,"mceSplitButtonSelected");a.remove(c.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);c.hide(f.id+"_menu")}f.onHideMenu.dispatch(f);f.isMenuVisible=0;f.editor.focus()},renderMenu:function(){var p=this,h,k=0,q=p.settings,g,j,l,o,f;o=c.add(q.menu_container,"div",{role:"listbox",id:p.id+"_menu","class":q.menu_class+" "+q["class"],style:"position:absolute;left:0;top:-1000px;"});h=c.add(o,"div",{"class":q["class"]+" mceSplitButtonMenu"});c.add(h,"span",{"class":"mceMenuLine"});g=c.add(h,"table",{role:"presentation","class":"mceColorSplitMenu"});j=c.add(g,"tbody");k=0;e(b(q.colors,"array")?q.colors:q.colors.split(","),function(i){i=i.replace(/^#/,"");if(!k--){l=c.add(j,"tr");k=q.grid_width-1}g=c.add(l,"td");g=c.add(g,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+i},title:p.editor.getLang("colors."+i,i),"data-mce-color":"#"+i});if(p.editor.forcedHighContrastMode){g=c.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"});if(g.getContext&&(f=g.getContext("2d"))){f.fillStyle="#"+i;f.fillRect(0,0,16,16)}else{c.remove(g)}}});if(q.more_colors_func){g=c.add(j,"tr");g=c.add(g,"td",{colspan:q.grid_width,"class":"mceMoreColors"});g=c.add(g,"a",{role:"option",id:p.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},q.more_colors_title);a.add(g,"click",function(i){q.more_colors_func.call(q.more_colors_scope||this);return a.cancel(i)})}c.addClass(h,"mceColorSplitMenu");new d.ui.KeyboardNavigation({root:p.id+"_menu",items:c.select("a",p.id+"_menu"),onCancel:function(){p.hideMenu();p.focus()}});a.add(p.id+"_menu","mousedown",function(i){return a.cancel(i)});a.add(p.id+"_menu","click",function(i){var m;i=c.getParent(i.target,"a",j);if(i&&i.nodeName.toLowerCase()=="a"&&(m=i.getAttribute("data-mce-color"))){p.setColor(m)}return a.cancel(i)});return o},setColor:function(f){this.displayColor(f);this.hideMenu();this.settings.onselect(f)},displayColor:function(g){var f=this;c.setStyle(f.id+"_preview","backgroundColor",g);f.value=g},postRender:function(){var f=this,g=f.id;f.parent();c.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});c.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");c.remove(this.id+"_menu")}})})(tinymce);(function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var f=this,i=[],e=f.controls,j=b.each,g=f.settings;i.push('<div id="'+f.id+'" role="group" aria-labelledby="'+f.id+'_voice">');i.push("<span role='application'>");i.push('<span id="'+f.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(g.name)+"</span>");j(e,function(h){i.push(h.renderHTML())});i.push("</span>");i.push("</div>");return i.join("")},focus:function(){this.keyNav.focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){if(h.id){e.push(h)}})});f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();a.clear(e.id)}})})(tinymce);(function(a){var c=a.DOM,b=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m=this,f="",j,k,o=m.settings,e,d,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];d=l[e-1];g=l[e+1];if(e===0){j="mceToolbarStart";if(k.Button){j+=" mceToolbarStartButton"}else{if(k.SplitButton){j+=" mceToolbarStartSplitButton"}else{if(k.ListBox){j+=" mceToolbarStartListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"))}if(d&&k.ListBox){if(d.Button||d.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))}}if(c.stdMode){f+='<td style="position: relative">'+k.renderHTML()+"</td>"}else{f+="<td>"+k.renderHTML()+"</td>"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->"))}}}j="mceToolbarEnd";if(k.Button){j+=" mceToolbarEndButton"}else{if(k.SplitButton){j+=" mceToolbarEndSplitButton"}else{if(k.ListBox){j+=" mceToolbarEndListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"));return c.createHTML("table",{id:m.id,"class":"mceToolbar"+(o["class"]?" "+o["class"]:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+f+"</tr></tbody>")}})})(tinymce);(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d)},get:function(d){return this.lookup[d]},requireLangPack:function(e){var d=b.settings;if(d&&d.language&&d.language_load!==false){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(e,d){this.items.push(d);this.lookup[e]=d;this.onAdd.dispatch(this,e,d);return d},load:function(h,e,d,g){var f=this;if(f.urls[h]){return}if(e.indexOf("/")!=0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}f.urls[h]=e.substring(0,e.lastIndexOf("/"));if(!f.lookup[h]){b.ScriptLoader.add(e,d,g)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(j){var g=j.each,d=j.extend,k=j.DOM,i=j.dom.Event,f=j.ThemeManager,b=j.PluginManager,e=j.explode,h=j.util.Dispatcher,a,c=0;j.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(j.documentBaseURL)){j.documentBaseURL+="/"}j.baseURL=new j.util.URI(j.documentBaseURL).toAbsolute(j.baseURL);j.baseURI=new j.util.URI(j.baseURL);j.onBeforeUnload=new h(j);i.add(window,"beforeunload",function(l){j.onBeforeUnload.dispatch(j,l)});j.onAddEditor=new h(j);j.onRemoveEditor=new h(j);j.EditorManager=d(j,{editors:[],i18n:{},activeEditor:null,init:function(r){var o=this,q,l=j.ScriptLoader,v,p=[],m;function u(z,A,x){var y=z[A];if(!y){return}if(j.is(y,"string")){x=y.replace(/\.\w+$/,"");x=x?j.resolve(x):0;y=j.resolve(y)}return y.apply(x||this,Array.prototype.slice.call(arguments,2))}r=d({theme:"simple",language:"en"},r);o.settings=r;i.add(document,"init",function(){var s,y;u(r,"onpageload");switch(r.mode){case"exact":s=r.elements||"";if(s.length>0){g(e(s),function(z){if(k.get(z)){m=new j.Editor(z,r);p.push(m);m.render(1)}else{g(document.forms,function(A){g(A.elements,function(B){if(B.name===z){z="mce_editor_"+c++;k.setAttrib(B,"id",z);m=new j.Editor(z,r);p.push(m);m.render(1)}})})}})}break;case"textareas":case"specific_textareas":function x(A,z){return z.constructor===RegExp?z.test(A.className):k.hasClass(A,z)}g(k.select("textarea"),function(z){if(r.editor_deselector&&x(z,r.editor_deselector)){return}if(!r.editor_selector||x(z,r.editor_selector)){v=k.get(z.name);if(!z.id&&!v){z.id=z.name}if(!z.id||o.get(z.id)){z.id=k.uniqueId()}m=new j.Editor(z.id,r);p.push(m);m.render(1)}});break}if(r.oninit){s=y=0;g(p,function(z){y++;if(!z.initialized){z.onInit.add(function(){s++;if(s==y){u(r,"oninit")}})}else{s++}if(s==y){u(r,"oninit")}})}})},get:function(l){if(l===a){return this.editors}return this.editors[l]},getInstanceById:function(l){return this.get(l)},add:function(m){var l=this,o=l.editors;o[m.id]=m;o.push(m);l._setActive(m);l.onAddEditor.dispatch(l,m);return m},remove:function(o){var m=this,l,p=m.editors;if(!p[o.id]){return null}delete p[o.id];for(l=0;l<p.length;l++){if(p[l]==o){p.splice(l,1);break}}if(m.activeEditor==o){m._setActive(p[0])}o.destroy();m.onRemoveEditor.dispatch(m,o);return o},execCommand:function(s,q,p){var r=this,o=r.get(p),l;switch(s){case"mceFocus":o.focus();return true;case"mceAddEditor":case"mceAddControl":if(!r.get(p)){new j.Editor(p,r.settings).render()}return true;case"mceAddFrameControl":l=p.window;l.tinyMCE=tinyMCE;l.tinymce=j;j.DOM.doc=l.document;j.DOM.win=l;o=new j.Editor(p.element_id,p);o.render();if(j.isIE){function m(){o.destroy();l.detachEvent("onunload",m);l=l.tinyMCE=l.tinymce=null}l.attachEvent("onunload",m)}p.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(o){o.remove()}return true;case"mceToggleEditor":if(!o){r.execCommand("mceAddControl",0,p);return true}if(o.isHidden()){o.show()}else{o.hide()}return true}if(r.activeEditor){return r.activeEditor.execCommand(s,q,p)}return false},execInstanceCommand:function(q,p,o,m){var l=this.get(q);if(l){return l.execCommand(p,o,m)}return false},triggerSave:function(){g(this.editors,function(l){l.save()})},addI18n:function(q,r){var l,m=this.i18n;if(!j.is(q,"string")){g(q,function(s,p){g(s,function(v,u){g(v,function(y,x){if(u==="common"){m[p+"."+x]=y}else{m[p+"."+u+"."+x]=y}})})})}else{g(r,function(s,p){m[q+"."+p]=s})}},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})})(tinymce);(function(m){var o=m.DOM,j=m.dom.Event,f=m.extend,k=m.util.Dispatcher,i=m.each,a=m.isGecko,b=m.isIE,e=m.isWebKit,d=m.is,h=m.ThemeManager,c=m.PluginManager,p=m.inArray,l=m.grep,g=m.explode;m.create("tinymce.Editor",{Editor:function(u,r){var q=this;q.id=q.editorId=u;q.execCommands={};q.queryStateCommands={};q.queryValueCommands={};q.isNotDirty=false;q.plugins={};i(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(s){q[s]=new k(q)});q.settings=r=f({id:u,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:m.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:m.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:true,entity_encoding:"named",url_converter:q.convertURL,url_converter_scope:q,ie7_compat:true},r);q.documentBaseURI=new m.util.URI(r.document_base_url||m.documentBaseURL,{base_uri:tinyMCE.baseURI});q.baseURI=m.baseURI;q.contentCSS=[];q.execCallback("setup",q)},render:function(u){var v=this,x=v.settings,y=v.id,q=m.ScriptLoader;if(!j.domLoaded){j.add(document,"init",function(){v.render()});return}tinyMCE.settings=x;if(!v.getElement()){return}if(m.isIDevice){return}if(!/TEXTAREA|INPUT/i.test(v.getElement().nodeName)&&x.hidden_input&&o.getParent(y,"form")){o.insertAfter(o.create("input",{type:"hidden",name:y}),y)}if(m.WindowManager){v.windowManager=new m.WindowManager(v)}if(x.encoding=="xml"){v.onGetContent.add(function(s,z){if(z.save){z.content=o.encode(z.content)}})}if(x.add_form_submit_trigger){v.onSubmit.addToTop(function(){if(v.initialized){v.save();v.isNotDirty=1}})}if(x.add_unload_trigger){v._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(v.initialized&&!v.destroyed&&!v.isHidden()){v.save({format:"raw",no_events:true})}})}m.addUnload(v.destroy,v);if(x.submit_patch){v.onBeforeRenderUI.add(function(){var s=v.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){v.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){m.triggerSave();v.isNotDirty=1;return v.formElement._mceOldSubmit(v.formElement)}}s=null})}function r(){if(x.language&&x.language_load!==false){q.add(m.baseURL+"/langs/"+x.language+".js")}if(x.theme&&x.theme.charAt(0)!="-"&&!h.urls[x.theme]){h.load(x.theme,"themes/"+x.theme+"/editor_template"+m.suffix+".js")}i(g(x.plugins),function(s){if(s&&s.charAt(0)!="-"&&!c.urls[s]){if(s=="safari"){return}c.load(s,"plugins/"+s+"/editor_plugin"+m.suffix+".js")}});q.loadQueue(function(){if(!v.removed){v.init()}})}r()},init:function(){var v,G=this,H=G.settings,D,A,C=G.getElement(),r,q,E,y,B,F,z;m.add(G);H.aria_label=H.aria_label||o.getAttrib(C,"aria-label",G.getLang("aria.rich_text_area"));if(H.theme){H.theme=H.theme.replace(/-/,"");r=h.get(H.theme);G.theme=new r();if(G.theme.init&&H.init_theme){G.theme.init(G,h.urls[H.theme]||m.documentBaseURL.replace(/\/$/,""))}}i(g(H.plugins.replace(/\-/g,"")),function(J){var K=c.get(J),I=c.urls[J]||m.documentBaseURL.replace(/\/$/,""),s;if(K){s=new K(G,I);G.plugins[J]=s;if(s.init){s.init(G,I)}}});if(H.popup_css!==false){if(H.popup_css){H.popup_css=G.documentBaseURI.toAbsolute(H.popup_css)}else{H.popup_css=G.baseURI.toAbsolute("themes/"+H.theme+"/skins/"+H.skin+"/dialog.css")}}if(H.popup_css_add){H.popup_css+=","+G.documentBaseURI.toAbsolute(H.popup_css_add)}G.controlManager=new m.ControlManager(G);if(H.custom_undo_redo){G.onBeforeExecCommand.add(function(u,J,I,K,s){if(J!="Undo"&&J!="Redo"&&J!="mceRepaint"&&(!s||!s.skip_undo)){G.undoManager.beforeChange()}});G.onExecCommand.add(function(u,J,I,K,s){if(J!="Undo"&&J!="Redo"&&J!="mceRepaint"&&(!s||!s.skip_undo)){G.undoManager.add()}})}G.onExecCommand.add(function(s,u){if(!/^(FontName|FontSize)$/.test(u)){G.nodeChanged()}});if(a){function x(s,u){if(!u||!u.initial){G.execCommand("mceRepaint")}}G.onUndo.add(x);G.onRedo.add(x);G.onSetContent.add(x)}G.onBeforeRenderUI.dispatch(G,G.controlManager);if(H.render_ui){D=H.width||C.style.width||C.offsetWidth;A=H.height||C.style.height||C.offsetHeight;G.orgDisplay=C.style.display;F=/^[0-9\.]+(|px)$/i;if(F.test(""+D)){D=Math.max(parseInt(D)+(r.deltaWidth||0),100)}if(F.test(""+A)){A=Math.max(parseInt(A)+(r.deltaHeight||0),100)}r=G.theme.renderUI({targetNode:C,width:D,height:A,deltaWidth:H.delta_width,deltaHeight:H.delta_height});G.editorContainer=r.editorContainer}if(document.domain&&location.hostname!=document.domain){m.relaxedDomain=document.domain}o.setStyles(r.sizeContainer||r.editorContainer,{width:D,height:A});if(H.content_css){m.each(g(H.content_css),function(s){G.contentCSS.push(G.documentBaseURI.toAbsolute(s))})}A=(r.iframeHeight||A)+(typeof(A)=="number"?(r.deltaHeight||0):"");if(A<100){A=100}G.iframeHTML=H.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(H.document_base_url!=m.documentBaseURL){G.iframeHTML+='<base href="'+G.documentBaseURI.getURI()+'" />'}if(H.ie7_compat){G.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{G.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}G.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(!a||!/Firefox\/2/.test(navigator.userAgent)){for(z=0;z<G.contentCSS.length;z++){G.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+G.contentCSS[z]+'" />'}G.contentCSS=[]}y=H.body_id||"tinymce";if(y.indexOf("=")!=-1){y=G.getParam("body_id","","hash");y=y[G.id]||y}B=H.body_class||"";if(B.indexOf("=")!=-1){B=G.getParam("body_class","","hash");B=B[G.id]||""}G.iframeHTML+='</head><body id="'+y+'" class="mceContentBody '+B+'"></body></html>';if(m.relaxedDomain&&(b||(m.isOpera&&parseFloat(opera.version())<11))){E='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+G.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}v=o.add(r.iframeContainer,"iframe",{id:G.id+"_ifr",src:E||'javascript:""',frameBorder:"0",title:H.aria_label,style:{width:"100%",height:A}});G.contentAreaContainer=r.iframeContainer;o.get(r.editorContainer).style.display=G.orgDisplay;o.get(G.id).style.display="none";o.setAttrib(G.id,"aria-hidden",true);if(!m.relaxedDomain||!E){G.setupIframe()}C=v=r=null},setupIframe:function(){var u=this,y=u.settings,z=o.get(u.id),A=u.getDoc(),x,q;if(!b||!m.relaxedDomain){A.open();A.write(u.iframeHTML);A.close();if(m.relaxedDomain){A.domain=m.relaxedDomain}}if(!b){try{if(!y.readonly){A.designMode="On"}}catch(r){}}if(b){q=u.getBody();o.hide(q);if(!y.readonly){q.contentEditable=true}o.show(q)}u.schema=new m.html.Schema(y);u.dom=new m.dom.DOMUtils(u.getDoc(),{keep_values:true,url_converter:u.convertURL,url_converter_scope:u,hex_colors:y.force_hex_style_colors,class_filter:y.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:u.schema});u.parser=new m.html.DomParser(y,u.schema);u.parser.addAttributeFilter("name",function(s,B){var D=s.length,F,C,E,G;while(D--){G=s[D];if(G.name==="a"&&G.firstChild){E=G.parent;F=G.lastChild;do{C=F.prev;E.insert(F,G);F=C}while(F)}}});u.parser.addAttributeFilter("src,href,style",function(s,B){var C=s.length,D,F=u.dom,E;while(C--){D=s[C];E=D.attr(B);if(B==="style"){D.attr("data-mce-style",F.serializeStyle(F.parseStyle(E),D.name))}else{D.attr("data-mce-"+B,u.convertURL(E,B,D.name))}}});u.parser.addNodeFilter("script",function(s,B){var C=s.length;while(C--){s[C].attr("type","mce-text/javascript")}});u.parser.addNodeFilter("#cdata",function(s,B){var C=s.length,D;while(C--){D=s[C];D.type=8;D.name="#comment";D.value="[CDATA["+D.value+"]]"}});u.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(B,C){var D=B.length,E,s=u.schema.getNonEmptyElements();while(D--){E=B[D];if(E.isEmpty(s)){E.empty().append(new m.html.Node("br",1)).shortEnded=true}}});u.serializer=new m.dom.Serializer(y,u.dom,u.schema);u.selection=new m.dom.Selection(u.dom,u.getWin(),u.serializer);u.formatter=new m.Formatter(this);u.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});i("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(s){u.formatter.register(s,{block:s,remove:"all"})});u.formatter.register(u.settings.formats);u.undoManager=new m.UndoManager(u);u.undoManager.onAdd.add(function(B,s){if(B.hasUndo()){return u.onChange.dispatch(u,s,B)}});u.undoManager.onUndo.add(function(B,s){return u.onUndo.dispatch(u,s,B)});u.undoManager.onRedo.add(function(B,s){return u.onRedo.dispatch(u,s,B)});u.forceBlocks=new m.ForceBlocks(u,{forced_root_block:y.forced_root_block});u.editorCommands=new m.EditorCommands(u);u.serializer.onPreProcess.add(function(s,B){return u.onPreProcess.dispatch(u,B,s)});u.serializer.onPostProcess.add(function(s,B){return u.onPostProcess.dispatch(u,B,s)});u.onPreInit.dispatch(u);if(!y.gecko_spellcheck){u.getBody().spellcheck=0}if(!y.readonly){u._addEvents()}u.controlManager.onPostRender.dispatch(u,u.controlManager);u.onPostRender.dispatch(u);if(y.directionality){u.getBody().dir=y.directionality}if(y.nowrap){u.getBody().style.whiteSpace="nowrap"}if(y.handle_node_change_callback){u.onNodeChange.add(function(B,s,C){u.execCallback("handle_node_change_callback",u.id,C,-1,-1,true,u.selection.isCollapsed())})}if(y.save_callback){u.onSaveContent.add(function(s,C){var B=u.execCallback("save_callback",u.id,C.content,u.getBody());if(B){C.content=B}})}if(y.onchange_callback){u.onChange.add(function(B,s){u.execCallback("onchange_callback",u,s)})}if(y.protect){u.onBeforeSetContent.add(function(s,B){if(y.protect){i(y.protect,function(C){B.content=B.content.replace(C,function(D){return"<!--mce:protected "+escape(D)+"-->"})})}})}if(y.convert_newlines_to_brs){u.onBeforeSetContent.add(function(s,B){if(B.initial){B.content=B.content.replace(/\r?\n/g,"<br />")}})}if(y.preformatted){u.onPostProcess.add(function(s,B){B.content=B.content.replace(/^\s*<pre.*?>/,"");B.content=B.content.replace(/<\/pre>\s*$/,"");if(B.set){B.content='<pre class="mceItemHidden">'+B.content+"</pre>"}})}if(y.verify_css_classes){u.serializer.attribValueFilter=function(E,C){var D,B;if(E=="class"){if(!u.classesRE){B=u.dom.getClasses();if(B.length>0){D="";i(B,function(s){D+=(D?"|":"")+s["class"]});u.classesRE=new RegExp("("+D+")","gi")}}return !u.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(C)||u.classesRE.test(C)?C:""}return C}}if(y.cleanup_callback){u.onBeforeSetContent.add(function(s,B){B.content=u.execCallback("cleanup_callback","insert_to_editor",B.content,B)});u.onPreProcess.add(function(s,B){if(B.set){u.execCallback("cleanup_callback","insert_to_editor_dom",B.node,B)}if(B.get){u.execCallback("cleanup_callback","get_from_editor_dom",B.node,B)}});u.onPostProcess.add(function(s,B){if(B.set){B.content=u.execCallback("cleanup_callback","insert_to_editor",B.content,B)}if(B.get){B.content=u.execCallback("cleanup_callback","get_from_editor",B.content,B)}})}if(y.save_callback){u.onGetContent.add(function(s,B){if(B.save){B.content=u.execCallback("save_callback",u.id,B.content,u.getBody())}})}if(y.handle_event_callback){u.onEvent.add(function(s,B,C){if(u.execCallback("handle_event_callback",B,s,C)===false){j.cancel(B)}})}u.onSetContent.add(function(){u.addVisual(u.getBody())});if(y.padd_empty_editor){u.onPostProcess.add(function(s,B){B.content=B.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(a){function v(s,B){i(s.dom.select("a"),function(D){var C=D.parentNode;if(s.dom.isBlock(C)&&C.lastChild===D){s.dom.add(C,"br",{"data-mce-bogus":1})}})}u.onExecCommand.add(function(s,B){if(B==="CreateLink"){v(s)}});u.onSetContent.add(u.selection.onSetContent.add(v));if(!y.readonly){try{A.designMode="Off";A.designMode="On"}catch(r){}}}setTimeout(function(){if(u.removed){return}u.load({initial:true,format:"html"});u.startContent=u.getContent({format:"raw"});u.undoManager.add();u.initialized=true;u.onInit.dispatch(u);u.execCallback("setupcontent_callback",u.id,u.getBody(),u.getDoc());u.execCallback("init_instance_callback",u);u.focus(true);u.nodeChanged({initial:1});i(u.contentCSS,function(s){u.dom.loadCSS(s)});if(y.auto_focus){setTimeout(function(){var s=m.get(y.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getWin().focus()},100)}},1);z=null},focus:function(u){var y,r=this,x=r.settings.content_editable,s,q,v=r.getDoc();if(!u){s=r.selection.getRng();if(s.item){q=s.item(0)}if(!x){r.getWin().focus()}if(q&&q.ownerDocument==v){s=v.body.createControlRange();s.addElement(q);s.select()}}if(m.activeEditor!=r){if((y=m.activeEditor)!=null){y.onDeactivate.dispatch(y,r)}r.onActivate.dispatch(r,y)}m._setActive(r)},execCallback:function(v){var q=this,u=q.settings[v],r;if(!u){return}if(q.callbackLookup&&(r=q.callbackLookup[v])){u=r.func;r=r.scope}if(d(u,"string")){r=u.replace(/\.\w+$/,"");r=r?m.resolve(r):0;u=m.resolve(u);q.callbackLookup=q.callbackLookup||{};q.callbackLookup[v]={func:u,scope:r}}return u.apply(r||q,Array.prototype.slice.call(arguments,1))},translate:function(q){var u=this.settings.language||"en",r=m.i18n;if(!q){return""}return r[u+"."+q]||q.replace(/{\#([^}]+)\}/g,function(v,s){return r[u+"."+s]||"{#"+s+"}"})},getLang:function(r,q){return m.i18n[(this.settings.language||"en")+"."+r]||(d(q)?q:"{#"+r+"}")},getParam:function(y,s,q){var u=m.trim,r=d(this.settings[y])?this.settings[y]:s,x;if(q==="hash"){x={};if(d(r,"string")){i(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(z){z=z.split("=");if(z.length>1){x[u(z[0])]=u(z[1])}else{x[u(z[0])]=u(z)}})}else{x=r}return x}return r},nodeChanged:function(u){var q=this,r=q.selection,v=r.getStart()||q.getBody();if(q.initialized){u=u||{};v=b&&v.ownerDocument!=q.getDoc()?q.getBody():v;u.parents=[];q.dom.getParent(v,function(s){if(s.nodeName=="BODY"){return true}u.parents.push(s)});q.onNodeChange.dispatch(q,u?u.controlManager||q.controlManager:q.controlManager,v,r.isCollapsed(),u)}},addButton:function(u,r){var q=this;q.buttons=q.buttons||{};q.buttons[u]=r},addCommand:function(q,s,r){this.execCommands[q]={func:s,scope:r||this}},addQueryStateHandler:function(q,s,r){this.queryStateCommands[q]={func:s,scope:r||this}},addQueryValueHandler:function(q,s,r){this.queryValueCommands[q]={func:s,scope:r||this}},addShortcut:function(s,v,q,u){var r=this,x;if(!r.settings.custom_shortcuts){return false}r.shortcuts=r.shortcuts||{};if(d(q,"string")){x=q;q=function(){r.execCommand(x,false,null)}}if(d(q,"object")){x=q;q=function(){r.execCommand(x[0],x[1],x[2])}}i(g(s),function(y){var z={func:q,scope:u||this,desc:v,alt:false,ctrl:false,shift:false};i(g(y,"+"),function(A){switch(A){case"alt":case"ctrl":case"shift":z[A]=true;break;default:z.charCode=A.charCodeAt(0);z.keyCode=A.toUpperCase().charCodeAt(0)}});r.shortcuts[(z.ctrl?"ctrl":"")+","+(z.alt?"alt":"")+","+(z.shift?"shift":"")+","+z.keyCode]=z});return true},execCommand:function(y,x,A,q){var u=this,v=0,z,r;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(y)&&(!q||!q.skip_focus)){u.focus()}z={};u.onBeforeExecCommand.dispatch(u,y,x,A,z);if(z.terminate){return false}if(u.execCallback("execcommand_callback",u.id,u.selection.getNode(),y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);return true}if(z=u.execCommands[y]){r=z.func.call(z.scope,x,A);if(r!==true){u.onExecCommand.dispatch(u,y,x,A,q);return r}}i(u.plugins,function(s){if(s.execCommand&&s.execCommand(y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);v=1;return false}});if(v){return true}if(u.theme&&u.theme.execCommand&&u.theme.execCommand(y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);return true}if(u.editorCommands.execCommand(y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);return true}u.getDoc().execCommand(y,x,A);u.onExecCommand.dispatch(u,y,x,A,q)},queryCommandState:function(v){var r=this,x,u;if(r._isHidden()){return}if(x=r.queryStateCommands[v]){u=x.func.call(x.scope);if(u!==true){return u}}x=r.editorCommands.queryCommandState(v);if(x!==-1){return x}try{return this.getDoc().queryCommandState(v)}catch(q){}},queryCommandValue:function(x){var r=this,v,u;if(r._isHidden()){return}if(v=r.queryValueCommands[x]){u=v.func.call(v.scope);if(u!==true){return u}}v=r.editorCommands.queryCommandValue(x);if(d(v)){return v}try{return this.getDoc().queryCommandValue(x)}catch(q){}},show:function(){var q=this;o.show(q.getContainer());o.hide(q.id);q.load()},hide:function(){var q=this,r=q.getDoc();if(b&&r){r.execCommand("SelectAll")}q.save();o.hide(q.getContainer());o.setStyle(q.id,"display",q.orgDisplay)},isHidden:function(){return !o.isHidden(this.id)},setProgressState:function(q,r,s){this.onSetProgressState.dispatch(this,q,r,s);return q},load:function(u){var q=this,s=q.getElement(),r;if(s){u=u||{};u.load=true;r=q.setContent(d(s.value)?s.value:s.innerHTML,u);u.element=s;if(!u.no_events){q.onLoadContent.dispatch(q,u)}u.element=s=null;return r}},save:function(v){var q=this,u=q.getElement(),r,s;if(!u||!q.initialized){return}v=v||{};v.save=true;if(!v.no_events){q.undoManager.typing=false;q.undoManager.add()}v.element=u;r=v.content=q.getContent(v);if(!v.no_events){q.onSaveContent.dispatch(q,v)}r=v.content;if(!/TEXTAREA|INPUT/i.test(u.nodeName)){u.innerHTML=r;if(s=o.getParent(q.id,"form")){i(s.elements,function(x){if(x.name==q.id){x.value=r;return false}})}}else{u.value=r}v.element=u=null;return r},setContent:function(v,u){var s=this,r,q=s.getBody();u=u||{};u.format=u.format||"html";u.set=true;u.content=v;if(!u.no_events){s.onBeforeSetContent.dispatch(s,u)}v=u.content;if(!m.isIE&&(v.length===0||/^\s+$/.test(v))){q.innerHTML='<br data-mce-bogus="1" />';return}if(u.format!=="raw"){v=new m.html.Serializer({},s.schema).serialize(s.parser.parse(v))}u.content=m.trim(v);s.dom.setHTML(q,u.content);if(!u.no_events){s.onSetContent.dispatch(s,u)}return u.content},getContent:function(r){var q=this,s;r=r||{};r.format=r.format||"html";r.get=true;if(!r.no_events){q.onBeforeGetContent.dispatch(q,r)}if(r.format=="raw"){s=q.getBody().innerHTML}else{s=q.serializer.serialize(q.getBody(),r)}r.content=m.trim(s);if(!r.no_events){q.onGetContent.dispatch(q,r)}return r.content},isDirty:function(){var q=this;return m.trim(q.startContent)!=m.trim(q.getContent({format:"raw",no_events:1}))&&!q.isNotDirty},getContainer:function(){var q=this;if(!q.container){q.container=o.get(q.editorContainer||q.id+"_parent")}return q.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return o.get(this.settings.content_element||this.id)},getWin:function(){var q=this,r;if(!q.contentWindow){r=o.get(q.id+"_ifr");if(r){q.contentWindow=r.contentWindow}}return q.contentWindow},getDoc:function(){var r=this,q;if(!r.contentDocument){q=r.getWin();if(q){r.contentDocument=q.document}}return r.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(q,y,x){var r=this,v=r.settings;if(v.urlconverter_callback){return r.execCallback("urlconverter_callback",q,x,true,y)}if(!v.convert_urls||(x&&x.nodeName=="LINK")||q.indexOf("file:")===0){return q}if(v.relative_urls){return r.documentBaseURI.toRelative(q)}q=r.documentBaseURI.toAbsolute(q,v.remove_script_host);return q},addVisual:function(u){var q=this,r=q.settings;u=u||q.getBody();if(!d(q.hasVisual)){q.hasVisual=r.visual}i(q.dom.select("table,a",u),function(x){var s;switch(x.nodeName){case"TABLE":s=q.dom.getAttrib(x,"border");if(!s||s=="0"){if(q.hasVisual){q.dom.addClass(x,r.visual_table_class)}else{q.dom.removeClass(x,r.visual_table_class)}}return;case"A":s=q.dom.getAttrib(x,"name");if(s){if(q.hasVisual){q.dom.addClass(x,"mceItemAnchor")}else{q.dom.removeClass(x,"mceItemAnchor")}}return}});q.onVisualAid.dispatch(q,u,q.hasVisual)},remove:function(){var q=this,r=q.getContainer();q.removed=1;q.hide();q.execCallback("remove_instance_callback",q);q.onRemove.dispatch(q);q.onExecCommand.listeners=[];m.remove(q);o.remove(r)},destroy:function(r){var q=this;if(q.destroyed){return}if(!r){m.removeUnload(q.destroy);tinyMCE.onBeforeUnload.remove(q._beforeUnload);if(q.theme&&q.theme.destroy){q.theme.destroy()}q.controlManager.destroy();q.selection.destroy();q.dom.destroy();if(!q.settings.content_editable){j.clear(q.getWin());j.clear(q.getDoc())}j.clear(q.getBody());j.clear(q.formElement)}if(q.formElement){q.formElement.submit=q.formElement._mceOldSubmit;q.formElement._mceOldSubmit=null}q.contentAreaContainer=q.formElement=q.container=q.settings.content_element=q.bodyElement=q.contentDocument=q.contentWindow=null;if(q.selection){q.selection=q.selection.win=q.selection.dom=q.selection.dom.doc=null}q.destroyed=1},_addEvents:function(){var C=this,u,D=C.settings,r=C.dom,y={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function q(E,F){var s=E.type;if(C.removed){return}if(C.onEvent.dispatch(C,E,F)!==false){C[y[E.fakeType||E.type]].dispatch(C,E,F)}}i(y,function(E,s){switch(s){case"contextmenu":r.bind(C.getDoc(),s,q);break;case"paste":r.bind(C.getBody(),s,function(F){q(F)});break;case"submit":case"reset":r.bind(C.getElement().form||o.getParent(C.id,"form"),s,q);break;default:r.bind(D.content_editable?C.getBody():C.getDoc(),s,q)}});r.bind(D.content_editable?C.getBody():(a?C.getDoc():C.getWin()),"focus",function(s){C.focus(true)});if(m.isGecko){r.bind(C.getDoc(),"DOMNodeInserted",function(E){var s;E=E.target;if(E.nodeType===1&&E.nodeName==="IMG"&&(s=E.getAttribute("data-mce-src"))){E.src=C.documentBaseURI.toAbsolute(s)}})}if(a){function v(){var F=this,H=F.getDoc(),G=F.settings;if(a&&!G.readonly){if(F._isHidden()){try{if(!G.content_editable){H.designMode="On"}}catch(E){}}try{H.execCommand("styleWithCSS",0,false)}catch(E){if(!F._isHidden()){try{H.execCommand("useCSS",0,true)}catch(E){}}}if(!G.table_inline_editing){try{H.execCommand("enableInlineTableEditing",false,false)}catch(E){}}if(!G.object_resizing){try{H.execCommand("enableObjectResizing",false,false)}catch(E){}}}}C.onBeforeExecCommand.add(v);C.onMouseDown.add(v)}if(m.isWebKit){C.onClick.add(function(s,E){E=E.target;if(E.nodeName=="IMG"||(E.nodeName=="A"&&r.hasClass(E,"mceItemAnchor"))){C.selection.getSel().setBaseAndExtent(E,0,E,1);C.nodeChanged()}})}C.onMouseUp.add(C.nodeChanged);C.onKeyUp.add(function(s,E){var F=E.keyCode;if((F>=33&&F<=36)||(F>=37&&F<=40)||F==13||F==45||F==46||F==8||(m.isMac&&(F==91||F==93))||E.ctrlKey){C.nodeChanged()}});C.onReset.add(function(){C.setContent(C.startContent,{format:"raw"})});if(D.custom_shortcuts){if(D.custom_undo_redo_keyboard_shortcuts){C.addShortcut("ctrl+z",C.getLang("undo_desc"),"Undo");C.addShortcut("ctrl+y",C.getLang("redo_desc"),"Redo")}C.addShortcut("ctrl+b",C.getLang("bold_desc"),"Bold");C.addShortcut("ctrl+i",C.getLang("italic_desc"),"Italic");C.addShortcut("ctrl+u",C.getLang("underline_desc"),"Underline");for(u=1;u<=6;u++){C.addShortcut("ctrl+"+u,"",["FormatBlock",false,"h"+u])}C.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);C.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);C.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function x(E){var s=null;if(!E.altKey&&!E.ctrlKey&&!E.metaKey){return s}i(C.shortcuts,function(F){if(m.isMac&&F.ctrl!=E.metaKey){return}else{if(!m.isMac&&F.ctrl!=E.ctrlKey){return}}if(F.alt!=E.altKey){return}if(F.shift!=E.shiftKey){return}if(E.keyCode==F.keyCode||(E.charCode&&E.charCode==F.charCode)){s=F;return false}});return s}C.onKeyUp.add(function(s,E){var F=x(E);if(F){return j.cancel(E)}});C.onKeyPress.add(function(s,E){var F=x(E);if(F){return j.cancel(E)}});C.onKeyDown.add(function(s,E){var F=x(E);if(F){F.func.call(F.scope);return j.cancel(E)}})}if(m.isIE){r.bind(C.getDoc(),"controlselect",function(F){var E=C.resizeInfo,s;F=F.target;if(F.nodeName!=="IMG"){return}if(E){r.unbind(E.node,E.ev,E.cb)}if(!r.hasClass(F,"mceItemNoResize")){ev="resizeend";s=r.bind(F,ev,function(H){var G;H=H.target;if(G=r.getStyle(H,"width")){r.setAttrib(H,"width",G.replace(/[^0-9%]+/g,""));r.setStyle(H,"width","")}if(G=r.getStyle(H,"height")){r.setAttrib(H,"height",G.replace(/[^0-9%]+/g,""));r.setStyle(H,"height","")}})}else{ev="resizestart";s=r.bind(F,"resizestart",j.cancel,j)}E=C.resizeInfo={node:F,ev:ev,cb:s}});C.onKeyDown.add(function(s,F){var E;switch(F.keyCode){case 8:E=C.getDoc().selection;if(E.createRange&&E.createRange().item){s.dom.remove(E.createRange().item(0));return j.cancel(F)}}})}if(m.isOpera){C.onClick.add(function(s,E){j.prevent(E)})}if(D.custom_undo_redo){function z(){C.undoManager.typing=false;C.undoManager.add()}r.bind(C.getDoc(),"focusout",function(s){if(!C.removed&&C.undoManager.typing){z()}});C.dom.bind(C.dom.getRoot(),"dragend",function(s){z()});C.onKeyUp.add(function(E,H){var s,G,F;if(b&&H.keyCode==8){s=C.selection.getRng();if(s.parentElement){G=s.parentElement();F=C.selection.getBookmark();G.innerHTML=G.innerHTML;C.selection.moveToBookmark(F)}}if((H.keyCode>=33&&H.keyCode<=36)||(H.keyCode>=37&&H.keyCode<=40)||H.keyCode==13||H.keyCode==45||H.ctrlKey){z()}});C.onKeyDown.add(function(E,J){var s,H,G,I=J.keyCode;if(b&&I==46){s=C.selection.getRng();if(s.parentElement){H=s.parentElement();if(!C.undoManager.typing){C.undoManager.beforeChange();C.undoManager.typing=true;C.undoManager.add()}if(J.ctrlKey){s.moveEnd("word",1);s.select()}C.selection.getSel().clear();if(s.parentElement()==H){G=C.selection.getBookmark();try{H.innerHTML=H.innerHTML}catch(F){}C.selection.moveToBookmark(G)}J.preventDefault();return}}if((I>=33&&I<=36)||(I>=37&&I<=40)||I==13||I==45){if(m.isIE&&I==13){C.undoManager.beforeChange()}if(C.undoManager.typing){z()}return}if((I<16||I>20)&&I!=224&&I!=91&&!C.undoManager.typing){C.undoManager.beforeChange();C.undoManager.add();C.undoManager.typing=true}});C.onMouseDown.add(function(){if(C.undoManager.typing){z()}})}if(m.isGecko){function B(){var s=C.dom.getAttribs(C.selection.getStart().cloneNode(false));return function(){var E=C.selection.getStart();C.dom.removeAllAttribs(E);i(s,function(F){E.setAttributeNode(F.cloneNode(true))})}}function A(){var E=C.selection;return !E.isCollapsed()&&E.getStart()!=E.getEnd()}C.onKeyPress.add(function(s,F){var E;if((F.keyCode==8||F.keyCode==46)&&A()){E=B();C.getDoc().execCommand("delete",false,null);E();return j.cancel(F)}});C.dom.bind(C.getDoc(),"cut",function(E){var s;if(A()){s=B();C.onKeyUp.addToTop(j.cancel,j);setTimeout(function(){s();C.onKeyUp.remove(j.cancel,j)},0)}})}},_isHidden:function(){var q;if(!a){return 0}q=this.selection.getSel();return(!q||!q.rangeCount||q.rangeCount==0)}})})(tinymce);(function(c){var d=c.each,e,a=true,b=false;c.EditorCommands=function(o){var l=o.dom,q=o.selection,j={state:{},exec:{},value:{}},k=o.settings,p;function r(A,z,y){var x;A=A.toLowerCase();if(x=j.exec[A]){x(A,z,y);return a}return b}function m(y){var x;y=y.toLowerCase();if(x=j.state[y]){return x(y)}return -1}function h(y){var x;y=y.toLowerCase();if(x=j.value[y]){return x(y)}return b}function v(x,y){y=y||"exec";d(x,function(A,z){d(z.toLowerCase().split(","),function(B){j[y][B]=A})})}c.extend(this,{execCommand:r,queryCommandState:m,queryCommandValue:h,addCommands:v});function f(z,y,x){if(y===e){y=b}if(x===e){x=null}return o.getDoc().execCommand(z,y,x)}function u(x){return o.formatter.match(x)}function s(x,y){o.formatter.toggle(x,y?{value:y}:e)}function i(x){p=q.getBookmark(x)}function g(){q.moveToBookmark(p)}v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},"Cut,Copy,Paste":function(A){var z=o.getDoc(),x;try{f(A)}catch(y){x=a}if(x||!z.queryCommandSupported(A)){if(c.isGecko){o.windowManager.confirm(o.getLang("clipboard_msg"),function(B){if(B){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{o.windowManager.alert(o.getLang("clipboard_no_support"))}}},unlink:function(x){if(q.isCollapsed()){q.select(q.getNode())}f(x);q.collapse(b)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(x){var y=x.substring(7);d("left,center,right,full".split(","),function(z){if(y!=z){o.formatter.remove("align"+z)}});s("align"+y);r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(z){var x,y;f(z);x=l.getParent(q.getNode(),"ol,ul");if(x){y=x.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(y.nodeName)){i();l.split(y,x);g()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(x){s(x)},"ForeColor,HiliteColor,FontName":function(z,y,x){s(z,x)},FontSize:function(A,z,y){var x,B;if(y>=1&&y<=7){B=c.explode(k.font_size_style_values);x=c.explode(k.font_size_classes);if(x){y=x[y-1]||y}else{y=B[y-1]||y}}s(A,y)},RemoveFormat:function(x){o.formatter.remove(x)},mceBlockQuote:function(x){s("blockquote")},FormatBlock:function(z,y,x){return s(x||"p")},mceCleanup:function(){var x=q.getBookmark();o.setContent(o.getContent({cleanup:a}),{cleanup:a});q.moveToBookmark(x)},mceRemoveNode:function(A,z,y){var x=y||q.getNode();if(x!=o.getBody()){i();o.dom.remove(x,a);g()}},mceSelectNodeDepth:function(A,z,y){var x=0;l.getParent(q.getNode(),function(B){if(B.nodeType==1&&x++==y){q.select(B);return b}},o.getBody())},mceSelectNode:function(z,y,x){q.select(x)},mceInsertContent:function(B,F,G){var E,x,z,H,A,x,C,I,D;function y(J,L){var K,M=new c.dom.TreeWalker(J,L);while((K=M.current())){if((K.nodeType==3&&c.trim(K.nodeValue).length)||K.nodeName=="BR"||K.nodeName=="IMG"){return K}M.prev()}}D={content:G,format:"html"};q.onBeforeSetContent.dispatch(q,D);G=D.content;if(G.indexOf("{$caret}")==-1){G+="{$caret}"}q.setContent('<span id="__mce">\uFEFF</span>',{no_events:false});l.setOuterHTML("__mce",G.replace(/\{\$caret\}/,'<span data-mce-type="bookmark" id="__mce">\uFEFF</span>'));E=l.select("#__mce")[0];z=l.getRoot();if(E.previousSibling&&l.isBlock(E.previousSibling)||E.parentNode==z){A=y(E.previousSibling,z);if(A){if(A.nodeName=="BR"){A.parentNode.insertBefore(E,A)}else{l.insertAfter(E,A)}}}while(E){if(E===z){l.setOuterHTML(H,new c.html.Serializer({},o.schema).serialize(new c.html.DomParser({remove_trailing_brs:true},o.schema).parse(l.getOuterHTML(H))));break}H=E;E=E.parentNode}E=l.select("#__mce")[0];if(E){A=y(E.previousSibling,z);l.remove(E);if(A){x=l.createRng();if(A.nodeType==3){x.setStart(A,A.length);x.setEnd(A,A.length)}else{if(A.nodeName=="BR"){x.setStartBefore(A);x.setEndBefore(A)}else{x.setStartAfter(A);x.setEndAfter(A)}}q.setRng(x);if(!c.isIE){A=l.create("span",null,"\u00a0");x.insertNode(A);C=l.getRect(A);I=l.getViewPort(o.getWin());if((C.y>I.y+I.h||C.y<I.y)||(C.x>I.x+I.w||C.x<I.x)){o.getBody().scrollLeft=C.x;o.getBody().scrollTop=C.y}l.remove(A)}q.collapse(true)}}q.onSetContent.dispatch(q,D);o.addVisual()},mceInsertRawHTML:function(z,y,x){q.setContent("tiny_mce_marker");o.setContent(o.getContent().replace(/tiny_mce_marker/g,function(){return x}))},mceSetContent:function(z,y,x){o.setContent(x)},"Indent,Outdent":function(A){var y,x,z;y=k.indentation;x=/[a-z%]+$/i.exec(y);y=parseInt(y);if(!m("InsertUnorderedList")&&!m("InsertOrderedList")){d(q.getSelectedBlocks(),function(B){if(A=="outdent"){z=Math.max(0,parseInt(B.style.paddingLeft||0)-y);l.setStyle(B,"paddingLeft",z?z+x:"")}else{l.setStyle(B,"paddingLeft",(parseInt(B.style.paddingLeft||0)+y)+x)}})}else{f(A)}},mceRepaint:function(){var y;if(c.isGecko){try{i(a);if(q.getSel()){q.getSel().selectAllChildren(o.getBody())}q.collapse(a);g()}catch(x){}}},mceToggleFormat:function(z,y,x){o.formatter.toggle(x)},InsertHorizontalRule:function(){o.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual;o.addVisual()},mceReplaceContent:function(z,y,x){o.execCommand("mceInsertContent",false,q.setContent(x.replace(/\{\$selection\}/g,q.getContent({format:"text"}))))},mceInsertLink:function(C,B,A){var z=l.getParent(q.getNode(),"a"),y,x;if(c.is(A,"string")){A={href:A}}A.href=A.href.replace(" ","%20");if(!z){if(c.isWebKit){y=l.getParent(q.getNode(),"img");if(y){x=y.style.cssFloat;y.style.cssFloat=null}}f("CreateLink",b,"javascript:mctmp(0);");if(x){y.style.cssFloat=x}d(l.select("a[href='javascript:mctmp(0);']"),function(D){l.setAttribs(D,A)})}else{if(A.href){l.setAttribs(z,A)}else{o.dom.remove(z,a)}}},selectAll:function(){var y=l.getRoot(),x=l.createRng();x.setStart(y,0);x.setEnd(y,y.childNodes.length);o.selection.setRng(x)}});v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(x){return u("align"+x.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(x){return u(x)},mceBlockQuote:function(){return u("blockquote")},Outdent:function(){var x;if(k.inline_styles){if((x=l.getParent(q.getStart(),l.isBlock))&&parseInt(x.style.paddingLeft)>0){return a}if((x=l.getParent(q.getEnd(),l.isBlock))&&parseInt(x.style.paddingLeft)>0){return a}}return m("InsertUnorderedList")||m("InsertOrderedList")||(!k.inline_styles&&!!l.getParent(q.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(x){return l.getParent(q.getNode(),x=="insertunorderedlist"?"UL":"OL")}},"state");v({"FontSize,FontName":function(z){var y=0,x;if(x=l.getParent(q.getNode(),"span")){if(z=="fontsize"){y=x.style.fontSize}else{y=x.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return y}},"value");if(k.custom_undo_redo){v({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}})}}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(e){var c,d=0,g=[];function f(){return b.trim(e.getContent({format:"raw",no_events:1}))}return c={typing:false,onAdd:new a(c),onUndo:new a(c),onRedo:new a(c),beforeChange:function(){if(g[d]){g[d].beforeBookmark=e.selection.getBookmark(2,true)}},add:function(l){var h,j=e.settings,k;l=l||{};l.content=f();k=g[d];if(k&&k.content==l.content){return null}if(j.custom_undo_redo_levels){if(g.length>j.custom_undo_redo_levels){for(h=0;h<g.length-1;h++){g[h]=g[h+1]}g.length--;d=g.length}}l.bookmark=e.selection.getBookmark(2,true);if(d<g.length-1){g.length=d+1}g.push(l);d=g.length-1;c.onAdd.dispatch(c,l);e.isNotDirty=0;return l},undo:function(){var j,h;if(c.typing){c.add();c.typing=false}if(d>0){j=g[--d];e.setContent(j.content,{format:"raw"});e.selection.moveToBookmark(j.beforeBookmark);c.onUndo.dispatch(c,j)}return j},redo:function(){var h;if(d<g.length-1){h=g[++d];e.setContent(h.content,{format:"raw"});e.selection.moveToBookmark(h.bookmark);c.onRedo.dispatch(c,h)}return h},clear:function(){g=[];d=0;c.typing=false},hasUndo:function(){return d>0||this.typing},hasRedo:function(){return d<g.length-1&&!this.typing}}}})(tinymce);(function(m){var k=m.dom.Event,c=m.isIE,a=m.isGecko,b=m.isOpera,j=m.each,i=m.extend,d=true,h=false;function l(q){var r,p,o;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(q.nodeName)){if(r){p=q.cloneNode(false);p.appendChild(r);r=p}else{r=o=q.cloneNode(false)}r.removeAttribute("id")}}while(q=q.parentNode);if(r){return{wrapper:r,inner:o}}}function g(p,q){var o=q.ownerDocument.createRange();o.setStart(p.endContainer,p.endOffset);o.setEndAfter(q);return o.cloneContents().textContent.length==0}function f(o){o=o.innerHTML;o=o.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");o=o.replace(/<[^>]+>/g,"");return o.replace(/[ \u00a0\t\r\n]+/g,"")==""}function e(q,s,o){var p,r;if(f(o)){p=s.getParent(o,"ul,ol");if(!s.getParent(p.parentNode,"ul,ol")){s.split(p,o);r=s.create("p",0,'<br data-mce-bogus="1" />');s.replace(r,o);q.select(r,1)}return h}return d}m.create("tinymce.ForceBlocks",{ForceBlocks:function(o){var p=this,q=o.settings,r;p.editor=o;p.dom=o.dom;r=(q.forced_root_block||"p").toLowerCase();q.element=r.toUpperCase();o.onPreInit.add(p.setup,p);if(q.forced_root_block){o.onInit.add(p.forceRoots,p);o.onSetContent.add(p.forceRoots,p);o.onBeforeGetContent.add(p.forceRoots,p);o.onExecCommand.add(function(s,u){if(u=="mceInsertContent"){p.forceRoots();s.nodeChanged()}})}},setup:function(){var p=this,o=p.editor,r=o.settings,v=o.dom,q=o.selection;if(r.forced_root_block){o.onBeforeExecCommand.add(p.forceRoots,p);o.onKeyUp.add(p.forceRoots,p);o.onPreProcess.add(p.forceRoots,p)}if(r.force_br_newlines){if(c){o.onKeyPress.add(function(s,x){var y;if(x.keyCode==13&&q.getNode().nodeName!="LI"){q.setContent('<br id="__" /> ',{format:"raw"});y=v.get("__");y.removeAttribute("id");q.select(y);q.collapse();return k.cancel(x)}})}}if(r.force_p_newlines){if(!c){o.onKeyPress.add(function(s,x){if(x.keyCode==13&&!x.shiftKey&&!p.insertPara(x)){k.cancel(x)}})}else{m.addUnload(function(){p._previousFormats=0});o.onKeyPress.add(function(s,x){p._previousFormats=0;if(x.keyCode==13&&!x.shiftKey&&s.selection.isCollapsed()&&r.keep_styles){p._previousFormats=l(s.selection.getStart())}});o.onKeyUp.add(function(x,z){if(z.keyCode==13&&!z.shiftKey){var y=x.selection.getStart(),s=p._previousFormats;if(!y.hasChildNodes()&&s){y=v.getParent(y,v.isBlock);if(y&&y.nodeName!="LI"){y.innerHTML="";if(p._previousFormats){y.appendChild(s.wrapper);s.inner.innerHTML="\uFEFF"}else{y.innerHTML="\uFEFF"}q.select(y,1);q.collapse(true);x.getDoc().execCommand("Delete",false,null);p._previousFormats=0}}}})}if(a){o.onKeyDown.add(function(s,x){if((x.keyCode==8||x.keyCode==46)&&!x.shiftKey){p.backspaceDelete(x,x.keyCode==8)}})}}if(m.isWebKit){function u(x){var s=q.getRng(),y,B=v.create("div",null," "),A,z=v.getViewPort(x.getWin()).h;s.insertNode(y=v.create("br"));s.setStartAfter(y);s.setEndAfter(y);q.setRng(s);if(q.getSel().focusNode==y.previousSibling){q.select(v.insertAfter(v.doc.createTextNode("\u00a0"),y));q.collapse(d)}v.insertAfter(B,y);A=v.getPos(B).y;v.remove(B);if(A>z){x.getWin().scrollTo(0,A)}}o.onKeyPress.add(function(s,x){if(x.keyCode==13&&(x.shiftKey||(r.force_br_newlines&&!v.getParent(q.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul")))){u(s);k.cancel(x)}})}if(c){if(r.element!="P"){o.onKeyPress.add(function(s,x){p.lastElm=q.getNode().nodeName});o.onKeyUp.add(function(x,y){var A,z=q.getNode(),s=x.getBody();if(s.childNodes.length===1&&z.nodeName=="P"){z=v.rename(z,r.element);q.select(z);q.collapse();x.nodeChanged()}else{if(y.keyCode==13&&!y.shiftKey&&p.lastElm!="P"){A=v.getParent(z,"p");if(A){v.rename(A,r.element);x.nodeChanged()}}}})}}},find:function(v,q,r){var p=this.editor,o=p.getDoc().createTreeWalker(v,4,null,h),u=-1;while(v=o.nextNode()){u++;if(q==0&&v==r){return u}if(q==1&&u==r){return v}}return -1},forceRoots:function(x,I){var z=this,x=z.editor,M=x.getBody(),J=x.getDoc(),P=x.selection,A=P.getSel(),B=P.getRng(),N=-2,v,G,o,p,K=-16777215;var L,q,O,F,C,u=M.childNodes,E,D,y;for(E=u.length-1;E>=0;E--){L=u[E];if(L.nodeType===1&&L.getAttribute("data-mce-type")){q=null;continue}if(L.nodeType===3||(!z.dom.isBlock(L)&&L.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(L.nodeName))){if(!q){if(L.nodeType!=3||/[^\s]/g.test(L.nodeValue)){if(N==-2&&B){if(!c||B.setStart){if(B.startContainer.nodeType==1&&(D=B.startContainer.childNodes[B.startOffset])&&D.nodeType==1){y=D.getAttribute("id");D.setAttribute("id","__mce")}else{if(x.dom.getParent(B.startContainer,function(r){return r===M})){G=B.startOffset;o=B.endOffset;N=z.find(M,0,B.startContainer);v=z.find(M,0,B.endContainer)}}}else{if(B.item){p=J.body.createTextRange();p.moveToElementText(B.item(0));B=p}p=J.body.createTextRange();p.moveToElementText(M);p.collapse(1);O=p.move("character",K)*-1;p=B.duplicate();p.collapse(1);F=p.move("character",K)*-1;p=B.duplicate();p.collapse(0);C=(p.move("character",K)*-1)-F;N=F-O;v=C}}q=x.dom.create(x.settings.forced_root_block);L.parentNode.replaceChild(q,L);q.appendChild(L)}}else{if(q.hasChildNodes()){q.insertBefore(L,q.firstChild)}else{q.appendChild(L)}}}else{q=null}}if(N!=-2){if(!c||B.setStart){q=M.getElementsByTagName(x.settings.element)[0];B=J.createRange();if(N!=-1){B.setStart(z.find(M,1,N),G)}else{B.setStart(q,0)}if(v!=-1){B.setEnd(z.find(M,1,v),o)}else{B.setEnd(q,0)}if(A){A.removeAllRanges();A.addRange(B)}}else{try{B=A.createRange();B.moveToElementText(M);B.collapse(1);B.moveStart("character",N);B.moveEnd("character",v);B.select()}catch(H){}}}else{if((!c||B.setStart)&&(D=x.dom.get("__mce"))){if(y){D.setAttribute("id",y)}else{D.removeAttribute("id")}B=J.createRange();B.setStartBefore(D);B.setEndBefore(D);P.setRng(B)}}},getParentBlock:function(p){var o=this.dom;return o.getParent(p,o.isBlock)},insertPara:function(S){var G=this,x=G.editor,O=x.dom,T=x.getDoc(),X=x.settings,H=x.selection.getSel(),I=H.getRangeAt(0),W=T.body;var L,M,J,Q,P,u,p,v,A,o,E,V,q,z,K,N=O.getViewPort(x.getWin()),D,F,C;x.undoManager.beforeChange();L=T.createRange();L.setStart(H.anchorNode,H.anchorOffset);L.collapse(d);M=T.createRange();M.setStart(H.focusNode,H.focusOffset);M.collapse(d);J=L.compareBoundaryPoints(L.START_TO_END,M)<0;Q=J?H.anchorNode:H.focusNode;P=J?H.anchorOffset:H.focusOffset;u=J?H.focusNode:H.anchorNode;p=J?H.focusOffset:H.anchorOffset;if(Q===u&&/^(TD|TH)$/.test(Q.nodeName)){if(Q.firstChild.nodeName=="BR"){O.remove(Q.firstChild)}if(Q.childNodes.length==0){x.dom.add(Q,X.element,null,"<br />");V=x.dom.add(Q,X.element,null,"<br />")}else{K=Q.innerHTML;Q.innerHTML="";x.dom.add(Q,X.element,null,K);V=x.dom.add(Q,X.element,null,"<br />")}I=T.createRange();I.selectNodeContents(V);I.collapse(1);x.selection.setRng(I);return h}if(Q==W&&u==W&&W.firstChild&&x.dom.isBlock(W.firstChild)){Q=u=Q.firstChild;P=p=0;L=T.createRange();L.setStart(Q,0);M=T.createRange();M.setStart(u,0)}Q=Q.nodeName=="HTML"?T.body:Q;Q=Q.nodeName=="BODY"?Q.firstChild:Q;u=u.nodeName=="HTML"?T.body:u;u=u.nodeName=="BODY"?u.firstChild:u;v=G.getParentBlock(Q);A=G.getParentBlock(u);o=v?v.nodeName:X.element;if(K=G.dom.getParent(v,"li,pre")){if(K.nodeName=="LI"){return e(x.selection,G.dom,K)}return d}if(v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(O.getStyle(v,"position",1)))){o=X.element;v=null}if(A&&(A.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(O.getStyle(v,"position",1)))){o=X.element;A=null}if(/(TD|TABLE|TH|CAPTION)/.test(o)||(v&&o=="DIV"&&/left|right/gi.test(O.getStyle(v,"float",1)))){o=X.element;v=A=null}E=(v&&v.nodeName==o)?v.cloneNode(0):x.dom.create(o);V=(A&&A.nodeName==o)?A.cloneNode(0):x.dom.create(o);V.removeAttribute("id");if(/^(H[1-6])$/.test(o)&&g(I,v)){V=x.dom.create(X.element)}K=q=Q;do{if(K==W||K.nodeType==9||G.dom.isBlock(K)||/(TD|TABLE|TH|CAPTION)/.test(K.nodeName)){break}q=K}while((K=K.previousSibling?K.previousSibling:K.parentNode));K=z=u;do{if(K==W||K.nodeType==9||G.dom.isBlock(K)||/(TD|TABLE|TH|CAPTION)/.test(K.nodeName)){break}z=K}while((K=K.nextSibling?K.nextSibling:K.parentNode));if(q.nodeName==o){L.setStart(q,0)}else{L.setStartBefore(q)}L.setEnd(Q,P);E.appendChild(L.cloneContents()||T.createTextNode(""));try{M.setEndAfter(z)}catch(R){}M.setStart(u,p);V.appendChild(M.cloneContents()||T.createTextNode(""));I=T.createRange();if(!q.previousSibling&&q.parentNode.nodeName==o){I.setStartBefore(q.parentNode)}else{if(L.startContainer.nodeName==o&&L.startOffset==0){I.setStartBefore(L.startContainer)}else{I.setStart(L.startContainer,L.startOffset)}}if(!z.nextSibling&&z.parentNode.nodeName==o){I.setEndAfter(z.parentNode)}else{I.setEnd(M.endContainer,M.endOffset)}I.deleteContents();if(b){x.getWin().scrollTo(0,N.y)}if(E.firstChild&&E.firstChild.nodeName==o){E.innerHTML=E.firstChild.innerHTML}if(V.firstChild&&V.firstChild.nodeName==o){V.innerHTML=V.firstChild.innerHTML}if(f(E)){E.innerHTML="<br />"}function U(Y,s){var r=[],aa,Z,y;Y.innerHTML="";if(X.keep_styles){Z=s;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(Z.nodeName)){aa=Z.cloneNode(h);O.setAttrib(aa,"id","");r.push(aa)}}while(Z=Z.parentNode)}if(r.length>0){for(y=r.length-1,aa=Y;y>=0;y--){aa=aa.appendChild(r[y])}r[0].innerHTML=b?"\u00a0":"<br />";return r[0]}else{Y.innerHTML=b?"\u00a0":"<br />"}}if(f(V)){C=U(V,u)}if(b&&parseFloat(opera.version())<9.5){I.insertNode(E);I.insertNode(V)}else{I.insertNode(V);I.insertNode(E)}V.normalize();E.normalize();function B(r){return T.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,h).nextNode()||r}I=T.createRange();I.selectNodeContents(a?B(C||V):C||V);I.collapse(1);H.removeAllRanges();H.addRange(I);D=x.dom.getPos(V).y;if(D<N.y||D+25>N.y+N.h){x.getWin().scrollTo(0,D<N.y?D:D-N.h+25)}x.undoManager.add();return h},backspaceDelete:function(v,C){var D=this,u=D.editor,z=u.getBody(),s=u.dom,q,x=u.selection,p=x.getRng(),y=p.startContainer,q,A,B,o;if(!C&&p.collapsed&&y.nodeType==1&&p.startOffset==y.childNodes.length){o=new m.dom.TreeWalker(y.lastChild,y);for(q=y.lastChild;q;q=o.prev()){if(q.nodeType==3){p.setStart(q,q.nodeValue.length);p.collapse(true);x.setRng(p);return}}}if(y&&u.dom.isBlock(y)&&!/^(TD|TH)$/.test(y.nodeName)&&C){if(y.childNodes.length==0||(y.childNodes.length==1&&y.firstChild.nodeName=="BR")){q=y;while((q=q.previousSibling)&&!u.dom.isBlock(q)){}if(q){if(y!=z.firstChild){A=u.dom.doc.createTreeWalker(q,NodeFilter.SHOW_TEXT,null,h);while(B=A.nextNode()){q=B}p=u.getDoc().createRange();p.setStart(q,q.nodeValue?q.nodeValue.length:0);p.setEnd(q,q.nodeValue?q.nodeValue.length:0);x.setRng(p);u.dom.remove(y)}return k.cancel(v)}}}}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each,e=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new c.util.Dispatcher(h);h.onPostRender=new c.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(i){var h,g=this,f=g.editor;d(f.plugins,function(j){if(j.createControl){h=j.createControl(i,g);if(h){return false}}});switch(i){case"|":case"separator":return g.createSeparator()}if(!h&&f.buttons&&(h=f.buttons[i])){return g.createButton(i,h)}return g.add(h)},createDropMenu:function(f,o,h){var m=this,i=m.editor,j,g,k,l;o=e({"class":"mceDropDown",constrain:i.settings.constrain_menus},o);o["class"]=o["class"]+" "+i.getParam("skin")+"Skin";if(k=i.getParam("skin_variant")){o["class"]+=" "+i.getParam("skin")+"Skin"+k.substring(0,1).toUpperCase()+k.substring(1)}f=m.prefix+f;l=h||m._cls.dropmenu||c.ui.DropMenu;j=m.controls[f]=new l(f,o);j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(s){if(p.cmd){i.execCommand(p.cmd,p.ui||false,p.value)}}}});i.onRemove.add(function(){j.destroy()});if(c.isIE){j.onShowMenu.add(function(){i.focus();g=i.selection.getBookmark(1)});j.onHideMenu.add(function(){if(g){i.selection.moveToBookmark(g);g=0}})}return m.add(j)},createListBox:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onselect){i.onselect=function(o){g.execCommand(i.cmd,i.ui||false,o||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;if(g.settings.use_native_selects){k=new c.ui.NativeListBox(m,i)}else{f=l||h._cls.listbox||c.ui.ListBox;k=new f(m,i,g)}h.controls[m]=k;if(c.isWebKit){k.onPostRender.add(function(p,o){a.add(o,"mousedown",function(){g.bookmark=g.selection.getBookmark(1)});a.add(o,"focus",function(){g.selection.moveToBookmark(g.bookmark);g.bookmark=null})})}if(k.hideMenu){g.onMouseDown.add(k.hideMenu,k)}return h.add(k)},createButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.label=g.translate(i.label);i.scope=i.scope||g;if(!i.onclick&&!i.menu_button){i.onclick=function(){g.execCommand(i.cmd,i.ui||false,i.value)}}i=e({title:i.title,"class":"mce_"+m,unavailable_prefix:g.getLang("unavailable",""),scope:i.scope,control_manager:h},i);m=h.prefix+m;if(i.menu_button){f=l||h._cls.menubutton||c.ui.MenuButton;k=new f(m,i,g);g.onMouseDown.add(k.hideMenu,k)}else{f=h._cls.button||c.ui.Button;k=new f(m,i)}return h.add(k)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onclick){i.onclick=function(o){g.execCommand(i.cmd,i.ui||false,o||i.value)}}if(!i.onselect){i.onselect=function(o){g.execCommand(i.cmd,i.ui||false,o||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;f=l||h._cls.splitbutton||c.ui.SplitButton;k=h.add(new f(m,i,g));g.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(f,o,h){var l=this,j=l.editor,i,k,m,g;if(l.get(f)){return null}o.title=j.translate(o.title);o.scope=o.scope||j;if(!o.onclick){o.onclick=function(p){if(c.isIE){g=j.selection.getBookmark(1)}j.execCommand(o.cmd,o.ui||false,p||o.value)}}if(!o.onselect){o.onselect=function(p){j.execCommand(o.cmd,o.ui||false,p||o.value)}}o=e({title:o.title,"class":"mce_"+f,menu_class:j.getParam("skin")+"Skin",scope:o.scope,more_colors_title:j.getLang("more_colors")},o);f=l.prefix+f;m=h||l._cls.colorsplitbutton||c.ui.ColorSplitButton;k=new m(f,o,j);j.onMouseDown.add(k.hideMenu,k);j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return l.add(k)},createToolbar:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||g._cls.toolbar||c.ui.Toolbar;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createToolbarGroup:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||this._cls.toolbarGroup||c.ui.ToolbarGroup;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(A,h){var z=this,k="",o,m,i=z.editor.settings.dialog_type=="modal",r,q,j,g=d.DOM.getViewPort(),v;A=A||{};h=h||{};q=b?g.w:screen.width;j=b?g.h:screen.height;A.name=A.name||"mc_"+new Date().getTime();A.width=parseInt(A.width||320);A.height=parseInt(A.height||240);A.resizable=true;A.left=A.left||parseInt(q/2)-(A.width/2);A.top=A.top||parseInt(j/2)-(A.height/2);h.inline=false;h.mce_width=A.width;h.mce_height=A.height;h.mce_auto_focus=A.auto_focus;if(i){if(c){A.center=true;A.help=false;A.dialogWidth=A.width+"px";A.dialogHeight=A.height+"px";A.scroll=A.scrollbars||false}}e(A,function(p,f){if(d.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(c&&i){k+=(k?";":"")+f+":"+p}else{k+=(k?",":"")+f+"="+p}}});z.features=A;z.params=h;z.onOpen.dispatch(z,A,h);v=A.url||A.file;v=d._addVer(v);try{if(c&&i){r=1;window.showModalDialog(v,window,k)}else{r=window.open(v,A.name,k)}}catch(l){}if(!r){alert(z.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=d.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window;f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window;g.alert(i._decode(i.editor.getLang(h,h)));if(f){f.call(j||i)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return d.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){a.Formatter=function(X){var O={},Q=a.each,c=X.dom,r=X.selection,v=a.dom.TreeWalker,M=new a.dom.RangeUtils(c),d=X.schema.isValidChild,H=c.isBlock,l=X.settings.forced_root_block,u=c.nodeIndex,G="\uFEFF",e=/^(src|href|style)$/,U=false,D=true,q,R={apply:[],remove:[]};function B(Y){return Y instanceof Array}function m(Z,Y){return c.getParents(Z,Y,c.getRoot())}function b(Y){return Y.nodeType===1&&(Y.face==="mceinline"||Y.style.fontFamily==="mceinline")}function T(Y){return Y?O[Y]:O}function k(Y,Z){if(Y){if(typeof(Y)!=="string"){Q(Y,function(ab,aa){k(aa,ab)})}else{Z=Z.length?Z:[Z];Q(Z,function(aa){if(aa.deep===q){aa.deep=!aa.selector}if(aa.split===q){aa.split=!aa.selector||aa.inline}if(aa.remove===q&&aa.selector&&!aa.inline){aa.remove="none"}if(aa.selector&&aa.inline){aa.mixed=true;aa.block_expand=true}if(typeof(aa.classes)==="string"){aa.classes=aa.classes.split(/\s+/)}});O[Y]=Z}}}var i=function(Z){var Y;X.dom.getParent(Z,function(aa){Y=X.dom.getStyle(aa,"text-decoration");return Y&&Y!=="none"});return Y};var K=function(Y){var Z;if(Y.nodeType===1&&Y.parentNode&&Y.parentNode.nodeType===1){Z=i(Y.parentNode);if(X.dom.getStyle(Y,"color")&&Z){X.dom.setStyle(Y,"text-decoration",Z)}else{if(X.dom.getStyle(Y,"textdecoration")===Z){X.dom.setStyle(Y,"text-decoration",null)}}}};function V(aa,ah,ac){var ad=T(aa),ai=ad[0],ag,Z,af,ae=r.isCollapsed();function ab(am){var al=am.startContainer,ap=am.startOffset,ao,an;if(al.nodeType==1||al.nodeValue===""){al=al.nodeType==1?al.childNodes[ap]:al;if(al){ao=new v(al,al.parentNode);for(an=ao.current();an;an=ao.next()){if(an.nodeType==3&&!f(an)){am.setStart(an,0);break}}}}return am}function Y(am,al){al=al||ai;if(am){Q(al.styles,function(ao,an){c.setStyle(am,an,s(ao,ah))});Q(al.attributes,function(ao,an){c.setAttrib(am,an,s(ao,ah))});Q(al.classes,function(an){an=s(an,ah);if(!c.hasClass(am,an)){c.addClass(am,an)}})}}function aj(am){var al=[],ao,an;ao=ai.inline||ai.block;an=c.create(ao);Y(an);M.walk(am,function(ap){var aq;function ar(at){var aw=at.nodeName.toLowerCase(),av=at.parentNode.nodeName.toLowerCase(),au;if(g(aw,"br")){aq=0;if(ai.block){c.remove(at)}return}if(ai.wrapper&&z(at,aa,ah)){aq=0;return}if(ai.block&&!ai.wrapper&&I(aw)){at=c.rename(at,ao);Y(at);al.push(at);aq=0;return}if(ai.selector){Q(ad,function(ax){if("collapsed" in ax&&ax.collapsed!==ae){return}if(c.is(at,ax.selector)&&!b(at)){Y(at,ax);au=true}});if(!ai.inline||au){aq=0;return}}if(d(ao,aw)&&d(av,ao)&&!(at.nodeType===3&&at.nodeValue.length===1&&at.nodeValue.charCodeAt(0)===65279)){if(!aq){aq=an.cloneNode(U);at.parentNode.insertBefore(aq,at);al.push(aq)}aq.appendChild(at)}else{aq=0;Q(a.grep(at.childNodes),ar);aq=0}}Q(ap,ar)});if(ai.wrap_links===false){Q(al,function(ap){function aq(av){var au,at,ar;if(av.nodeName==="A"){at=an.cloneNode(U);al.push(at);ar=a.grep(av.childNodes);for(au=0;au<ar.length;au++){at.appendChild(ar[au])}av.appendChild(at)}Q(a.grep(av.childNodes),aq)}aq(ap)})}Q(al,function(ar){var ap;function at(av){var au=0;Q(av.childNodes,function(aw){if(!f(aw)&&!J(aw)){au++}});return au}function aq(au){var aw,av;Q(au.childNodes,function(ax){if(ax.nodeType==1&&!J(ax)&&!b(ax)){aw=ax;return U}});if(aw&&h(aw,ai)){av=aw.cloneNode(U);Y(av);c.replace(av,au,D);c.remove(aw,1)}return av||au}ap=at(ar);if((al.length>1||!H(ar))&&ap===0){c.remove(ar,1);return}if(ai.inline||ai.wrapper){if(!ai.exact&&ap===1){ar=aq(ar)}Q(ad,function(au){Q(c.select(au.inline,ar),function(aw){var av;if(au.wrap_links===false){av=aw.parentNode;do{if(av.nodeName==="A"){return}}while(av=av.parentNode)}W(au,ah,aw,au.exact?aw:null)})});if(z(ar.parentNode,aa,ah)){c.remove(ar,1);ar=0;return D}if(ai.merge_with_parents){c.getParent(ar.parentNode,function(au){if(z(au,aa,ah)){c.remove(ar,1);ar=0;return D}})}if(ar){ar=x(E(ar),ar);ar=x(ar,E(ar,D))}}})}if(ai){if(ac){Z=c.createRng();Z.setStartBefore(ac);Z.setEndAfter(ac);aj(p(Z,ad))}else{if(!ae||!ai.inline||c.select("td.mceSelected,th.mceSelected").length){var ak=X.selection.getNode();ag=r.getBookmark();aj(p(r.getRng(D),ad));if(ai.styles&&(ai.styles.color||ai.styles.textDecoration)){a.walk(ak,K,"childNodes");K(ak)}r.moveToBookmark(ag);r.setRng(ab(r.getRng(D)));X.nodeChanged()}else{S("apply",aa,ah)}}}}function C(aa,aj,ad){var ae=T(aa),al=ae[0],ai,ah,Z;function ac(ao){var an=ao.startContainer,au=ao.startOffset,at,ar,ap,aq;if(an.nodeType==3&&au>=an.nodeValue.length-1){an=an.parentNode;au=u(an)+1}if(an.nodeType==1){ap=an.childNodes;an=ap[Math.min(au,ap.length-1)];at=new v(an);if(au>ap.length-1){at.next()}for(ar=at.current();ar;ar=at.next()){if(ar.nodeType==3&&!f(ar)){aq=c.create("a",null,G);ar.parentNode.insertBefore(aq,ar);ao.setStart(ar,0);r.setRng(ao);c.remove(aq);return}}}}function ab(aq){var ap,ao,an;ap=a.grep(aq.childNodes);for(ao=0,an=ae.length;ao<an;ao++){if(W(ae[ao],aj,aq,aq)){break}}if(al.deep){for(ao=0,an=ap.length;ao<an;ao++){ab(ap[ao])}}}function af(an){var ao;Q(m(an.parentNode).reverse(),function(ap){var aq;if(!ao&&ap.id!="_start"&&ap.id!="_end"){aq=z(ap,aa,aj);if(aq&&aq.split!==false){ao=ap}}});return ao}function Y(aq,an,at,aw){var ax,av,au,ap,ar,ao;if(aq){ao=aq.parentNode;for(ax=an.parentNode;ax&&ax!=ao;ax=ax.parentNode){av=ax.cloneNode(U);for(ar=0;ar<ae.length;ar++){if(W(ae[ar],aj,av,av)){av=0;break}}if(av){if(au){av.appendChild(au)}if(!ap){ap=av}au=av}}if(aw&&(!al.mixed||!H(aq))){an=c.split(aq,an)}if(au){at.parentNode.insertBefore(au,at);ap.appendChild(at)}}return an}function ak(an){return Y(af(an),an,an,true)}function ag(ap){var ao=c.get(ap?"_start":"_end"),an=ao[ap?"firstChild":"lastChild"];if(J(an)){an=an[ap?"firstChild":"lastChild"]}c.remove(ao,true);return an}function am(an){var ao,ap;an=p(an,ae,D);if(al.split){ao=L(an,D);ap=L(an);if(ao!=ap){ao=P(ao,"span",{id:"_start","data-mce-type":"bookmark"});ap=P(ap,"span",{id:"_end","data-mce-type":"bookmark"});ak(ao);ak(ap);ao=ag(D);ap=ag()}else{ao=ap=ak(ao)}an.startContainer=ao.parentNode;an.startOffset=u(ao);an.endContainer=ap.parentNode;an.endOffset=u(ap)+1}M.walk(an,function(aq){Q(aq,function(ar){ab(ar);if(ar.nodeType===1&&X.dom.getStyle(ar,"text-decoration")==="underline"&&ar.parentNode&&i(ar.parentNode)==="underline"){W({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,ar)}})})}if(ad){Z=c.createRng();Z.setStartBefore(ad);Z.setEndAfter(ad);am(Z);return}if(!r.isCollapsed()||!al.inline||c.select("td.mceSelected,th.mceSelected").length){ai=r.getBookmark();am(r.getRng(D));r.moveToBookmark(ai);if(j(aa,aj,r.getStart())){ac(r.getRng(true))}X.nodeChanged()}else{S("remove",aa,aj)}}function F(Z,ab,aa){var Y=T(Z);if(j(Z,ab,aa)&&(!("toggle" in Y[0])||Y[0]["toggle"])){C(Z,ab,aa)}else{V(Z,ab,aa)}}function z(Z,Y,ae,ac){var aa=T(Y),af,ad,ab;function ag(ak,am,an){var aj,al,ah=am[an],ai;if(ah){if(ah.length===q){for(aj in ah){if(ah.hasOwnProperty(aj)){if(an==="attributes"){al=c.getAttrib(ak,aj)}else{al=N(ak,aj)}if(ac&&!al&&!am.exact){return}if((!ac||am.exact)&&!g(al,s(ah[aj],ae))){return}}}}else{for(ai=0;ai<ah.length;ai++){if(an==="attributes"?c.getAttrib(ak,ah[ai]):N(ak,ah[ai])){return am}}}}return am}if(aa&&Z){for(ad=0;ad<aa.length;ad++){af=aa[ad];if(h(Z,af)&&ag(Z,af,"attributes")&&ag(Z,af,"styles")){if(ab=af.classes){for(ad=0;ad<ab.length;ad++){if(!c.hasClass(Z,ab[ad])){return}}}return af}}}}function j(aa,ad,ac){var Z,ab;function Y(ae){ae=c.getParent(ae,function(af){return !!z(af,aa,ad,true)});return z(ae,aa,ad)}if(ac){return Y(ac)}if(r.isCollapsed()){for(ab=R.apply.length-1;ab>=0;ab--){if(R.apply[ab].name==aa){return true}}for(ab=R.remove.length-1;ab>=0;ab--){if(R.remove[ab].name==aa){return false}}return Y(r.getNode())}ac=r.getNode();if(Y(ac)){return D}Z=r.getStart();if(Z!=ac){if(Y(Z)){return D}}return U}function y(af,ae){var ac,ad=[],ab={},aa,Z,Y;if(r.isCollapsed()){for(Z=0;Z<af.length;Z++){for(aa=R.remove.length-1;aa>=0;aa--){Y=af[Z];if(R.remove[aa].name==Y){ab[Y]=true;break}}}for(aa=R.apply.length-1;aa>=0;aa--){for(Z=0;Z<af.length;Z++){Y=af[Z];if(!ab[Y]&&R.apply[aa].name==Y){ab[Y]=true;ad.push(Y)}}}}ac=r.getStart();c.getParent(ac,function(ai){var ah,ag;for(ah=0;ah<af.length;ah++){ag=af[ah];if(!ab[ag]&&z(ai,ag,ae)){ab[ag]=true;ad.push(ag)}}});return ad}function A(ac){var ae=T(ac),ab,aa,ad,Z,Y;if(ae){ab=r.getStart();aa=m(ab);for(Z=ae.length-1;Z>=0;Z--){Y=ae[Z].selector;if(!Y){return D}for(ad=aa.length-1;ad>=0;ad--){if(c.is(aa[ad],Y)){return D}}}}return U}a.extend(this,{get:T,register:k,apply:V,remove:C,toggle:F,match:j,matchAll:y,matchNode:z,canApply:A});function h(Y,Z){if(g(Y,Z.inline)){return D}if(g(Y,Z.block)){return D}if(Z.selector){return c.is(Y,Z.selector)}}function g(Z,Y){Z=Z||"";Y=Y||"";Z=""+(Z.nodeName||Z);Y=""+(Y.nodeName||Y);return Z.toLowerCase()==Y.toLowerCase()}function N(Z,Y){var aa=c.getStyle(Z,Y);if(Y=="color"||Y=="backgroundColor"){aa=c.toHex(aa)}if(Y=="fontWeight"&&aa==700){aa="bold"}return""+aa}function s(Y,Z){if(typeof(Y)!="string"){Y=Y(Z)}else{if(Z){Y=Y.replace(/%(\w+)/g,function(ab,aa){return Z[aa]||ab})}}return Y}function f(Y){return Y&&Y.nodeType===3&&/^([\s\r\n]+|)$/.test(Y.nodeValue)}function P(aa,Z,Y){var ab=c.create(Z,Y);aa.parentNode.insertBefore(ab,aa);ab.appendChild(aa);return ab}function p(Y,ai,ab){var aa=Y.startContainer,af=Y.startOffset,al=Y.endContainer,ag=Y.endOffset,ak,ah,ae;function aj(ao,ap,am,an){var aq,ar;an=an||c.getRoot();for(;;){aq=ao.parentNode;if(aq==an||(!ai[0].block_expand&&H(aq))){return ao}for(ak=aq[ap];ak&&ak!=ao;ak=ak[am]){if(ak.nodeType==1&&!J(ak)){return ao}if(ak.nodeType==3&&!f(ak)){return ao}}ao=ao.parentNode}return ao}function ad(am,an){if(an===q){an=am.nodeType===3?am.length:am.childNodes.length}while(am&&am.hasChildNodes()){am=am.childNodes[an];if(am){an=am.nodeType===3?am.length:am.childNodes.length}}return{node:am,offset:an}}if(aa.nodeType==1&&aa.hasChildNodes()){ah=aa.childNodes.length-1;aa=aa.childNodes[af>ah?ah:af];if(aa.nodeType==3){af=0}}if(al.nodeType==1&&al.hasChildNodes()){ah=al.childNodes.length-1;al=al.childNodes[ag>ah?ah:ag-1];if(al.nodeType==3){ag=al.nodeValue.length}}if(J(aa.parentNode)){aa=aa.parentNode}if(J(aa)){aa=aa.nextSibling||aa}if(J(al.parentNode)){ag=c.nodeIndex(al);al=al.parentNode}if(J(al)&&al.previousSibling){al=al.previousSibling;ag=al.length}if(ai[0].inline){ae=ad(al,ag);if(ae.node){while(ae.node&&ae.offset===0&&ae.node.previousSibling){ae=ad(ae.node.previousSibling)}if(ae.node&&ae.offset>0&&ae.node.nodeType===3&&ae.node.nodeValue.charAt(ae.offset-1)===" "){if(ae.offset>1){al=ae.node;al.splitText(ae.offset-1)}else{if(ae.node.previousSibling){al=ae.node.previousSibling}}}}}if(ai[0].inline||ai[0].block_expand){aa=aj(aa,"firstChild","nextSibling");al=aj(al,"lastChild","previousSibling")}if(ai[0].selector&&ai[0].expand!==U&&!ai[0].inline){function ac(an,am){var ao,ap,ar,aq;if(an.nodeType==3&&an.nodeValue.length==0&&an[am]){an=an[am]}ao=m(an);for(ap=0;ap<ao.length;ap++){for(ar=0;ar<ai.length;ar++){aq=ai[ar];if("collapsed" in aq&&aq.collapsed!==Y.collapsed){continue}if(c.is(ao[ap],aq.selector)){return ao[ap]}}}return an}aa=ac(aa,"previousSibling");al=ac(al,"nextSibling")}if(ai[0].block||ai[0].selector){function Z(an,am,ap){var ao;if(!ai[0].wrapper){ao=c.getParent(an,ai[0].block)}if(!ao){ao=c.getParent(an.nodeType==3?an.parentNode:an,H)}if(ao&&ai[0].wrapper){ao=m(ao,"ul,ol").reverse()[0]||ao}if(!ao){ao=an;while(ao[am]&&!H(ao[am])){ao=ao[am];if(g(ao,"br")){break}}}return ao||an}aa=Z(aa,"previousSibling");al=Z(al,"nextSibling");if(ai[0].block){if(!H(aa)){aa=aj(aa,"firstChild","nextSibling")}if(!H(al)){al=aj(al,"lastChild","previousSibling")}}}if(aa.nodeType==1){af=u(aa);aa=aa.parentNode}if(al.nodeType==1){ag=u(al)+1;al=al.parentNode}return{startContainer:aa,startOffset:af,endContainer:al,endOffset:ag}}function W(ae,ad,ab,Y){var aa,Z,ac;if(!h(ab,ae)){return U}if(ae.remove!="all"){Q(ae.styles,function(ag,af){ag=s(ag,ad);if(typeof(af)==="number"){af=ag;Y=0}if(!Y||g(N(Y,af),ag)){c.setStyle(ab,af,"")}ac=1});if(ac&&c.getAttrib(ab,"style")==""){ab.removeAttribute("style");ab.removeAttribute("data-mce-style")}Q(ae.attributes,function(ah,af){var ag;ah=s(ah,ad);if(typeof(af)==="number"){af=ah;Y=0}if(!Y||g(c.getAttrib(Y,af),ah)){if(af=="class"){ah=c.getAttrib(ab,af);if(ah){ag="";Q(ah.split(/\s+/),function(ai){if(/mce\w+/.test(ai)){ag+=(ag?" ":"")+ai}});if(ag){c.setAttrib(ab,af,ag);return}}}if(af=="class"){ab.removeAttribute("className")}if(e.test(af)){ab.removeAttribute("data-mce-"+af)}ab.removeAttribute(af)}});Q(ae.classes,function(af){af=s(af,ad);if(!Y||c.hasClass(Y,af)){c.removeClass(ab,af)}});Z=c.getAttribs(ab);for(aa=0;aa<Z.length;aa++){if(Z[aa].nodeName.indexOf("_")!==0){return U}}}if(ae.remove!="none"){o(ab,ae);return D}}function o(aa,ab){var Y=aa.parentNode,Z;if(ab.block){if(!l){function ac(ae,ad,af){ae=E(ae,ad,af);return !ae||(ae.nodeName=="BR"||H(ae))}if(H(aa)&&!H(Y)){if(!ac(aa,U)&&!ac(aa.firstChild,D,1)){aa.insertBefore(c.create("br"),aa.firstChild)}if(!ac(aa,D)&&!ac(aa.lastChild,U,1)){aa.appendChild(c.create("br"))}}}else{if(Y==c.getRoot()){if(!ab.list_block||!g(aa,ab.list_block)){Q(a.grep(aa.childNodes),function(ad){if(d(l,ad.nodeName.toLowerCase())){if(!Z){Z=P(ad,l)}else{Z.appendChild(ad)}}else{Z=0}})}}}}if(ab.selector&&ab.inline&&!g(ab.inline,aa)){return}c.remove(aa,1)}function E(Z,Y,aa){if(Z){Y=Y?"nextSibling":"previousSibling";for(Z=aa?Z:Z[Y];Z;Z=Z[Y]){if(Z.nodeType==1||!f(Z)){return Z}}}}function J(Y){return Y&&Y.nodeType==1&&Y.getAttribute("data-mce-type")=="bookmark"}function x(ac,ab){var Y,aa,Z;function ae(ah,ag){if(ah.nodeName!=ag.nodeName){return U}function af(aj){var ak={};Q(c.getAttribs(aj),function(al){var am=al.nodeName.toLowerCase();if(am.indexOf("_")!==0&&am!=="style"){ak[am]=c.getAttrib(aj,am)}});return ak}function ai(am,al){var ak,aj;for(aj in am){if(am.hasOwnProperty(aj)){ak=al[aj];if(ak===q){return U}if(am[aj]!=ak){return U}delete al[aj]}}for(aj in al){if(al.hasOwnProperty(aj)){return U}}return D}if(!ai(af(ah),af(ag))){return U}if(!ai(c.parseStyle(c.getAttrib(ah,"style")),c.parseStyle(c.getAttrib(ag,"style")))){return U}return D}if(ac&&ab){function ad(ag,af){for(aa=ag;aa;aa=aa[af]){if(aa.nodeType==3&&aa.nodeValue.length!==0){return ag}if(aa.nodeType==1&&!J(aa)){return aa}}return ag}ac=ad(ac,"previousSibling");ab=ad(ab,"nextSibling");if(ae(ac,ab)){for(aa=ac.nextSibling;aa&&aa!=ab;){Z=aa;aa=aa.nextSibling;ac.appendChild(Z)}c.remove(ab);Q(a.grep(ab.childNodes),function(af){ac.appendChild(af)});return ac}}return ab}function I(Y){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(Y)}function L(Z,ac){var Y,ab,aa;Y=Z[ac?"startContainer":"endContainer"];ab=Z[ac?"startOffset":"endOffset"];if(Y.nodeType==1){aa=Y.childNodes.length-1;if(!ac&&ab){ab--}Y=Y.childNodes[ab>aa?aa:ab]}return Y}function S(ad,Z,ac){var aa,Y=R[ad],ae=R[ad=="apply"?"remove":"apply"];function af(){return R.apply.length||R.remove.length}function ab(){R.apply=[];R.remove=[]}function ag(ah){Q(R.apply.reverse(),function(ai){V(ai.name,ai.vars,ah);if(ai.name==="forecolor"&&ai.vars.value){K(ah.parentNode)}});Q(R.remove.reverse(),function(ai){C(ai.name,ai.vars,ah)});c.remove(ah,1);ab()}for(aa=Y.length-1;aa>=0;aa--){if(Y[aa].name==Z){return}}Y.push({name:Z,vars:ac});for(aa=ae.length-1;aa>=0;aa--){if(ae[aa].name==Z){ae.splice(aa,1)}}if(af()){X.getDoc().execCommand("FontName",false,"mceinline");R.lastRng=r.getRng();Q(c.select("font,span"),function(ai){var ah;if(b(ai)){ah=r.getBookmark();ag(ai);r.moveToBookmark(ah);X.nodeChanged()}});if(!R.isListening&&af()){R.isListening=true;Q("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(ah){X[ah].addToTop(function(ai,aj){if(af()&&!a.dom.RangeUtils.compareRanges(R.lastRng,r.getRng())){Q(c.select("font,span"),function(al){var am,ak;if(b(al)){am=al.firstChild;if(am){ag(al);ak=c.createRng();ak.setStart(am,am.nodeValue.length);ak.setEnd(am,am.nodeValue.length);r.setRng(ak);ai.nodeChanged()}else{c.remove(al)}}});if(aj.type=="keyup"||aj.type=="mouseup"){ab()}}})})}}}}})(tinymce);tinymce.onAddEditor.add(function(e,a){var d,h,g,c=a.settings;if(c.inline_styles){h=e.explode(c.font_size_style_values);function b(j,i){e.each(i,function(l,k){if(l){g.setStyle(j,k,l)}});g.rename(j,"span")}d={font:function(j,i){b(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:h[parseInt(i.size)-1]})},u:function(j,i){b(i,{textDecoration:"underline"})},strike:function(j,i){b(i,{textDecoration:"line-through"})}};function f(i,j){g=i.dom;if(c.convert_fonts_to_spans){e.each(g.select("font,u,strike",j.node),function(k){d[k.nodeName.toLowerCase()](a.dom,k)})}}a.onPreProcess.add(f);a.onSetContent.add(f);a.onInit.add(function(){a.selection.onSetContent.add(f)})}});(function(e){var d=e.DOM,b=e.dom.Event,h=e.extend,f=e.each,a=e.util.Cookie,g,c=e.explode;e.ThemeManager.requireLangPack("advanced");e.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(j,k){var l=this,m,i,p;l.editor=j;l.url=k;l.onResolveName=new e.util.Dispatcher(this);j.forcedHighContrastMode=j.settings.detect_highcontrast&&l._isHighContrast();j.settings.skin=j.forcedHighContrastMode?"highcontrast":j.settings.skin;l.settings=m=h({theme_advanced_path:true,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:j.settings.readonly},j.settings);if(!m.font_size_style_values){m.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"}if(e.is(m.theme_advanced_font_sizes,"string")){m.font_size_style_values=e.explode(m.font_size_style_values);m.font_size_classes=e.explode(m.font_size_classes||"");p={};j.settings.theme_advanced_font_sizes=m.theme_advanced_font_sizes;f(j.getParam("theme_advanced_font_sizes","","hash"),function(r,q){var o;if(q==r&&r>=1&&r<=7){q=r+" ("+l.sizes[r-1]+"pt)";o=m.font_size_classes[r-1];r=m.font_size_style_values[r-1]||(l.sizes[r-1]+"pt")}if(/^\s*\./.test(r)){o=r.replace(/\./g,"")}p[q]=o?{"class":o}:{fontSize:r}});m.theme_advanced_font_sizes=p}if((i=m.theme_advanced_path_location)&&i!="none"){m.theme_advanced_statusbar_location=m.theme_advanced_path_location}if(m.theme_advanced_statusbar_location=="none"){m.theme_advanced_statusbar_location=0}if(j.settings.content_css!==false){j.contentCSS.push(j.baseURI.toAbsolute(k+"/skins/"+j.settings.skin+"/content.css"))}j.onInit.add(function(){if(!j.settings.readonly){j.onNodeChange.add(l._nodeChanged,l);j.onKeyUp.add(l._updateUndoStatus,l);j.onMouseUp.add(l._updateUndoStatus,l);j.dom.bind(j.dom.getRoot(),"dragend",function(){l._updateUndoStatus(j)})}});j.onSetProgressState.add(function(r,o,s){var u,v=r.id,q;if(o){l.progressTimer=setTimeout(function(){u=r.getContainer();u=u.insertBefore(d.create("DIV",{style:"position:relative"}),u.firstChild);q=d.get(r.id+"_tbl");d.add(u,"div",{id:v+"_blocker","class":"mceBlocker",style:{width:q.clientWidth+2,height:q.clientHeight+2}});d.add(u,"div",{id:v+"_progress","class":"mceProgress",style:{left:q.clientWidth/2,top:q.clientHeight/2}})},s||0)}else{d.remove(v+"_blocker");d.remove(v+"_progress");clearTimeout(l.progressTimer)}});d.loadCSS(m.editor_css?j.documentBaseURI.toAbsolute(m.editor_css):k+"/skins/"+j.settings.skin+"/ui.css");if(m.skin_variant){d.loadCSS(k+"/skins/"+j.settings.skin+"/ui_"+m.skin_variant+".css")}},_isHighContrast:function(){var i,j=d.add(d.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});i=(d.getStyle(j,"background-color",true)+"").toLowerCase().replace(/ /g,"");d.remove(j);return i!="rgb(171,239,86)"&&i!="#abef56"},createControl:function(l,i){var j,k;if(k=i.createControl(l)){return k}switch(l){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if((j=this.controls[l])){return i.createButton(l,{title:"advanced."+j[0],cmd:j[1],ui:j[2],value:j[3]})}},execCommand:function(k,j,l){var i=this["_"+k];if(i){i.call(this,j,l);return true}return false},_importClasses:function(k){var i=this.editor,j=i.controlManager.get("styleselect");if(j.getLength()==0){f(i.dom.getClasses(),function(p,l){var m="style_"+l;i.formatter.register(m,{inline:"span",attributes:{"class":p["class"]},selector:"*"});j.add(p["class"],m)})}},_createStyleSelect:function(m){var k=this,i=k.editor,j=i.controlManager,l;l=j.createListBox("styleselect",{title:"advanced.style_select",onselect:function(p){var q,o=[];f(l.items,function(r){o.push(r.value)});i.focus();i.undoManager.add();q=i.formatter.matchAll(o);if(!p||q[0]==p){if(q[0]){i.formatter.remove(q[0])}}else{i.formatter.apply(p)}i.undoManager.add();i.nodeChanged();return false}});i.onInit.add(function(){var p=0,o=i.getParam("style_formats");if(o){f(o,function(q){var r,s=0;f(q,function(){s++});if(s>1){r=q.name=q.name||"style_"+(p++);i.formatter.register(r,q);l.add(q.title,r)}else{l.add(q.title)}})}else{f(i.getParam("theme_advanced_styles","","hash"),function(s,r){var q;if(s){q="style_"+(p++);i.formatter.register(q,{inline:"span",classes:s,selector:"*"});l.add(k.editor.translate(r),q)}})}});if(l.getLength()==0){l.onPostRender.add(function(o,p){if(!l.NativeListBox){b.add(p.id+"_text","focus",k._importClasses,k);b.add(p.id+"_text","mousedown",k._importClasses,k);b.add(p.id+"_open","focus",k._importClasses,k);b.add(p.id+"_open","mousedown",k._importClasses,k)}else{b.add(p.id,"focus",k._importClasses,k)}})}return l},_createFontSelect:function(){var k,j=this,i=j.editor;k=i.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(l){var m=k.items[k.selectedIndex];if(!l&&m){i.execCommand("FontName",false,m.value);return}i.execCommand("FontName",false,l);k.select(function(o){return l==o});if(m&&m.value==l){k.select(null)}return false}});if(k){f(i.getParam("theme_advanced_fonts",j.settings.theme_advanced_fonts,"hash"),function(m,l){k.add(i.translate(l),m,{style:m.indexOf("dings")==-1?"font-family:"+m:""})})}return k},_createFontSizeSelect:function(){var m=this,k=m.editor,o,l=0,j=[];o=k.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(i){var p=o.items[o.selectedIndex];if(!i&&p){p=p.value;if(p["class"]){k.formatter.toggle("fontsize_class",{value:p["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,p.fontSize)}return}if(i["class"]){k.focus();k.undoManager.add();k.formatter.toggle("fontsize_class",{value:i["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,i.fontSize)}o.select(function(q){return i==q});if(p&&(p.value.fontSize==i.fontSize||p.value["class"]==i["class"])){o.select(null)}return false}});if(o){f(m.settings.theme_advanced_font_sizes,function(p,i){var q=p.fontSize;if(q>=1&&q<=7){q=m.sizes[parseInt(q)-1]+"pt"}o.add(i,p,{style:"font-size:"+q,"class":"mceFontSize"+(l++)+(" "+(p["class"]||""))})})}return o},_createBlockFormats:function(){var k,i={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},j=this;k=j.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(l){j.editor.execCommand("FormatBlock",false,l);return false}});if(k){f(j.editor.getParam("theme_advanced_blockformats",j.settings.theme_advanced_blockformats,"hash"),function(m,l){k.add(j.editor.translate(l!=m?l:i[m]),m,{"class":"mce_formatPreview mce_"+m})})}return k},_createForeColorMenu:function(){var m,j=this,k=j.settings,l={},i;if(k.theme_advanced_more_colors){l.more_colors_func=function(){j._mceColorPicker(0,{color:m.value,func:function(o){m.setColor(o)}})}}if(i=k.theme_advanced_text_colors){l.colors=i}if(k.theme_advanced_default_foreground_color){l.default_color=k.theme_advanced_default_foreground_color}l.title="advanced.forecolor_desc";l.cmd="ForeColor";l.scope=this;m=j.editor.controlManager.createColorSplitButton("forecolor",l);return m},_createBackColorMenu:function(){var m,j=this,k=j.settings,l={},i;if(k.theme_advanced_more_colors){l.more_colors_func=function(){j._mceColorPicker(0,{color:m.value,func:function(o){m.setColor(o)}})}}if(i=k.theme_advanced_background_colors){l.colors=i}if(k.theme_advanced_default_background_color){l.default_color=k.theme_advanced_default_background_color}l.title="advanced.backcolor_desc";l.cmd="HiliteColor";l.scope=this;m=j.editor.controlManager.createColorSplitButton("backcolor",l);return m},renderUI:function(k){var m,l,q,v=this,r=v.editor,x=v.settings,u,j,i;if(r.settings){r.settings.aria_label=x.aria_label+r.getLang("advanced.help_shortcut")}m=j=d.create("span",{role:"application","aria-labelledby":r.id+"_voice",id:r.id+"_parent","class":"mceEditor "+r.settings.skin+"Skin"+(x.skin_variant?" "+r.settings.skin+"Skin"+v._ufirst(x.skin_variant):"")});d.add(m,"span",{"class":"mceVoiceLabel",style:"display:none;",id:r.id+"_voice"},x.aria_label);if(!d.boxModel){m=d.add(m,"div",{"class":"mceOldBoxModel"})}m=u=d.add(m,"table",{role:"presentation",id:r.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});m=q=d.add(m,"tbody");switch((x.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":l=v._rowLayout(x,q,k);break;case"customlayout":l=r.execCallback("theme_advanced_custom_layout",x,q,k,j);break;default:l=v._simpleLayout(x,q,k,j)}m=k.targetNode;i=u.rows;d.addClass(i[0],"mceFirst");d.addClass(i[i.length-1],"mceLast");f(d.select("tr",q),function(o){d.addClass(o.firstChild,"mceFirst");d.addClass(o.childNodes[o.childNodes.length-1],"mceLast")});if(d.get(x.theme_advanced_toolbar_container)){d.get(x.theme_advanced_toolbar_container).appendChild(j)}else{d.insertAfter(j,m)}b.add(r.id+"_path_row","click",function(o){o=o.target;if(o.nodeName=="A"){v._sel(o.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return b.cancel(o)}});if(!r.getParam("accessibility_focus")){b.add(d.add(j,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(r.id).focus()})}if(x.theme_advanced_toolbar_location=="external"){k.deltaHeight=0}v.deltaHeight=k.deltaHeight;k.targetNode=null;r.onKeyDown.add(function(s,o){var y=121,p=122;if(o.altKey){if(o.keyCode===y){v.toolbarGroup.focus();return b.cancel(o)}else{if(o.keyCode===p){d.get(s.id+"_path_row").focus();return b.cancel(o)}}}});r.addShortcut("alt+0","","mceShortcuts",v);return{iframeContainer:l,editorContainer:r.id+"_parent",sizeContainer:u,deltaHeight:k.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:e.majorVersion+"."+e.minorVersion}},resizeBy:function(i,j){var k=d.get(this.editor.id+"_ifr");this.resizeTo(k.clientWidth+i,k.clientHeight+j)},resizeTo:function(i,m,k){var j=this.editor,l=this.settings,o=d.get(j.id+"_tbl"),p=d.get(j.id+"_ifr");i=Math.max(l.theme_advanced_resizing_min_width||100,i);m=Math.max(l.theme_advanced_resizing_min_height||100,m);i=Math.min(l.theme_advanced_resizing_max_width||65535,i);m=Math.min(l.theme_advanced_resizing_max_height||65535,m);d.setStyle(o,"height","");d.setStyle(p,"height",m);if(l.theme_advanced_resize_horizontal){d.setStyle(o,"width","");d.setStyle(p,"width",i);if(i<o.clientWidth){i=o.clientWidth;d.setStyle(p,"width",o.clientWidth)}}if(k&&l.theme_advanced_resizing_use_cookie){a.setHash("TinyMCE_"+j.id+"_size",{cw:i,ch:m})}},destroy:function(){var i=this.editor.id;b.clear(i+"_resize");b.clear(i+"_path_row");b.clear(i+"_external_close")},_simpleLayout:function(z,r,k,i){var y=this,u=y.editor,v=z.theme_advanced_toolbar_location,m=z.theme_advanced_statusbar_location,l,j,q,x;if(z.readonly){l=d.add(r,"tr");l=j=d.add(l,"td",{"class":"mceIframeContainer"});return j}if(v=="top"){y._addToolbars(r,k)}if(v=="external"){l=x=d.create("div",{style:"position:relative"});l=d.add(l,"div",{id:u.id+"_external","class":"mceExternalToolbar"});d.add(l,"a",{id:u.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});l=d.add(l,"table",{id:u.id+"_tblext",cellSpacing:0,cellPadding:0});q=d.add(l,"tbody");if(i.firstChild.className=="mceOldBoxModel"){i.firstChild.appendChild(x)}else{i.insertBefore(x,i.firstChild)}y._addToolbars(q,k);u.onMouseUp.add(function(){var p=d.get(u.id+"_external");d.show(p);d.hide(g);var o=b.add(u.id+"_external_close","click",function(){d.hide(u.id+"_external");b.remove(u.id+"_external_close","click",o)});d.show(p);d.setStyle(p,"top",0-d.getRect(u.id+"_tblext").h-1);d.hide(p);d.show(p);p.style.filter="";g=u.id+"_external";p=null})}if(m=="top"){y._addStatusBar(r,k)}if(!z.theme_advanced_toolbar_container){l=d.add(r,"tr");l=j=d.add(l,"td",{"class":"mceIframeContainer"})}if(v=="bottom"){y._addToolbars(r,k)}if(m=="bottom"){y._addStatusBar(r,k)}return j},_rowLayout:function(x,m,k){var v=this,p=v.editor,u,y,i=p.controlManager,l,j,r,q;u=x.theme_advanced_containers_default_class||"";y=x.theme_advanced_containers_default_align||"center";f(c(x.theme_advanced_containers||""),function(z,s){var o=x["theme_advanced_container_"+z]||"";switch(o.toLowerCase()){case"mceeditor":l=d.add(m,"tr");l=j=d.add(l,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":v._addStatusBar(m,k);break;default:q=(x["theme_advanced_container_"+z+"_align"]||y).toLowerCase();q="mce"+v._ufirst(q);l=d.add(d.add(m,"tr"),"td",{"class":"mceToolbar "+(x["theme_advanced_container_"+z+"_class"]||u)+" "+q||y});r=i.createToolbar("toolbar"+s);v._addControls(o,r);d.setHTML(l,r.renderHTML());k.deltaHeight-=x.theme_advanced_row_height}});return j},_addControls:function(j,i){var k=this,l=k.settings,m,o=k.editor.controlManager;if(l.theme_advanced_disable&&!k._disabled){m={};f(c(l.theme_advanced_disable),function(p){m[p]=1});k._disabled=m}else{m=k._disabled}f(c(j),function(q){var p;if(m&&m[q]){return}if(q=="tablecontrols"){f(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(r){r=k.createControl(r,o);if(r){i.add(r)}});return}p=k.createControl(q,o);if(p){i.add(p)}})},_addToolbars:function(y,k){var B=this,p,m,r=B.editor,C=B.settings,A,j=r.controlManager,u,l,q=[],z,x;x=j.createToolbarGroup("toolbargroup",{name:r.getLang("advanced.toolbar"),tab_focus_toolbar:r.getParam("theme_advanced_tab_focus_toolbar")});B.toolbarGroup=x;z=C.theme_advanced_toolbar_align.toLowerCase();z="mce"+B._ufirst(z);l=d.add(d.add(y,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+z,role:"presentation"});for(p=1;(A=C["theme_advanced_buttons"+p]);p++){m=j.createToolbar("toolbar"+p,{"class":"mceToolbarRow"+p});if(C["theme_advanced_buttons"+p+"_add"]){A+=","+C["theme_advanced_buttons"+p+"_add"]}if(C["theme_advanced_buttons"+p+"_add_before"]){A=C["theme_advanced_buttons"+p+"_add_before"]+","+A}B._addControls(A,m);x.add(m);k.deltaHeight-=C.theme_advanced_row_height}q.push(x.renderHTML());q.push(d.createHTML("a",{href:"#",accesskey:"z",title:r.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+r.id+"').focus();"},"<!-- IE -->"));d.setHTML(l,q.join(""))},_addStatusBar:function(m,j){var k,v=this,p=v.editor,x=v.settings,i,q,u,l;k=d.add(m,"tr");k=l=d.add(k,"td",{"class":"mceStatusbar"});k=d.add(k,"div",{id:p.id+"_path_row",role:"group","aria-labelledby":p.id+"_path_voice"});if(x.theme_advanced_path){d.add(k,"span",{id:p.id+"_path_voice"},p.translate("advanced.path"));d.add(k,"span",{},": ")}else{d.add(k,"span",{},"&#160;")}if(x.theme_advanced_resizing){d.add(l,"a",{id:p.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize"});if(x.theme_advanced_resizing_use_cookie){p.onPostRender.add(function(){var r=a.getHash("TinyMCE_"+p.id+"_size"),s=d.get(p.id+"_tbl");if(!r){return}v.resizeTo(r.cw,r.ch)})}p.onPostRender.add(function(){b.add(p.id+"_resize","click",function(o){o.preventDefault()});b.add(p.id+"_resize","mousedown",function(G){var z,s,y,r,F,C,D,I,o,H,A;function B(J){J.preventDefault();o=D+(J.screenX-F);H=I+(J.screenY-C);v.resizeTo(o,H)}function E(J){b.remove(d.doc,"mousemove",z);b.remove(p.getDoc(),"mousemove",s);b.remove(d.doc,"mouseup",y);b.remove(p.getDoc(),"mouseup",r);o=D+(J.screenX-F);H=I+(J.screenY-C);v.resizeTo(o,H,true)}G.preventDefault();F=G.screenX;C=G.screenY;A=d.get(v.editor.id+"_ifr");D=o=A.clientWidth;I=H=A.clientHeight;z=b.add(d.doc,"mousemove",B);s=b.add(p.getDoc(),"mousemove",B);y=b.add(d.doc,"mouseup",E);r=b.add(p.getDoc(),"mouseup",E)})})}j.deltaHeight-=21;k=m=null},_updateUndoStatus:function(j){var i=j.controlManager;i.setDisabled("undo",!j.undoManager.hasUndo()&&!j.typing);i.setDisabled("redo",!j.undoManager.hasRedo())},_nodeChanged:function(m,r,E,q,F){var z=this,D,G=0,y,H,A=z.settings,x,k,u,C,l,j,i;e.each(z.stateControls,function(p){r.setActive(p,m.queryCommandState(z.controls[p][1]))});function o(s){var v,p=F.parents,I=s;if(typeof(s)=="string"){I=function(J){return J.nodeName==s}}for(v=0;v<p.length;v++){if(I(p[v])){return p[v]}}}r.setActive("visualaid",m.hasVisual);z._updateUndoStatus(m);r.setDisabled("outdent",!m.queryCommandState("Outdent"));D=o("A");if(H=r.get("link")){if(!D||!D.name){H.setDisabled(!D&&q);H.setActive(!!D)}}if(H=r.get("unlink")){H.setDisabled(!D&&q);H.setActive(!!D&&!D.name)}if(H=r.get("anchor")){H.setActive(!q&&!!D&&D.name)}D=o("IMG");if(H=r.get("image")){H.setActive(!q&&!!D&&E.className.indexOf("mceItem")==-1)}if(H=r.get("styleselect")){z._importClasses();j=[];f(H.items,function(p){j.push(p.value)});i=m.formatter.matchAll(j);H.select(i[0])}if(H=r.get("formatselect")){D=o(d.isBlock);if(D){H.select(D.nodeName.toLowerCase())}}o(function(p){if(p.nodeName==="SPAN"){if(!x&&p.className){x=p.className}}if(m.dom.is(p,A.theme_advanced_font_selector)){if(!k&&p.style.fontSize){k=p.style.fontSize}if(!u&&p.style.fontFamily){u=p.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()}if(!C&&p.style.color){C=p.style.color}if(!l&&p.style.backgroundColor){l=p.style.backgroundColor}}return false});if(H=r.get("fontselect")){H.select(function(p){return p.replace(/^([^,]+).*/,"$1").toLowerCase()==u})}if(H=r.get("fontsizeselect")){if(A.theme_advanced_runtime_fontsize&&!k&&!x){k=m.dom.getStyle(E,"fontSize",true)}H.select(function(p){if(p.fontSize&&p.fontSize===k){return true}if(p["class"]&&p["class"]===x){return true}})}if(A.theme_advanced_show_current_color){function B(s,p){if(H=r.get(s)){if(!p){p=H.settings.default_color}if(p!==H.value){H.displayColor(p)}}}B("forecolor",C);B("backcolor",l)}if(A.theme_advanced_show_current_color){function B(s,p){if(H=r.get(s)){if(!p){p=H.settings.default_color}if(p!==H.value){H.displayColor(p)}}}B("forecolor",C);B("backcolor",l)}if(A.theme_advanced_path&&A.theme_advanced_statusbar_location){D=d.get(m.id+"_path")||d.add(m.id+"_path_row","span",{id:m.id+"_path"});if(z.statusKeyboardNavigation){z.statusKeyboardNavigation.destroy();z.statusKeyboardNavigation=null}d.setHTML(D,"");o(function(J){var p=J.nodeName.toLowerCase(),s,I,v="";if(J.getAttribute("data-mce-bogus")){return}if(J.nodeType!=1||J.nodeName==="BR"||(d.hasClass(J,"mceItemHidden")||d.hasClass(J,"mceItemRemoved"))){return}if(e.isIE&&J.scopeName!=="HTML"){p=J.scopeName+":"+p}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(y=d.getAttrib(J,"src")){v+="src: "+y+" "}break;case"a":if(y=d.getAttrib(J,"name")){v+="name: "+y+" ";p+="#"+y}if(y=d.getAttrib(J,"href")){v+="href: "+y+" "}break;case"font":if(y=d.getAttrib(J,"face")){v+="font: "+y+" "}if(y=d.getAttrib(J,"size")){v+="size: "+y+" "}if(y=d.getAttrib(J,"color")){v+="color: "+y+" "}break;case"span":if(y=d.getAttrib(J,"style")){v+="style: "+y+" "}break}if(y=d.getAttrib(J,"id")){v+="id: "+y+" "}if(y=J.className){y=y.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(y){v+="class: "+y+" ";if(d.isBlock(J)||p=="img"||p=="span"){p+="."+y}}}p=p.replace(/(html:)/g,"");p={name:p,node:J,title:v};z.onResolveName.dispatch(z,p);v=p.title;p=p.name;I=d.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:v,"class":"mcePath_"+(G++)},p);if(D.hasChildNodes()){D.insertBefore(d.create("span",{"aria-hidden":"true"},"\u00a0\u00bb "),D.firstChild);D.insertBefore(I,D.firstChild)}else{D.appendChild(I)}},m.getBody());if(d.select("a",D).length>0){z.statusKeyboardNavigation=new e.ui.KeyboardNavigation({root:m.id+"_path_row",items:d.select("a",D),excludeFromTabOrder:true,onCancel:function(){m.focus()}},d)}}},_sel:function(i){this.editor.execCommand("mceSelectNodeDepth",false,i)},_mceInsertAnchor:function(k,j){var i=this.editor;i.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(i.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(i.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var i=this.editor;i.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(i.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(i.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var i=this.editor;i.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceShortcuts:function(){var i=this.editor;i.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(k,j){var i=this.editor;j=j||{};i.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(i.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(i.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:j.color,func:j.func,theme_url:this.url})},_mceCodeEditor:function(j,k){var i=this.editor;i.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(i.getParam("theme_advanced_source_editor_width",720)),height:parseInt(i.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(j,k){var i=this.editor;if(i.dom.getAttrib(i.selection.getNode(),"class").indexOf("mceItem")!=-1){return}i.windowManager.open({url:this.url+"/image.htm",width:455+parseInt(i.getLang("advanced.image_delta_width",0)),height:200+parseInt(i.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(j,k){var i=this.editor;i.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(i.getLang("advanced.link_delta_width",0)),height:200+parseInt(i.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var i=this.editor;i.windowManager.confirm("advanced.newdocument",function(j){if(j){i.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var i=this;this._mceColorPicker(0,{color:i.fgColor,func:function(j){i.fgColor=j;i.editor.execCommand("ForeColor",false,j)}})},_mceBackColor:function(){var i=this;this._mceColorPicker(0,{color:i.bgColor,func:function(j){i.bgColor=j;i.editor.execCommand("HiliteColor",false,j)}})},_ufirst:function(i){return i.substring(0,1).toUpperCase()+i.substring(1)}});e.ThemeManager.add("advanced",e.themes.AdvancedTheme)}(tinymce));(function(){tinymce.PluginManager.requireLangPack("syntaxhl");tinymce.create("tinymce.plugins.SyntaxHL",{init:function(a,b){a.addCommand("mceSyntaxHL",function(){a.windowManager.open({file:b+"/dialog.htm",width:630+parseInt(a.getLang("syntaxhl.delta_width",0)),height:220+parseInt(a.getLang("syntaxhl.delta_height",0)),inline:1},{plugin_url:b})});a.addButton("syntaxhl",{title:"syntaxhl.desc",cmd:"mceSyntaxHL",image:b+"/img/highlight.gif"});a.onNodeChange.add(function(d,c,e){c.setActive("syntaxhl",e.nodeName=="IMG")})},createControl:function(b,a){return null},getInfo:function(){return{longname:"Syntax Highlighter",author:"Richard Grundy",authorurl:"http://27smiles.com",infourl:"http://27smiles.com",version:"1.0"}}});tinymce.PluginManager.add("syntaxhl",tinymce.plugins.SyntaxHL)})();(function(){var b=tinymce.DOM,a=tinymce.dom.Event,c=tinymce.each;tinymce.create("tinymce.plugins.jQueryInlinePopups",{init:function(d,e){d.onBeforeRenderUI.add(function(){d.windowManager=new tinymce.InlineWindowManager(d)})},getInfo:function(){return{longname:"jQuery UI Inline Popups",author:"Richard Willis",authorurl:"http://badsyntax.co",infourl:"http://is.gd/j1FuI",version:"0.1b"}}});tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(d){this.parent(d);this.windows={}},open:function(j,k){j=j||{};k=k||{};if(!j.inline){return h.parent(j,k)}var h=this,l=b.uniqueId(),e={title:j.title||"",width:"auto",height:"auto",modal:true,resizable:false,draggable:true,dialogClass:"ui-dialog-tinymce",zIndex:300000,open:function(m,o){if($.browser.msie&&parseInt($.browser.version)<=7){var f=$(this).outerWidth();var p=(document.documentElement.clientWidth-f)/2;if(f){$(this).dialog("option","width",f);$(this).parent(".ui-dialog").css({left:p})}}}},g=$("<div />").attr("id","dialog-"+l).hide().appendTo("body"),d={id:l,features:j,element:g};if(!j.type){this.bookmark=this.editor.selection.getBookmark(1)}if(j.content){if(j.type=="confirm"){e.buttons=[{text:"Ok",click:function(f){j.button_func(true)}},{text:"Cancel",click:function(f){j.button_func(false)}}]}else{if(j.type=="alert"){e.buttons=[{text:"Ok",click:function(f){j.button_func(true)}}]}}e.width=j.width;g.html($("<div />",{"class":"ui-dialog-tinymce-content",html:j.content}))}else{var i=$("<iframe />",{id:l+"_ifr",frameborder:0}).css({width:j.width,height:j.height}).appendTo(g)}k.mce_inline=true;k.mce_window_id=l;k.mce_auto_focus=j.auto_focus;this.features=j;this.params=k;this.onOpen.dispatch(this,j,k);g.dialog(e);if(!j.content){i.attr("src",j.url||j.file)}h.windows[l]=d;return d},resizeBy:function(d,e,f){return},focus:function(d){return},close:function(f,g){var e=this,d,g=g||f.frameElement.id.replace(/_ifr$/,"");if(!e.windows[g]){e.parent(f);return}if(d=e.windows[g]){d.element.dialog("destroy").remove();delete e.windows[g]}},setTitle:function(d,e){var f=d.frameElement.id.replace(/_ifr$/,"");$("#ui-dialog-title-dialog-"+f).html(e)},alert:function(e,d,f){this._messagePopup("alert","Alert",e,d,f)},confirm:function(e,d,f){this._messagePopup("confirm","Confirm",e,d,f)},_messagePopup:function(i,j,e,d,h){var g=this,f;f=g.open({title:j,type:i,button_func:function(k){(d)&&d.call(k||g,k);g.close(null,f.id)},content:b.encode(g.editor.getLang(e,e)),inline:1,width:400,height:130})}});tinymce.PluginManager.add("jqueryinlinepopups",tinymce.plugins.jQueryInlinePopups)})();(function(){tinymce.create("tinymce.plugins.AutolinkPlugin",{init:function(a,b){var c=this;if(tinyMCE.isIE){return}a.onKeyDown.add(function(d,f){if(f.keyCode==13){return c.handleEnter(d)}if(f.shiftKey&&f.keyCode==48){return c.handleEclipse(d)}});a.onKeyUp.add(function(d,f){if(f.keyCode==32){return c.handleSpacebar(d)}})},handleEclipse:function(a){this.parseCurrentLine(a,-1,"(",true)},handleSpacebar:function(a){this.parseCurrentLine(a,0,"",true)},handleEnter:function(a){this.parseCurrentLine(a,-1,"",false)},parseCurrentLine:function(k,d,b,g){var a,f,c,s,m,q,j,e,l;a=k.selection.getRng().cloneRange();if(a.startOffset<5){e=a.endContainer.previousSibling;if(e==null){if(a.endContainer.firstChild==null||a.endContainer.firstChild.nextSibling==null){return}e=a.endContainer.firstChild.nextSibling}l=e.length;a.setStart(e,l);a.setEnd(e,l);if(a.endOffset<5){return}f=a.endOffset;s=e}else{s=a.endContainer;if(s.nodeType!=3&&s.firstChild){while(s.nodeType!=3&&s.firstChild){s=s.firstChild}a.setStart(s,0);a.setEnd(s,s.nodeValue.length)}if(a.endOffset==1){f=2}else{f=a.endOffset-1-d}}c=f;do{a.setStart(s,f-2);a.setEnd(s,f-1);f-=1}while(a.toString()!=" "&&a.toString()!=""&&a.toString().charCodeAt(0)!=160&&(f-2)>=0&&a.toString()!=b);if(a.toString()==b||a.toString().charCodeAt(0)==160){a.setStart(s,f);a.setEnd(s,c);f+=1}else{if(a.startOffset==0){a.setStart(s,0);a.setEnd(s,c)}else{a.setStart(s,f);a.setEnd(s,c)}}q=a.toString();j=q.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)(.+)$/i);if(j){if(j[1]=="www."){j[1]="http://www."}m=k.selection.getBookmark();var p=".,)>\n";for(var h=0;h<p.length;h++){if(j[0].slice(-1)==p[h]){j[0]=j[0].slice(0,-1);a.setEnd(s,--c);h=0}}k.selection.setRng(a);tinyMCE.execCommand("mceInsertLink",false,j[1]+j[2]);k.selection.moveToBookmark(m);if(tinyMCE.isWebKit){k.selection.collapse(false);var o=Math.min(s.length,c+1);a.setStart(s,o);a.setEnd(s,o);k.selection.setRng(a)}}},getInfo:function(){return{longname:"Autolink",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autolink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("autolink",tinymce.plugins.AutolinkPlugin)})();(function(){var e=tinymce.each,s=tinymce.dom.Event,g;function q(v,u){while(v&&(v.nodeType===8||(v.nodeType===3&&/^[ \t\n\r]*$/.test(v.nodeValue)))){v=u(v)}return v}function b(u){return q(u,function(v){return v.previousSibling})}function i(u){return q(u,function(v){return v.nextSibling})}function d(u,x,v){return u.dom.getParent(x,function(y){return tinymce.inArray(v,y)!==-1})}function o(u){return u&&(u.tagName==="OL"||u.tagName==="UL")}function c(x,y){var v,z,u;v=b(x.lastChild);while(o(v)){z=v;v=b(z.previousSibling)}if(z){u=y.create("li",{style:"list-style-type: none;"});y.split(x,z);y.insertAfter(u,z);u.appendChild(z);u.appendChild(z);x=u.previousSibling}return x}function m(v,u,x){v=a(v,u,x);return p(v,u,x)}function a(x,u,y){var v=b(x.previousSibling);if(v){return h(v,x,u?v:false,y)}else{return x}}function p(x,v,y){var u=i(x.nextSibling);if(u){return h(x,u,v?u:false,y)}else{return x}}function h(x,u,v,y){if(l(x,u,!!v,y)){return f(x,u,v)}else{if(x&&x.tagName==="LI"&&o(u)){x.appendChild(u)}}return u}function l(x,v,u,y){if(!x||!v){return false}else{if(x.tagName==="LI"&&v.tagName==="LI"){return v.style.listStyleType==="none"||j(v)}else{if(o(x)){return(x.tagName===v.tagName&&(u||x.style.listStyleType===v.style.listStyleType))||r(v)}else{if(y&&x.tagName==="P"&&v.tagName==="P"){return true}else{return false}}}}}function r(v){var u=i(v.firstChild),x=b(v.lastChild);return u&&x&&o(v)&&u===x&&(o(u)||u.style.listStyleType==="none"||j(u))}function j(x){var v=i(x.firstChild),u=b(x.lastChild);return v&&u&&v===u&&o(v)}function f(z,y,u){var x=b(z.lastChild),v=i(y.firstChild);if(z.tagName==="P"){z.appendChild(z.ownerDocument.createElement("br"))}while(y.firstChild){z.appendChild(y.firstChild)}if(u){z.style.listStyleType=u.style.listStyleType}y.parentNode.removeChild(y);h(x,v,false);return z}function k(v,x){var u;if(!x.is(v,"li,ol,ul")){u=x.getParent(v,"li");if(u){v=u}}return v}tinymce.create("tinymce.plugins.Lists",{init:function(x,y){var u=false;function A(B){return B.keyCode===9&&(x.queryCommandState("InsertUnorderedList")||x.queryCommandState("InsertOrderedList"))}function z(B,D){var C=B.selection,E;if(D.keyCode===13){E=C.getStart();u=C.isCollapsed()&&E&&E.tagName==="LI"&&E.childNodes.length===0;return u}}function v(B,C){if(A(C)||z(B,C)){return s.cancel(C)}}this.ed=x;x.addCommand("Indent",this.indent,this);x.addCommand("Outdent",this.outdent,this);x.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this);x.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this);x.onInit.add(function(){x.editorCommands.addCommands({outdent:function(){var C=x.selection,D=x.dom;function B(E){E=D.getParent(E,D.isBlock);return E&&(parseInt(x.dom.getStyle(E,"margin-left")||0,10)+parseInt(x.dom.getStyle(E,"padding-left")||0,10))>0}return B(C.getStart())||B(C.getEnd())||x.queryCommandState("InsertOrderedList")||x.queryCommandState("InsertUnorderedList")}},"state")});x.onKeyUp.add(function(C,D){var E,B;if(A(D)){C.execCommand(D.shiftKey?"Outdent":"Indent",true,null);return s.cancel(D)}else{if(u&&z(C,D)){if(C.queryCommandState("InsertOrderedList")){C.execCommand("InsertOrderedList")}else{C.execCommand("InsertUnorderedList")}E=C.selection.getStart();if(E&&E.tagName==="LI"){E=C.dom.getParent(E,"ol,ul").nextSibling;if(E&&E.tagName==="P"){if(!E.firstChild){E.appendChild(C.getDoc().createTextNode(""))}B=C.dom.createRng();B.setStart(E.firstChild,1);B.setEnd(E.firstChild,1);C.selection.setRng(B)}}return s.cancel(D)}}});x.onKeyPress.add(v);x.onKeyDown.add(v)},applyList:function(A,x){var E=this,B=E.ed,K=B.dom,u=[],J=false,v=false,y=false,D,I=B.selection.getSelectedBlocks();function G(N){if(N&&N.tagName==="BR"){K.remove(N)}}function H(P){var Q=K.create(A),N;function O(R){if(R.style.marginLeft||R.style.paddingLeft){E.adjustPaddingFunction(false)(R)}}if(P.tagName==="LI"){}else{if(P.tagName==="P"||P.tagName==="DIV"||P.tagName==="BODY"){M(P,function(S,R,T){L(S,R,P.tagName==="BODY"?null:S.parentNode);N=S.parentNode;O(N);G(R)});if(P.tagName==="P"||I.length>1){K.split(N.parentNode.parentNode,N.parentNode)}m(N.parentNode,true);return}else{N=K.create("li");K.insertAfter(N,P);N.appendChild(P);O(P);P=N}}K.insertAfter(Q,P);Q.appendChild(P);m(Q,true);u.push(P)}function L(T,O,R){var N,S=T,Q,P;while(!K.isBlock(T.parentNode)&&T.parentNode!==K.getRoot()){T=K.split(T.parentNode,T.previousSibling);T=T.nextSibling;S=T}if(R){N=R.cloneNode(true);T.parentNode.insertBefore(N,T);while(N.firstChild){K.remove(N.firstChild)}N=K.rename(N,"li")}else{N=K.create("li");T.parentNode.insertBefore(N,T)}while(S&&S!=O){Q=S.nextSibling;N.appendChild(S);S=Q}if(N.childNodes.length===0){N.innerHTML='<br _mce_bogus="1" />'}H(N)}function M(T,W){var Q,U,R=3,O=1,N="br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl";function S(aa,X){var Y=K.createRng(),Z;g.keep=true;B.selection.moveToBookmark(g);g.keep=false;Z=B.selection.getRng(true);if(!X){X=aa.parentNode.lastChild}Y.setStartBefore(aa);Y.setEndAfter(X);return !(Y.compareBoundaryPoints(R,Z)>0||Y.compareBoundaryPoints(O,Z)<=0)}function V(X){if(X.nextSibling){return X.nextSibling}if(!K.isBlock(X.parentNode)&&X.parentNode!==K.getRoot()){return V(X.parentNode)}}Q=T.firstChild;var P=false;e(K.select(N,T),function(Y){var X;if(Y.hasAttribute&&Y.hasAttribute("_mce_bogus")){return true}if(S(Q,Y)){K.addClass(Y,"_mce_tagged_br");Q=V(Y)}});P=(Q&&S(Q,undefined));Q=T.firstChild;e(K.select(N,T),function(Y){var X=V(Y);if(Y.hasAttribute&&Y.hasAttribute("_mce_bogus")){return true}if(K.hasClass(Y,"_mce_tagged_br")){W(Q,Y,U);U=null}else{U=Y}Q=X});if(P){W(Q,undefined,U)}}function F(N){M(N,function(P,O,Q){L(P,O);G(O);G(Q)})}function C(N){if(tinymce.inArray(u,N)!==-1){return}if(N.parentNode.tagName===x){K.split(N.parentNode,N);H(N);p(N.parentNode,false)}u.push(N)}function z(P){var R,Q,O,N;if(tinymce.inArray(u,P)!==-1){return}P=c(P,K);while(K.is(P.parentNode,"ol,ul,li")){K.split(P.parentNode,P)}u.push(P);P=K.rename(P,"p");O=m(P,false,B.settings.force_br_newlines);if(O===P){R=P.firstChild;while(R){if(K.isBlock(R)){R=K.split(R.parentNode,R);N=true;Q=R.nextSibling&&R.nextSibling.firstChild}else{Q=R.nextSibling;if(N&&R.tagName==="BR"){K.remove(R)}N=false}R=Q}}}e(I,function(N){N=k(N,K);if(N.tagName===x||(N.tagName==="LI"&&N.parentNode.tagName===x)){v=true}else{if(N.tagName===A||(N.tagName==="LI"&&N.parentNode.tagName===A)){J=true}else{y=true}}});if(y||v||I.length===0){D={LI:C,H1:H,H2:H,H3:H,H4:H,H5:H,H6:H,P:H,BODY:H,DIV:I.length>1?H:F,defaultAction:F}}else{D={defaultAction:z}}this.process(D)},indent:function(){var x=this.ed,z=x.dom,A=[];function u(C){var B=z.create("li",{style:"list-style-type: none;"});z.insertAfter(B,C);return B}function v(E){var B=u(E),G=z.getParent(E,"ol,ul"),F=G.tagName,H=z.getStyle(G,"list-style-type"),D={},C;if(H!==""){D.style="list-style-type: "+H+";"}C=z.create(F,D);B.appendChild(C);return C}function y(C){if(!d(x,C,A)){C=c(C,z);var B=v(C);B.appendChild(C);m(B.parentNode,false);m(B,false);A.push(C)}}this.process({LI:y,defaultAction:this.adjustPaddingFunction(true)})},outdent:function(){var x=this,v=x.ed,y=v.dom,u=[];function z(A){var C,B,D;if(!d(v,A,u)){if(y.getStyle(A,"margin-left")!==""||y.getStyle(A,"padding-left")!==""){return x.adjustPaddingFunction(false)(A)}D=y.getStyle(A,"text-align",true);if(D==="center"||D==="right"){y.setStyle(A,"text-align","left");return}A=c(A,y);C=A.parentNode;B=A.parentNode.parentNode;if(B.tagName==="P"){y.split(B,A.parentNode)}else{y.split(C,A);if(B.tagName==="LI"){y.split(B,A)}else{if(!y.is(B,"ol,ul")){y.rename(A,"p")}}}u.push(A)}}this.process({LI:z,defaultAction:this.adjustPaddingFunction(false)});e(u,m)},process:function(z){var D=this,x=D.ed.selection,A=D.ed.dom,C,u;function y(E){A.removeClass(E,"_mce_act_on");if(!E||E.nodeType!==1){return}E=k(E,A);var F=z[E.tagName];if(!F){F=z.defaultAction}F(E)}function v(E){D.splitSafeEach(E.childNodes,y)}function B(E,F){return F>=0&&E.hasChildNodes()&&F<E.childNodes.length&&E.childNodes[F].tagName==="BR"}C=x.getSelectedBlocks();if(C.length===0){C=[A.getRoot()]}u=x.getRng(true);if(!u.collapsed){if(B(u.endContainer,u.endOffset-1)){u.setEnd(u.endContainer,u.endOffset-1);x.setRng(u)}if(B(u.startContainer,u.startOffset)){u.setStart(u.startContainer,u.startOffset+1);x.setRng(u)}}g=x.getBookmark();z.OL=z.UL=v;D.splitSafeEach(C,y);x.moveToBookmark(g);g=null;D.ed.execCommand("mceRepaint")},splitSafeEach:function(v,u){if(tinymce.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))){this.classBasedEach(v,u)}else{e(v,u)}},classBasedEach:function(y,x){var z=this.ed.dom,u,v;e(y,function(A){z.addClass(A,"_mce_act_on")});u=z.select("._mce_act_on");while(u.length>0){v=u.shift();z.removeClass(v,"_mce_act_on");x(v);u=z.select("._mce_act_on")}},adjustPaddingFunction:function(x){var u,y,v=this.ed;u=v.settings.indentation;y=/[a-z%]+/i.exec(u);u=parseInt(u,10);return function(z){var B,A;B=parseInt(v.dom.getStyle(z,"margin-left")||0,10)+parseInt(v.dom.getStyle(z,"padding-left")||0,10);if(x){A=B+u}else{A=B-u}v.dom.setStyle(z,"padding-left","");v.dom.setStyle(z,"margin-left",A>0?A+y:"")}},getInfo:function(){return{longname:"Lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("lists",tinymce.plugins.Lists)}());(function(a){a.create("tinymce.plugins.EmotionsPlugin",{init:function(b,c){b.addCommand("mceEmotion",function(){b.windowManager.open({file:c+"/emotions.htm",width:250+parseInt(b.getLang("emotions.delta_width",0)),height:160+parseInt(b.getLang("emotions.delta_height",0)),inline:1},{plugin_url:c})});b.addButton("emotions",{title:"emotions.emotions_desc",cmd:"mceEmotion"})},getInfo:function(){return{longname:"Emotions",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions",version:a.majorVersion+"."+a.minorVersion}}});a.PluginManager.add("emotions",a.plugins.EmotionsPlugin)})(tinymce);(function(){tinymce.create("tinymce.plugins.Preview",{init:function(a,b){var d=this,c=tinymce.explode(a.settings.content_css);d.editor=a;tinymce.each(c,function(f,e){c[e]=a.documentBaseURI.toAbsolute(f)});a.addCommand("mcePreview",function(){a.windowManager.open({file:a.getParam("plugin_preview_pageurl",b+"/preview.html"),width:parseInt(a.getParam("plugin_preview_width","550")),height:parseInt(a.getParam("plugin_preview_height","600")),resizable:"yes",scrollbars:"yes",popup_css:c?c.join(","):a.baseURI.toAbsolute("themes/"+a.settings.theme+"/skins/"+a.settings.skin+"/content.css"),inline:a.getParam("plugin_preview_inline",1)},{base:a.documentBaseURI.getURI()})});a.addButton("preview",{title:"preview.preview_desc",cmd:"mcePreview"})},getInfo:function(){return{longname:"Preview",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/preview",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("preview",tinymce.plugins.Preview)})();(function(){var a=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(d,e){var f=this,g={},c,b;f.editor=d;d.addCommand("mceFullScreen",function(){var i,j=a.doc.documentElement;if(d.getParam("fullscreen_is_enabled")){if(d.getParam("fullscreen_new_window")){closeFullscreen()}else{a.win.setTimeout(function(){tinymce.dom.Event.remove(a.win,"resize",f.resizeFunc);tinyMCE.get(d.getParam("fullscreen_editor_id")).setContent(d.getContent({format:"raw"}),{format:"raw"});tinyMCE.remove(d);a.remove("mce_fullscreen_container");j.style.overflow=d.getParam("fullscreen_html_overflow");a.setStyle(a.doc.body,"overflow",d.getParam("fullscreen_overflow"));a.win.scrollTo(d.getParam("fullscreen_scrollx"),d.getParam("fullscreen_scrolly"));tinyMCE.settings=tinyMCE.oldSettings},10)}return}if(d.getParam("fullscreen_new_window")){i=a.win.open(e+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{i.resizeTo(screen.availWidth,screen.availHeight)}catch(h){}}else{tinyMCE.oldSettings=tinyMCE.settings;g.fullscreen_overflow=a.getStyle(a.doc.body,"overflow",1)||"auto";g.fullscreen_html_overflow=a.getStyle(j,"overflow",1);c=a.getViewPort();g.fullscreen_scrollx=c.x;g.fullscreen_scrolly=c.y;if(tinymce.isOpera&&g.fullscreen_overflow=="visible"){g.fullscreen_overflow="auto"}if(tinymce.isIE&&g.fullscreen_overflow=="scroll"){g.fullscreen_overflow="auto"}if(tinymce.isIE&&(g.fullscreen_html_overflow=="visible"||g.fullscreen_html_overflow=="scroll")){g.fullscreen_html_overflow="auto"}if(g.fullscreen_overflow=="0px"){g.fullscreen_overflow=""}a.setStyle(a.doc.body,"overflow","hidden");j.style.overflow="hidden";c=a.getViewPort();a.win.scrollTo(0,0);if(tinymce.isIE){c.h-=1}if(tinymce.isIE6){b="absolute;top:"+c.y}else{b="fixed;top:0"}n=a.add(a.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+b+";left:0;width:"+c.w+"px;height:"+c.h+"px;z-index:200000;"});a.add(n,"div",{id:"mce_fullscreen"});tinymce.each(d.settings,function(k,l){g[l]=k});g.id="mce_fullscreen";g.width=n.clientWidth;g.height=n.clientHeight-15;g.fullscreen_is_enabled=true;g.fullscreen_editor_id=d.id;g.theme_advanced_resizing=false;g.save_onsavecallback=function(){d.setContent(tinyMCE.get(g.id).getContent({format:"raw"}),{format:"raw"});d.execCommand("mceSave")};tinymce.each(d.getParam("fullscreen_settings"),function(m,l){g[l]=m});if(g.theme_advanced_toolbar_location==="external"){g.theme_advanced_toolbar_location="top"}f.fullscreenEditor=new tinymce.Editor("mce_fullscreen",g);f.fullscreenEditor.onInit.add(function(){f.fullscreenEditor.setContent(d.getContent());f.fullscreenEditor.focus()});f.fullscreenEditor.render();f.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container");f.fullscreenElement.update();f.resizeFunc=tinymce.dom.Event.add(a.win,"resize",function(){var o=tinymce.DOM.getViewPort(),l=f.fullscreenEditor,k,m;k=l.dom.getSize(l.getContainer().firstChild);m=l.dom.getSize(l.getContainer().getElementsByTagName("iframe")[0]);l.theme.resizeTo(o.w-k.w+m.w,o.h-k.h+m.h)})}});d.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"});d.onNodeChange.add(function(i,h){h.setActive("fullscreen",i.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)})();(function(){tinymce.create("tinymce.plugins.AutoResizePlugin",{init:function(b,d){var e=this;if(b.getParam("fullscreen_is_enabled")){return}function c(){var i=b.getDoc(),f=i.body,k=i.documentElement,h=tinymce.DOM,j=e.autoresize_min_height,g;g=tinymce.isIE?f.scrollHeight:k.offsetHeight;if(g>e.autoresize_min_height){j=g}h.setStyle(h.get(b.id+"_ifr"),"height",j+"px");if(e.throbbing){b.setProgressState(false);b.setProgressState(true)}}e.editor=b;var a=b.getElement();e.autoresize_min_height=a.offsetHeight||parseInt(a.style.height);b.onChange.add(c);b.onSetContent.add(c);b.onPaste.add(c);b.onKeyUp.add(c);b.onPostRender.add(c);if(b.getParam("autoresize_on_init",true)){b.onInit.add(function(g,f){g.setProgressState(true);e.throbbing=true;g.getBody().style.overflowY="hidden"});b.onLoadContent.add(function(g,f){c();setTimeout(function(){c();g.setProgressState(false);e.throbbing=false},1250)})}b.addCommand("mceAutoResize",c)},getInfo:function(){return{longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("autoresize",tinymce.plugins.AutoResizePlugin)})();jQuery.extend({createUploadIframe:function(d,b){var a="jUploadFrame"+d;if(window.ActiveXObject){var c=document.createElement('<iframe id="'+a+'" name="'+a+'" />');if(typeof b=="boolean"){c.src="javascript:false"}else{if(typeof b=="string"){c.src=b}}}else{var c=document.createElement("iframe");c.id=a;c.name=a}c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";document.body.appendChild(c);return c},createUploadForm:function(h,b){var f="jUploadForm"+h;var a="jUploadFile"+h;var e=$('<form  action="" method="POST" name="'+f+'" id="'+f+'" enctype="multipart/form-data"></form>');var c=$("#"+b);var g=$(c).clone();$(c).attr("id",a);$(c).before(g);$(c).appendTo(e);var d=cookie_get("csrftoken");if(d){e.append('<input type="hidden" name="csrfmiddlewaretoken" value="'+d+'" />')}$(e).css("position","absolute");$(e).css("top","-1200px");$(e).css("left","-1200px");$(e).appendTo("body");return e},ajaxFileUpload:function(k){k=jQuery.extend({},jQuery.ajaxSettings,k);var a=new Date().getTime();var b=jQuery.createUploadForm(a,k.fileElementId);var i=jQuery.createUploadIframe(a,k.secureuri);var h="jUploadFrame"+a;var j="jUploadForm"+a;if(k.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var c=false;var f={};if(k.global){jQuery.event.trigger("ajaxSend",[f,k])}var d=function(l){var q=document.getElementById(h);try{if(q.contentWindow){f.responseText=q.contentWindow.document.body?q.contentWindow.document.body.innerText:null;f.responseXML=q.contentWindow.document.XMLDocument?q.contentWindow.document.XMLDocument:q.contentWindow.document}else{if(q.contentDocument){f.responseText=q.contentDocument.document.body?q.contentDocument.document.body.textContent||document.body.innerText:null;f.responseXML=q.contentDocument.document.XMLDocument?q.contentDocument.document.XMLDocument:q.contentDocument.document}}}catch(p){jQuery.handleError(k,f,null,p)}if(f||l=="timeout"){c=true;var m;try{m=l!="timeout"?"success":"error";if(m!="error"){var o=jQuery.uploadHttpData(f,k.dataType);if(k.success){k.success(o,m)}if(k.global){jQuery.event.trigger("ajaxSuccess",[f,k])}}else{jQuery.handleError(k,f,m)}}catch(p){m="error";jQuery.handleError(k,f,m,p)}if(k.global){jQuery.event.trigger("ajaxComplete",[f,k])}if(k.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(k.complete){k.complete(f,m)}jQuery(q).unbind();setTimeout(function(){try{$(q).remove();$(b).remove()}catch(r){jQuery.handleError(k,f,null,r)}},100);f=null}};if(k.timeout>0){setTimeout(function(){if(!c){d("timeout")}},k.timeout)}try{var b=$("#"+j);$(b).attr("action",k.url);$(b).attr("method","POST");$(b).attr("target",h);if(b.encoding){b.encoding="multipart/form-data"}else{b.enctype="multipart/form-data"}$(b).submit()}catch(g){jQuery.handleError(k,f,null,g)}if(window.attachEvent){document.getElementById(h).attachEvent("onload",d)}else{document.getElementById(h).addEventListener("load",d,false)}return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script"){jQuery.globalEval(data)}if(type=="json"){eval("data = "+data)}if(type=="html"){jQuery("<div>").html(data).evalScripts()}return data}});(function(){function b(d,c){document.cookie=d+"="+c}function a(e,f){var c=document.cookie.match(new RegExp("(^|; )"+e+"=(.*?)(; |$)"));return c?c[2]:f}tinymce.PluginManager.requireLangPack("upload");tinymce.create("tinymce.plugins.AtlassianUpload",{init:function(c,d){c.addCommand("mceUpload",function(){c.windowManager.open({file:d+"/dialog.htm",width:400+parseInt(c.getLang("upload.delta_width",0)),height:100+parseInt(c.getLang("upload.delta_height",0)),inline:1},{scriptUrl:scriptUrl,plugin_url:d})});c.addButton("upload",{title:"upload.desc",cmd:"mceUpload",image:d+"/img/upload.png"});c.onInit.add(function(){tinymce.dom.Event.add(c.getDoc(),"drop",function(f){setTimeout(function(){var e=$('img[src^="data:"]',c.getDoc());if(e.length&&(window.atob===undefined||window.FormData===undefined)){c.windowManager.alert("Drag-and-drop of images is not supported by this browser.  Please use the upload button.");e.remove();return}e.each(function(){var m=this,k=/data:(image\/\w+);base64,(.*)/gmi.exec(this.src),l,j,o;if(k){l=k[1];j=l.split("/")[1];o=atob(k[2]);k=new Uint8Array(o.length);for(var h=0;h<o.length;h++){k[h]=o.charCodeAt(h)}}else{c.windowManager.alert("Drag-and-drop of that image is not supported.  Please use the upload button.");$(this).remove();return}var g=new FormData();g.append("file-upload",new Blob([k],{type:l}),"uploaded_image."+j);$.ajax({type:"POST",url:"/upload/",data:g,processData:false,contentType:false,success:function(q){var i=$(q).find("file_url").text();var p=$(q).find("error").text();if(p!==""){c.windowManager.alert(p)}else{m.onload=function(){c.execCommand("mceAutoResize")};m.src=i}}})})},100)})})},createControl:function(d,c){return null},getInfo:function(){return{longname:"Atlassian Uploader",author:"Andrew Rowls"}}});tinymce.PluginManager.add("upload",tinymce.plugins.AtlassianUpload)})();function cookie_set(b,a){document.cookie=b+"="+a}function cookie_get(b,c){var a=document.cookie.match(new RegExp("(^|; )"+b+"=(.*?)(; |$)"));return a?a[2]:c}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,e){if(this==null){throw new TypeError()}var d=Object(this);var a=d.length>>>0;if(a===0){return -1}var f=0;if(arguments.length>0){f=Number(arguments[1]);if(f!=f){f=0}else{if(f!=0&&f!=Infinity&&f!=-Infinity){f=(f>0||-1)*Math.floor(Math.abs(f))}}}if(f>=a){return -1}var b=f>=0?f:Math.max(a-Math.abs(f),0);for(;b<a;b++){if(b in d&&d[b]===c){return b}}return -1}}function post_process_html(b){var c=/{code(?:\:language=([\s\S]+?))?}([\S\s]+?){\/code}/im;var e=["bash","csharp","cpp","css","delphi","diff","groovy","jscript","javascript","java","perl","php","plain","python","ruby","scala","sql","vb","xml"];while(c.test(b)){var a=c.exec(b);var f=a[1],d=a[2],a=a[0];if(!f||e.indexOf(f)==-1){f="plain"}d=d.replace(/<[^<]+?>/g,"");if(d.indexOf("\n")!=-1){d='<pre class="brush: '+f+'; class-name: wrap; fontsize: 100; first-line: 1; ">'+d+"</pre>"}else{d="<code>"+d+"</code>"}b=b.replace(a,d)}return b}function preview(a,e){var d=$(a.getElement()).parents("form:first").find(".tiny-preview");var b=$(a.getElement()).parents("form:first").find(".tiny-preview-preload");if(d.length&&(e||d.is(":visible"))){if(!b.length){b=d.clone().hide().attr({"class":"tiny-preview-preload"}).insertAfter(d)}clearInterval(b.data("shlto"));var c=post_process_html(a.getContent());b.html(c);SyntaxHighlighter.load_brushes();SyntaxHighlighter.all();t=setInterval(function(){if(SyntaxHighlighter.findElements().length){return}d.html(b.html());clearInterval(b.data("shlto"));b.data({shlto:null});d.find(".syntaxhighlighter.wrap").each(function(){wrap_lines(this)})},100);b.data({shlto:t})}}if($(window).width()>800){if(tinyMCE){tinyMCE.init({mode:"specific_textareas",editor_selector:/(editor|commentBox)/,theme:"advanced",width:"100%",plugins:"emotions,spellchecker",plugins:"jqueryinlinepopups,autolink,lists,emotions,preview,fullscreen,autoresize,syntaxhl,upload",theme_advanced_buttons1:"bold,italic,|,bullist,numlist,blockquote,|,undo,redo,|,link,unlink,image,syntaxhl,upload",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",extended_valid_elements:"textarea[cols|rows|disabled|name|readonly|class]",setup:function(a){function b(d){var c=d.getElement();c.value=d.getContent();c.style.display="none";preview(d)}a.onKeyUp.add(b);a.onChange.add(b)},oninit:function(){$(".preview").each(function(){var e=$(this);var d=e.closest("form").find(".tiny-preview");d.hide();var f=false;var a="Preview";var c=e.parents("form:first").find("textarea");var b=null;if(c.length){c=c[0];b=tinyMCE.getInstanceById(c.id)}e.text(a);e.click(function(){a=f?"Preview":"Hide Preview";f=!f;d.toggle();e.text(a);if(f&&b){preview(b,true)}return false})})},init_instance_callback:function(a){preview(a,true)}})}};